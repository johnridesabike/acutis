var Acutis=function(r){"use strict";var e={contents:0};function t(r){return e.contents=e.contents+1|0,r+"/"+e.contents}function n(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function a(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var e=r.BS_PRIVATE_NESTED_SOME_NONE;return 0===e?void 0:{BS_PRIVATE_NESTED_SOME_NONE:e-1|0}}function i(r,e){if(e in r)return n(r[e])}function o(r){for(var e={},t=r.length,n=0;n<t;++n){var a=r[n];e[a[0]]=a[1]}return e}function c(r,e){if(e>=0&&e<r.length)return n(r[e])}function u(r){for(var e=r.length,t=new Array(e),n=0;n<e;++n)t[n]=r[(e-1|0)-n|0];return t}function s(r,e){for(var t,n,a=r.length,i=e<0?(t=a+e|0)>(n=0)?t:n:e,o=a-i|0,c=new Array(o),u=0;u<o;++u)c[u]=r[i+u|0];return c}function _(r,e){for(var t=0,n=r.length;t<n;++t)e(t,r[t])}function f(r,e){if(!r)return 0;var t={hd:e(r.hd),tl:0};return function(r,e,t){for(;;){var n=e,a=r;if(!a)return;var i={hd:t(a.hd),tl:0};n.tl=i,e=i,r=a.tl}}(r.tl,t,e),t}function E(r){return function(r,e){for(;;){var t=e,n=r;if(!n)return t;e={hd:n.hd,tl:t},r=n.tl}}(r,0)}function d(r,e){for(;;){var t=r;if(!t)return;e(t.hd),r=t.tl}}var l={map:function(r,e){return{_0:e(r._0),_1:f(r._1,e)}},toList:function(r){return{hd:r._0,tl:r._1}}};var A={get:i,set:function(r,e,t){r[e]=t}},T=/^[a-zA-Z0-9_]$/;var h=/^[a-z_]$/;var v=/^[A-Z]$/;function G(r){switch(r){case"false":case"null":case"true":return!0;default:return!1}}var m=/^[a-z_][a-zA-Z0-9_]*$/;var p={identifierChar:T,isEndOfIdentifier:function(r){return!T.test(r)},identifierStartChar:h,isValidIdentifierStart:function(r){return h.test(r)},componentStart:v,isValidComponentStart:function(r){return v.test(r)},isReservedKeyword:G,bindingRegEx:m,isLegalBinding:function(r){return!!m.test(r)&&!G(r)}};var w={toString:function(r){switch(0|r.TAG){case 0:return"%}"+r._1+"{%";case 2:return"{*"+r._1+"*}";case 4:case 5:return r._1;case 6:case 7:return"{{ "+r._1+" }}";case 1:case 8:return'"'+r._1+'"';case 3:case 9:return String(r._1);case 10:return",";case 11:return":";case 12:return"/";case 13:return"[";case 14:return"]";case 15:return"{";case 16:return"}";case 17:return"...";case 18:return"#";case 19:return"=";case 20:return"~";case 21:return"[end of file]"}},toLocation:function(r){return r._0}};var g={toString:function(r){switch(0|r.TAG){case 0:return"null";case 1:case 2:return"boolean";case 3:return"string";case 4:return"number";case 8:case 9:return"object";case 10:return"binding: `"+r._1+"`";default:return"array"}},toLocation:function(r){switch(0|r.TAG){case 6:case 7:case 9:return r.loc;default:return r._0}}},b=t("Debug-Acutis.UnexpectedEoF"),D=t("Debug-Acutis.UnterminatedComment"),N=t("Debug-Acutis.UnterminatedString"),I=t("Debug-Acutis.IllegalIdentifier"),R=t("Debug-Acutis.InvalidCharacter"),X=t("Debug-Acutis.UnexpectedCharacter"),y=t("Debug-Acutis.UnexpectedToken"),k=t("Debug-Acutis.IllegalBindingName"),S=t("Debug-Acutis.InvalidStatement"),x=t("Debug-Acutis.ComponentDoesNotExist"),B=t("Debug-Acutis.PatternTypeMismatch"),L=t("Debug-Acutis.BindingTypeMismatch"),O=t("Debug-Acutis.NameBoundMultipleTimes"),P=t("Debug-Acutis.NoMatchFound"),C=t("Debug-Acutis.PatternNumberMismatch"),M=t("Debug-Acutis.BadEchoType"),V=t("Debug-Acutis.BindingDoesNotExist"),j=t("Debug-Acutis.ChildDoesNotExist"),U=t("Debug-Acutis.BadMapType"),z=t("Debug-Acutis.BadInputTemplate"),F=t("Debug-Acutis.BadRenderInput");function $(r){if("number"==typeof r)switch(r){case 0:case 1:return"boolean";case 2:return"null"}else switch(0|r.TAG){case 0:return"string";case 1:return"number";case 2:return"object";case 3:return"array"}}function Z(r,e,t,n){return"There's a problem with template "+(void 0!==n?n:"[no name]")+"\n\n"+r+" error at character "+String(t+1|0)+".\n  "+e+"\n"}function q(r){var e=typeof r;return"string"===e?{TAG:0,_0:r}:"number"===e?{TAG:1,_0:r}:"boolean"===e?!0===r?1:0:null===r?2:Array.isArray(r)?{TAG:3,_0:r}:{TAG:2,_0:r}}function K(r,e){return r.TAG?{TAG:1,_0:r._0}:{TAG:0,_0:e(r._0)}}function H(r){r.length=0,r.first=void 0,r.last=void 0}function J(r,e){var t={content:e,next:void 0},n=r.last;void 0!==n?(r.length=r.length+1|0,n.next=t,r.last=t):(r.length=1,r.first=t,r.last=t)}function Q(r){var e=r.first;if(void 0!==e){var t=e.next;return void 0===t?(H(r),n(e.content)):(r.length=r.length-1|0,r.first=t,n(e.content))}}function W(r){var e=r.first;if(void 0!==e){var t=e.next;return void 0===t?(H(r),e.content):(r.length=r.length-1|0,r.first=t,e.content)}throw{RE_EXN_ID:"Not_found",Error:new Error}}var Y=t("Caml_js_exceptions.Error");function rr(r,e){for(;;){var t=e,n=r;if(!n)return{TAG:0,_0:u((i=t,o=void 0,c=void 0,o=function(r){for(var e=r,t=0;;){if(!e)return t;t=t+1|0,e=e.tl}}(i),c=new Array(o),function(r,e,t){for(;;){var n=t,a=e;if(!n)return;r[a]=n.hd,t=n.tl,e=a+1|0}}(c,0,i),c))};var a=n.hd;if(a.TAG)return a;e={hd:a._0,tl:t},r=n.tl}var i,o,c}function er(r,e){switch(0|r.TAG){case 0:return{TAG:0,_0:null};case 1:return{TAG:0,_0:!1};case 2:return{TAG:0,_0:!0};case 3:case 4:return{TAG:0,_0:r._1};case 5:return{TAG:0,_0:[]};case 6:return K(rr(f({hd:r.hd,tl:r.tl},(function(r){return er(r,e)})),0),(function(r){return r}));case 7:var t=r.binding,i=function(r,e){if(void 0!==r)return n(e(a(r)))}(A.get(e,t),q);if(void 0===i)return{TAG:1,_0:{TAG:1,loc:r.bindLoc,binding:t}};if("number"==typeof i)return{TAG:1,_0:{TAG:0,data:i,pattern:r,binding:t}};if(3!==i.TAG)return{TAG:1,_0:{TAG:0,data:i,pattern:r,binding:t}};var c=i._0;return K(rr(f({hd:r.hd,tl:r.tl},(function(r){return er(r,e)})),0),(function(r){return function(r,e){for(var t=r.length,n=e.length,a=new Array(t+n|0),i=0;i<t;++i)a[i]=r[i];for(var o=0;o<n;++o)a[t+o|0]=e[o];return a}(r,c)}));case 8:return{TAG:0,_0:{}};case 9:return K(rr(f({hd:r.hd,tl:r.tl},(function(r){var t=er(r[1],e);return t.TAG?t:{TAG:0,_0:[r[0],t._0]}})),0),o);case 10:var u=r._1,s=A.get(e,u);return void 0!==s?{TAG:0,_0:a(s)}:{TAG:1,_0:{TAG:1,loc:r._0,binding:u}}}}function tr(r,e,t,n){return"_"===e?{TAG:0,_0:r}:void 0!==A.get(r,e)?{TAG:1,_0:{TAG:1,loc:n,binding:e}}:(A.set(r,e,t),{TAG:0,_0:r})}function nr(r,e,t){var n=q(e);switch(0|r.TAG){case 0:return"number"==typeof n&&n>=2?{TAG:0,_0:t}:{TAG:1,_0:0};case 1:if("number"!=typeof n)return{TAG:1,_0:{TAG:0,data:n,pattern:r}};switch(n){case 0:return{TAG:0,_0:t};case 1:case 2:return{TAG:1,_0:0}}case 2:if("number"!=typeof n)return{TAG:1,_0:{TAG:0,data:n,pattern:r}};switch(n){case 1:return{TAG:0,_0:t};case 0:case 2:return{TAG:1,_0:0}}case 3:return"number"==typeof n?2===n?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}}:n.TAG?{TAG:1,_0:{TAG:0,data:n,pattern:r}}:r._1===n._0?{TAG:0,_0:t}:{TAG:1,_0:0};case 4:return"number"==typeof n?2===n?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}}:1===n.TAG?r._1===n._0?{TAG:0,_0:t}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}};case 5:return"number"==typeof n?2===n?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}}:3===n.TAG?0===n._0.length?{TAG:0,_0:t}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}};case 6:return"number"==typeof n?2===n?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}}:3===n.TAG?ar({hd:r.hd,tl:r.tl},n._0,t,void 0):{TAG:1,_0:{TAG:0,data:n,pattern:r}};case 7:return"number"==typeof n?2===n?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}}:3===n.TAG?ar({hd:r.hd,tl:r.tl},n._0,t,[r.bindLoc,r.binding]):{TAG:1,_0:{TAG:0,data:n,pattern:r}};case 8:return"number"==typeof n?2===n?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}}:2===n.TAG?0===Object.keys(n._0).length?{TAG:0,_0:t}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}};case 9:if("number"==typeof n)return 2===n?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:n,pattern:r}};if(2!==n.TAG)return{TAG:1,_0:{TAG:0,data:n,pattern:r}};for(var o={hd:r.hd,tl:r.tl},c=n._0;;){var u=o;if(!u)return{TAG:0,_0:t};var s=u.hd,_=i(c,s[0]);if(void 0===_)return{TAG:1,_0:0};var f=nr(s[1],a(_),t);if(f.TAG)return f;o=u.tl}case 10:return tr(t,r._1,e,r._0)}}function ar(r,e,t,n){for(var i=r,o=0;;){var u=o,_=i;if(!_)return void 0!==n?tr(t,n[1],s(e,u),n[0]):{TAG:0,_0:t};var f=c(e,u);if(void 0===f)return{TAG:1,_0:0};var E=nr(_.hd,a(f),t);if(E.TAG)return E;o=u+1|0,i=_.tl}}function ir(r,e){for(var t={},n=l.toList(r),a=l.toList(e);;){var i=a,o=n;if(!o)return i?{TAG:1,_0:1}:{TAG:0,_0:t};if(!i)return{TAG:1,_0:1};var c=nr(o.hd,i.hd,t);if(c.TAG)return c;a=i.tl,n=o.tl}}function or(r,e){for(var t=r.f,n=l.toList(r.patterns);;){var a=n;if(!a)return{TAG:1,_0:0};var i=ir(a.hd,e);if(!i.TAG)return{TAG:0,_0:t(i._0)};var o=i._0;if("number"!=typeof o)return i;if(0!==o)return i;n=a.tl}}function cr(r){for(var e=0,t="";;){var n=t,a=e,i=r.charAt(a);switch(i){case"":return n;case'"':t=n+"&quot;",e=a+1|0;continue;case"&":t=n+"&amp;",e=a+1|0;continue;case"'":t=n+"&apos;",e=a+1|0;continue;case"/":t=n+"&#x2F;",e=a+1|0;continue;case"<":t=n+"&lt;",e=a+1|0;continue;case"=":t=n+"&#x3D;",e=a+1|0;continue;case">":t=n+"&gt;",e=a+1|0;continue;case"`":t=n+"&#x60;",e=a+1|0;continue;default:t=n+i,e=a+1|0;continue}}}function ur(r,e){var t=A.get(r,e);return void 0!==t?a(t):null}function sr(r,e){var t=q(ur(r,e));if("number"==typeof t)return{TAG:1,_0:t};switch(0|t.TAG){case 0:return{TAG:0,_0:t._0};case 1:return{TAG:0,_0:String(t._0)};default:return{TAG:1,_0:t}}}function _r(r){return function(e){return e._1?e:{_0:e._0,_1:{hd:{TAG:10,_0:r,_1:"_"},tl:0}}}}function fr(r,e,t,n){var a=function(r,e){for(var t=l.toList(r);;){var n=t;if(!n)return{TAG:1,_0:0};var a=or(n.hd,e);if(!a.TAG)return a;var i=a._0;if("number"!=typeof i)return a;if(0!==i)return a;t=n.tl}}(r,e);if(!a.TAG)return a._0;var i=a._0;if("number"==typeof i){if(0===i)throw{RE_EXN_ID:P,loc:t,name:n,Error:new Error};throw{RE_EXN_ID:C,loc:t,name:n,Error:new Error}}if(i.TAG)throw{RE_EXN_ID:O,loc:i.loc,binding:i.binding,name:n,Error:new Error};throw{RE_EXN_ID:B,data:i.data,pattern:i.pattern,name:n,Error:new Error}}function Er(r){for(var e=0;;){var t=e;switch(r.charAt(t)){case"\t":case"\n":case"\r":case" ":e=t+1|0;continue;default:return r.slice(t)}}}function dr(r){for(var e=r.length;;){var t=e;switch(r.charAt(t-1|0)){case"\t":case"\n":case"\r":case" ":e=t-1|0;continue;default:return r.slice(0,t)}}}function lr(r,e,t,n,i,o,c,u){for(var s=t;;){var f=s;if(!f)return;var E=f.hd;switch(0|E.TAG){case 0:var T,h=E._0;switch(E._1){case 0:T=Er(h);break;case 1:T=dr(h);break;case 2:T=Er(dr(h));break;case 3:T=h}J(r,e(T)),s=f.tl;continue;case 1:var v=E._1,G=sr(n,v);if(G.TAG)throw{RE_EXN_ID:M,loc:E._0,binding:v,type_:G._0,name:c,Error:new Error};J(r,e(G._0)),s=f.tl;continue;case 2:var m=E._1,p=sr(n,m);if(p.TAG)throw{RE_EXN_ID:M,loc:E._0,binding:m,type_:p._0,name:c,Error:new Error};J(r,e(cr(p._0))),s=f.tl;continue;case 3:var w=E._1,g=A.get(i,w);if(void 0===g)throw{RE_EXN_ID:j,loc:E._0,child:w,name:c,Error:new Error};J(r,a(g)),s=f.tl;continue;case 4:J(r,e(cr(E._0))),s=f.tl;continue;case 5:J(r,e(cr(String(E._0)))),s=f.tl;continue;case 6:fr(l.map(E._2,(function(t){var a=t.ast;return{patterns:t.patterns,f:function(t){return lr(r,e,a,Object.assign({},n,t),i,o,c,u)}}})),l.map(E._1,(function(r){return ur(n,r[1])})),E._0,c),s=f.tl;continue;case 7:var b=E._2,D=E._1,N=E._0,I=q(ur(n,D));if("number"==typeof I)throw{RE_EXN_ID:U,loc:N,binding:D,type_:I,name:c,Error:new Error};if(3===I.TAG){_(I._0,function(t,a){return function(s,_){return fr(l.map(a,(function(a){var s=a.ast;return{patterns:l.map(a.patterns,_r(t)),f:function(t){return lr(r,e,s,Object.assign({},n,t),i,o,c,u)}}})),{_0:_,_1:{hd:s,tl:0}},t,c)}}(N,b)),s=f.tl;continue}throw{RE_EXN_ID:U,loc:N,binding:D,type_:I,name:c,Error:new Error};case 8:var R=E.name,X=E.loc,y=A.get(o,R);if(void 0!==y){var k={},S={};d(E.children,function(r,e){return function(t){var o,s=t[1];if(s.TAG)o=u({ast:s._0,name:c,isCompiledAst:"VALID_AST"},n,i);else{var _=s._0,f=A.get(i,_);if(void 0===f)throw{RE_EXN_ID:j,loc:r,child:_,name:c,Error:new Error};o=a(f)}return A.set(e,t[0],o)}}(X,S)),d(E.props,function(r){return function(e){var t=er(e[1],n);if(!t.TAG)return A.set(r,e[0],t._0);var a=t._0;if(a.TAG)throw{RE_EXN_ID:V,loc:a.loc,binding:a.binding,name:c,Error:new Error};throw{RE_EXN_ID:L,data:a.data,pattern:a.pattern,binding:a.binding,name:c,Error:new Error}}}(k));var B=y(u,k,S);J(r,B),s=f.tl;continue}throw{RE_EXN_ID:x,loc:X,component:R,name:c,Error:new Error}}}}function Ar(r){if("VALID_AST"!==r.isCompiledAst)throw{RE_EXN_ID:F,Error:new Error}}function Tr(r){return r}function hr(r){return Promise.resolve(r)}function vr(r){return Promise.resolve(r.join(""))}function Gr(r,e){return r.str.charAt(r.position+e|0)}function mr(r){return r.str.charAt(r.position)}function pr(r){r.position=r.position+1|0}function wr(r){var e=mr(r);return pr(r),e}function gr(r,e){for(var t=r.position;;){var n=t;if(e(r.str.charAt(n)))return n;t=n+1|0}}function br(r,e){r.position=gr(r,e)}function Dr(r,e){r.position=r.position+e|0}function Nr(r,e){var t=r.position,n=gr(r,e);return r.position=n,r.str.slice(t,n)}function Ir(r,e){var t=r.position;return r.position=r.position+e|0,r.str.slice(t,r.position)}function Rr(r){switch(r){case"+":case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"E":case"e":return!1;default:return!0}}function Xr(r){switch(r){case"\t":case"\n":case"\r":case" ":return!1;default:return!0}}function yr(r,e){var t=r.position,n=function(r,e){for(;;){var t=e;switch(Gr(r,t)){case"":return Ir(r,t);case"{":switch(Gr(r,t+1|0)){case"%":case"*":case"{":return Ir(r,t);default:e=t+2|0;continue}default:e=t+1|0;continue}}}(r,0);return""===n?void 0:J(e,{TAG:0,_0:t,_1:n})}function kr(r,e){for(var t=r.position,n=0,a=0;;){var i=a,o=n;switch(Gr(r,o)){case"":throw{RE_EXN_ID:D,loc:t,name:e,Error:new Error};case"*":if("}"===Gr(r,o+1|0)){if(0===i){var c=Ir(r,o);return Dr(r,2),c}a=i-1|0,n=o+2|0;continue}n=o+2|0;continue;case"{":if("*"===Gr(r,o+1|0)){a=i+1|0,n=o+2|0;continue}n=o+1|0;continue;default:n=o+1|0;continue}}}var Sr=/\\"/g;function xr(r,e){for(var t=r.position,n=0;;){var a=n;switch(Gr(r,a)){case"":throw{RE_EXN_ID:N,loc:t,name:e,Error:new Error};case'"':var i=Ir(r,a).replace(Sr,'"');return pr(r),i;case"\\":switch(Gr(r,a+1|0)){case'"':case"\\":n=a+2|0;continue;default:n=a+1|0;continue}default:n=a+1|0;continue}}}function Br(r,e){var t,n=r.position,a=Nr(r,Rr),i=(t=parseFloat(a),isNaN(t)?void 0:t);if(void 0!==i)return i;throw{RE_EXN_ID:I,loc:n,identifier:a,name:e,Error:new Error}}function Lr(r,e,t){for(var n=!0;n;){var a=r.position,i=mr(r),o=0;switch(i){case"":throw{RE_EXN_ID:b,loc:a,name:t,Error:new Error};case"\t":case"\n":case"\r":case" ":pr(r);break;case'"':pr(r),J(e,{TAG:1,_0:a,_1:xr(r,t)});break;case"#":J(e,{TAG:18,_0:a}),pr(r);break;case"%":pr(r);var c=r.position,u=wr(r);if("}"!==u)throw{RE_EXN_ID:X,loc:c,character:u,expected:["}"],name:t,Error:new Error};n=!1;break;case",":J(e,{TAG:10,_0:a}),pr(r);break;case".":var s=Ir(r,3);if("..."!==s)throw{RE_EXN_ID:X,loc:a,character:s,expected:["..."],name:t,Error:new Error};J(e,{TAG:17,_0:a});break;case"/":J(e,{TAG:12,_0:a}),pr(r);break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o=1;break;case":":J(e,{TAG:11,_0:a}),pr(r);break;case"=":J(e,{TAG:19,_0:a}),pr(r);break;case"[":J(e,{TAG:13,_0:a}),pr(r);break;case"]":J(e,{TAG:14,_0:a}),pr(r);break;case"{":J(e,{TAG:15,_0:a}),pr(r);break;case"}":J(e,{TAG:16,_0:a}),pr(r);break;case"~":pr(r),J(e,{TAG:20,_0:a});break;default:if(p.isValidIdentifierStart(i))J(e,{TAG:4,_0:a,_1:Nr(r,p.isEndOfIdentifier)});else{if(!p.isValidComponentStart(i))throw{RE_EXN_ID:R,loc:a,character:i,name:t,Error:new Error};J(e,{TAG:5,_0:a,_1:Nr(r,p.isEndOfIdentifier)})}}1===o&&J(e,{TAG:3,_0:a,_1:Br(r,t)})}}function Or(r,e){if("~"===mr(r))return J(e,{TAG:20,_0:r.position}),pr(r)}function Pr(r,e){var t={str:e,position:0},n={length:0,first:void 0,last:void 0};yr(t,n);for(var a=wr(t);""!==a;){if("{"!==a)throw{RE_EXN_ID:X,loc:t.position,character:a,expected:["{","[end of file]"],name:r,Error:new Error};var i=wr(t);switch(i){case"%":Lr(t,n,r),yr(t,n);break;case"*":J(n,{TAG:2,_0:t.position,_1:kr(t,r)}),yr(t,n);break;case"{":Or(t,n),br(t,Xr);var o=mr(t),c=0;switch(o){case'"':var u=t.position;pr(t),J(n,{TAG:8,_0:u,_1:xr(t,r)});break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=1;break;default:if(p.isValidIdentifierStart(o)){J(n,{TAG:6,_0:t.position,_1:Nr(t,p.isEndOfIdentifier)})}else{if(!p.isValidComponentStart(o))throw{RE_EXN_ID:R,loc:t.position,character:o,name:r,Error:new Error};J(n,{TAG:7,_0:t.position,_1:Nr(t,p.isEndOfIdentifier)})}}if(1===c)J(n,{TAG:9,_0:t.position,_1:Br(t,r)});br(t,Xr),Or(t,n);var s=Ir(t,2);if("}}"!==s)throw{RE_EXN_ID:X,loc:t.position,character:s,expected:["}}"],name:r,Error:new Error};yr(t,n);break;default:throw{RE_EXN_ID:X,loc:t.position,character:i,expected:["{","%","*"],name:r,Error:new Error}}a=wr(t)}return J(n,{TAG:21,_0:t.position}),{tokens:n,name:r}}function Cr(r){return function(r){var e=r.first;if(void 0!==e)return e.content;throw{RE_EXN_ID:"Not_found",Error:new Error}}(r.tokens)}function Mr(r){return W(r.tokens)}function Vr(r){W(r.tokens)}function jr(r){return r.name}function Ur(r){var e=Mr(r);switch(0|e.TAG){case 1:return{TAG:3,_0:e._0,_1:e._1};case 3:return{TAG:4,_0:e._0,_1:e._1};case 4:var t=e._1,n=e._0;switch(t){case"false":return{TAG:1,_0:n};case"null":return{TAG:0,_0:n};case"true":return{TAG:2,_0:n};default:return{TAG:10,_0:n,_1:t}}case 13:var a=e._0;if(14===Cr(r).TAG)return Vr(r),{TAG:5,_0:a};for(var i=Ur(r),o=0;;){var c=o,u=Mr(r);switch(0|u.TAG){case 10:var s=Cr(r);switch(0|s.TAG){case 1:case 3:case 4:case 13:case 15:break;case 17:Vr(r);var _=Mr(r);if(4===_.TAG){var f={TAG:7,loc:a,hd:i,tl:E(c),bindLoc:_._0,binding:_._1},d=Mr(r);if(14===d.TAG)return f;throw{RE_EXN_ID:y,token:d,name:jr(r),Error:new Error}}throw{RE_EXN_ID:y,token:_,name:jr(r),Error:new Error};default:throw{RE_EXN_ID:y,token:s,name:jr(r),Error:new Error}}o={hd:Ur(r),tl:c};continue;case 14:return{TAG:6,loc:a,hd:i,tl:E(c)};default:throw{RE_EXN_ID:y,token:u,name:jr(r),Error:new Error}}}case 15:var l=e._0;if(16===Cr(r).TAG)return Vr(r),{TAG:8,_0:l};for(var A=zr(r),T=0;;){var h=T,v=Mr(r);switch(0|v.TAG){case 10:T={hd:zr(r),tl:h};continue;case 16:return{TAG:9,loc:l,hd:A,tl:E(h)};default:throw{RE_EXN_ID:y,token:v,name:jr(r),Error:new Error}}}default:throw{RE_EXN_ID:y,token:e,name:jr(r),Error:new Error}}}function zr(r){var e=Mr(r);switch(0|e.TAG){case 1:case 4:break;default:throw{RE_EXN_ID:y,token:e,name:jr(r),Error:new Error}}var t=e._1,n=e._0;if(11===Cr(r).TAG)return Vr(r),[t,Ur(r)];if(p.isLegalBinding(t))return[t,{TAG:10,_0:n,_1:t}];throw{RE_EXN_ID:I,loc:n,identifier:t,name:jr(r),Error:new Error}}function Fr(r){for(var e=Ur(r),t=0;;){var n=t;if(10!==Cr(r).TAG)return{_0:e,_1:E(n)};Vr(r),t={hd:Ur(r),tl:n}}}function $r(r){var e=Mr(r);if(4===e.TAG){var t=e._1,n=e._0;if(p.isLegalBinding(t))for(var a=0;;){var i=a;if(10!==Cr(r).TAG)return{_0:[n,t],_1:E(i)};Vr(r);var o=Mr(r);if(4===o.TAG){var c=o._1,u=o._0;if(p.isLegalBinding(c)){a={hd:[u,c],tl:i};continue}throw{RE_EXN_ID:k,loc:u,binding:c,name:jr(r),Error:new Error}}throw{RE_EXN_ID:y,token:o,name:jr(r),Error:new Error}}throw{RE_EXN_ID:k,loc:n,binding:t,name:jr(r),Error:new Error}}throw{RE_EXN_ID:y,token:e,name:jr(r),Error:new Error}}function Zr(r){switch(0|r.TAG){case 4:return"with"===r._1;case 12:return!0;default:return!1}}function qr(r){return 21===r.TAG}function Kr(r){return 12===r.TAG}function Hr(r,e){for(var t=0;;){var n=t;if(e(Cr(r)))return E(n);var a=Mr(r);switch(0|a.TAG){case 0:var i=a._1;if(20===Cr(r).TAG){Vr(r),t={hd:{TAG:0,_0:i,_1:1},tl:n};continue}t={hd:{TAG:0,_0:i,_1:3},tl:n};continue;case 2:continue;case 4:var o=a._1,c=a._0;switch(o){case"map":var u,s=Mr(r);if(4!==s.TAG)throw{RE_EXN_ID:y,token:s,name:jr(r),Error:new Error};var _=s._1,f=s._0;if(!p.isLegalBinding(_))throw{RE_EXN_ID:k,loc:f,binding:_,name:jr(r),Error:new Error};u=[f,_];var d=Jr(r),l=Qr(r,"map");t={hd:{TAG:7,_0:u[0],_1:u[1],_2:{_0:d,_1:l}},tl:n};continue;case"match":t={hd:{TAG:6,_0:c,_1:$r(r),_2:{_0:Jr(r),_1:Qr(r,"match")}},tl:n};continue;case"raw":var A=Mr(r);if(4===A.TAG){var T=A._1,h=A._0;if(p.isLegalBinding(T)){t={hd:{TAG:1,_0:h,_1:T},tl:n};continue}throw{RE_EXN_ID:k,loc:h,binding:T,name:jr(r),Error:new Error}}throw{RE_EXN_ID:y,token:A,name:jr(r),Error:new Error};default:throw{RE_EXN_ID:S,loc:c,statement:o,name:jr(r),Error:new Error}}case 5:t={hd:Wr(a._0,a._1,r),tl:n};continue;case 6:var v=a._1,G=a._0;if(p.isLegalBinding(v)){t={hd:{TAG:2,_0:G,_1:v},tl:n};continue}throw{RE_EXN_ID:k,loc:G,binding:v,name:jr(r),Error:new Error};case 7:t={hd:{TAG:3,_0:a._0,_1:a._1},tl:n};continue;case 8:t={hd:{TAG:4,_0:a._1},tl:n};continue;case 9:t={hd:{TAG:5,_0:a._1},tl:n};continue;case 20:var m=Mr(r);if(m.TAG)throw{RE_EXN_ID:y,token:m,name:jr(r),Error:new Error};var w=m._1;if(20===Cr(r).TAG){Vr(r),t={hd:{TAG:0,_0:w,_1:2},tl:n};continue}t={hd:{TAG:0,_0:w,_1:0},tl:n};continue;default:throw{RE_EXN_ID:y,token:a,name:jr(r),Error:new Error}}}}function Jr(r){return{patterns:function(r){var e=Mr(r);if(4!==e.TAG)throw{RE_EXN_ID:y,token:e,name:jr(r),Error:new Error};if("with"!==e._1)throw{RE_EXN_ID:y,token:e,name:jr(r),Error:new Error};for(var t=Fr(r),n=0;;){var a=n,i=Cr(r);if(4!==i.TAG)return{_0:t,_1:E(a)};if("with"!==i._1)return{_0:t,_1:E(a)};Vr(r),n={hd:Fr(r),tl:a}}}(r),ast:Hr(r,Zr)}}function Qr(r,e){for(var t=0;;){var n=t;if(12===Cr(r).TAG){Vr(r);var a=Mr(r);if(4===a.TAG){if(a._1===e)return E(n);throw{RE_EXN_ID:y,token:a,name:jr(r),Error:new Error}}throw{RE_EXN_ID:y,token:a,name:jr(r),Error:new Error}}t={hd:Jr(r),tl:n}}}function Wr(r,e,t){var n=function(r,e,t){for(;;){var n=t,a=e,i=Cr(r);switch(0|i.TAG){case 4:var o=i._1;if(Vr(r),19===Cr(r).TAG){Vr(r),e={hd:[o,Ur(r)],tl:a};continue}e={hd:[o,{TAG:10,_0:i._0,_1:o}],tl:a};continue;case 5:var c=i._1;if(Vr(r),19!==Cr(r).TAG){t={hd:[c,{TAG:0,_0:c}],tl:n};continue}Vr(r);var u=Mr(r);switch(0|u.TAG){case 5:t={hd:[c,{TAG:0,_0:u._1}],tl:n};continue;case 18:t={hd:[c,{TAG:1,_0:Yr(r)}],tl:n};continue;default:throw{RE_EXN_ID:y,token:u,name:jr(r),Error:new Error}}default:return[a,n]}}}(t,0,0),a=n[1],i=n[0];if(12===Cr(t).TAG)return Vr(t),{TAG:8,loc:r,name:e,props:i,children:a};var o=Hr(t,Kr);Vr(t);var c={hd:["Children",{TAG:1,_0:o}],tl:a},u=Mr(t);if(5===u.TAG){if(e===u._1)return{TAG:8,loc:r,name:e,props:i,children:c};throw{RE_EXN_ID:y,token:u,name:jr(t),Error:new Error}}throw{RE_EXN_ID:y,token:u,name:jr(t),Error:new Error}}function Yr(r){var e=Hr(r,Kr);Vr(r);var t=Mr(r);if(18===t.TAG)return e;throw{RE_EXN_ID:y,token:t,name:jr(r),Error:new Error}}function re(r,e){var t=void 0!==r?r:void 0;return{ast:Hr(Pr(t,e),qr),name:t,isCompiledAst:"VALID_AST"}}var ee=function(r,e){var t=typeof r;if("string"===t)return re(e,r);throw{RE_EXN_ID:z,_1:t,Error:new Error}},te=function(r,e){var t=typeof r;if("string"===t)return function(r,e){var t=re(r,e);return function(r,e,n){return r(t,e,n)}}(e,r);throw{RE_EXN_ID:z,_1:t,Error:new Error}},ne=function(r){var e=function(t,n,a){Ar(t);var i={length:0,first:void 0,last:void 0};lr(i,Tr,t.ast,n,a,r,t.name,e);for(var o="";;){var c=o,u=Q(i);if(void 0===u)return c;o=c+u}};return e},ae=function(r){var e=function(t,n,a){try{Ar(t);var i={length:0,first:void 0,last:void 0};return lr(i,hr,t.ast,n,a,r,t.name,e),Promise.all((c=i,u=new Array(c.length),function(r,e,t){for(;;){var n=t,a=r;if(void 0===n)return;e[a]=n.content,t=n.next,r=a+1|0}}(0,u,c.first),u)).then(vr)}catch(r){return Promise.reject(function(r){return null!=r&&"string"==typeof r.RE_EXN_ID}(o=r)?o:{RE_EXN_ID:Y,_1:o})}var o,c,u};return e},ie=function(r){if(r.RE_EXN_ID===b)return Z("Syntax","Unexpected end of file.",r.loc,r.name);if(r.RE_EXN_ID===D)return Z("Syntax","Unterminated comment.",r.loc,r.name);if(r.RE_EXN_ID===N)return Z("Syntax","Unterminated string.",r.loc,r.name);if(r.RE_EXN_ID===I)return Z("Parse",'"'+r.identifier+'" is an illegal identifier name.',r.loc,r.name);if(r.RE_EXN_ID===R)return Z("Syntax",'Invalid character: "'+r.character+'".',r.loc,r.name);if(r.RE_EXN_ID===X){var e=r.expected,t=1===e.length?"Expected":"Expected one of",n=e.join(", ");return Z("Syntax",'Unexpected character: "'+r.character+'".\n'+t+': "'+n+'".',r.loc,r.name)}if(r.RE_EXN_ID===y){var a=r.token,i=w.toLocation(a);return Z("Parse",'Unexpected token: "'+w.toString(a)+'".',i,r.name)}if(r.RE_EXN_ID===k)return Z("Parse",'"'+r.binding+'" is a reserved name',r.loc,r.name);if(r.RE_EXN_ID===S)return Z("Parse",'Invalid statement: "'+r.statement+'".',r.loc,r.name);if(r.RE_EXN_ID===x)return Z("Parse",'Component "'+r.component+'" does not exist.',r.loc,r.name);if(r.RE_EXN_ID===B){var o=r.pattern,c=$(r.data),u=g.toLocation(o);return Z("Type","This pattern is type "+g.toString(o)+" but the data is type "+c+".",u,r.name)}if(r.RE_EXN_ID===L){var s=r.pattern,_=$(r.data),f=g.toLocation(s),E=g.toString(s);return Z("Pattern",'Type mismatch: "'+r.binding+'" is type '+E+" but the data is type "+_+".",f,r.name)}if(r.RE_EXN_ID===O)return Z("Pattern matching",'"'+r.binding+'" is bound multiple times in this pattern.',r.loc,r.name);if(r.RE_EXN_ID===P)return Z("Pattern matching","None of the patterns match the data. Consider a catch-all case to avoid this.",r.loc,r.name);if(r.RE_EXN_ID===C)return Z("Pattern Matching","The number of patterns does not match the number of data.",r.loc,r.name);if(r.RE_EXN_ID===M){var d=$(r.type_);return Z("Render",'"'+r.binding+'" is a '+d+". I can only echo strings and numbers.",r.loc,r.name)}if(r.RE_EXN_ID===V)return Z("Render",'Binding "'+r.binding+'" does not exist.',r.loc,r.name);if(r.RE_EXN_ID===j)return Z("Render",'Template child "'+r.child+'" does not exist.',r.loc,r.name);if(r.RE_EXN_ID===U){var l=$(r.type_);return Z("Type",'"'+r.binding+'" is a '+l+". I can only map arrays.",r.loc,r.name)}return r.RE_EXN_ID===z?"Input template is type "+r._1+" but must be type string.":r.RE_EXN_ID===F?"The render function didn't receive an AST. Did you forget to compile the source first?":"An unexpected error occured in a template. This is probably due to malformed input.\n\n"+String(r)};return r.compile=te,r.errorMessage=ie,r.makeAst=ee,r.renderContext=ne,r.renderContextAsync=ae,Object.defineProperty(r,"__esModule",{value:!0}),r}({});
//# sourceMappingURL=acutis.iife.min.js.map
