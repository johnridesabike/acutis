var Acutis=function(r){"use strict";var e={contents:0};function n(r){return e.contents=e.contents+1|0,r+"/"+e.contents}function t(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function a(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var e=r.BS_PRIVATE_NESTED_SOME_NONE;return 0===e?void 0:{BS_PRIVATE_NESTED_SOME_NONE:e-1|0}}function i(r,e){if(e in r)return t(r[e])}function o(r){for(var e={},n=r.length,t=0;t<n;++t){var a=r[t];e[a[0]]=a[1]}return e}function c(r,e){if(e>=0&&e<r.length)return t(r[e])}function u(r,e){for(var n,t,a=r.length,i=e<0?(n=a+e|0)>(t=0)?n:t:e,o=a-i|0,c=new Array(o),u=0;u<o;++u)c[u]=r[i+u|0];return c}function _(r,e){for(var n=0,t=r.length;n<t;++n)e(n,r[n])}function s(r,e){if(!r)return 0;var n={hd:e(r.hd),tl:0};return function(r,e,n){for(;;){var t=e,a=r;if(!a)return;var i={hd:n(a.hd),tl:0};t.tl=i,e=i,r=a.tl}}(r.tl,n,e),n}function f(r){return function(r,e){for(;;){var n=e,t=r;if(!t)return n;e={hd:t.hd,tl:n},r=t.tl}}(r,0)}function E(r,e){for(;;){var n=r;if(!n)return;e(n.hd),r=n.tl}}var d={map:function(r,e){return{_0:e(r._0),_1:s(r._1,e)}},toList:function(r){return{hd:r._0,tl:r._1}}};var A={get:i,set:function(r,e,n){r[e]=n}},l=/^[a-zA-Z0-9_]$/;var T=/^[a-z_]$/;var v=/^[A-Z]$/;function h(r){switch(r){case"false":case"null":case"true":return!0;default:return!1}}var G=/^[a-z_][a-zA-Z0-9_]*$/;var m={identifierChar:l,isEndOfIdentifier:function(r){return!l.test(r)},identifierStartChar:T,isValidIdentifierStart:function(r){return T.test(r)},componentStart:v,isValidComponentStart:function(r){return v.test(r)},isReservedKeyword:h,bindingRegEx:G,isLegalBinding:function(r){return!!G.test(r)&&!h(r)}};var p={toString:function(r){switch(0|r.TAG){case 0:return"%} "+r._1;case 2:return"{*"+r._1+"*}";case 4:case 5:return r._1;case 6:case 7:return"{{ "+r._1+" }}";case 1:case 8:return'"'+r._1+'"';case 3:case 9:return String(r._1);case 10:return",";case 11:return":";case 12:return"/";case 13:return"[";case 14:return"]";case 15:return"{";case 16:return"}";case 17:return"...";case 18:return"#";case 19:return"=";case 20:return"~";case 21:return"[end of file]"}},toLocation:function(r){return r._0}};var w={toString:function(r){switch(0|r.TAG){case 0:return"null";case 1:case 2:return"boolean";case 3:return"string";case 4:return"number";case 5:case 6:return"array";case 7:return"object";case 8:return"binding: `"+r._1+"`"}},toLocation:function(r){return 6===r.TAG?r.loc:r._0}},g=n("Debug-Acutis.UnexpectedEoF"),b=n("Debug-Acutis.UnterminatedComment"),D=n("Debug-Acutis.UnterminatedString"),N=n("Debug-Acutis.IllegalIdentifier"),I=n("Debug-Acutis.InvalidCharacter"),R=n("Debug-Acutis.UnexpectedCharacter"),X=n("Debug-Acutis.UnexpectedToken"),y=n("Debug-Acutis.IllegalBindingName"),k=n("Debug-Acutis.InvalidStatement"),S=n("Debug-Acutis.ComponentDoesNotExist"),x=n("Debug-Acutis.PatternTypeMismatch"),B=n("Debug-Acutis.BindingTypeMismatch"),L=n("Debug-Acutis.NameBoundMultipleTimes"),O=n("Debug-Acutis.NoMatchFound"),P=n("Debug-Acutis.PatternNumberMismatch"),C=n("Debug-Acutis.BadEchoType"),M=n("Debug-Acutis.BindingDoesNotExist"),V=n("Debug-Acutis.ChildDoesNotExist"),j=n("Debug-Acutis.BadMapType"),U=n("Debug-Acutis.BadInputTemplate"),z=n("Debug-Acutis.BadRenderInput");function F(r){if("number"==typeof r)switch(r){case 0:case 1:return"boolean";case 2:return"null"}else switch(0|r.TAG){case 0:return"string";case 1:return"number";case 2:return"object";case 3:return"array"}}function $(r,e,n,t){return"There's a problem with template "+(void 0!==t?t:"[no name]")+"\n\n"+r+" error at character "+String(n+1|0)+".\n  "+e+"\n"}function Z(r){var e=typeof r;return"string"===e?{TAG:0,_0:r}:"number"===e?{TAG:1,_0:r}:"boolean"===e?!0===r?1:0:null===r?2:Array.isArray(r)?{TAG:3,_0:r}:{TAG:2,_0:r}}function q(r,e){return r.TAG?{TAG:1,_0:r._0}:{TAG:0,_0:e(r._0)}}function K(r){r.length=0,r.first=void 0,r.last=void 0}function H(r,e){var n={content:e,next:void 0},t=r.last;void 0!==t?(r.length=r.length+1|0,t.next=n,r.last=n):(r.length=1,r.first=n,r.last=n)}function J(r){var e=r.first;if(void 0!==e){var n=e.next;return void 0===n?(K(r),t(e.content)):(r.length=r.length-1|0,r.first=n,t(e.content))}}function Q(r){var e=r.first;if(void 0!==e){var n=e.next;return void 0===n?(K(r),e.content):(r.length=r.length-1|0,r.first=n,e.content)}throw{RE_EXN_ID:"Not_found",Error:new Error}}function W(r){var e=new Array(r.length);return function(r,e,n){for(;;){var t=n,a=r;if(void 0===t)return;e[a]=t.content,n=t.next,r=a+1|0}}(0,e,r.first),e}var Y=n("Caml_js_exceptions.Error");function rr(r){for(var e={length:0,first:void 0,last:void 0},n=r;;){var t=n;if(!t)return{TAG:0,_0:W(e)};var a=t.hd;if(a.TAG)return a;H(e,a._0),n=t.tl}}function er(r,e){switch(0|r.TAG){case 0:return{TAG:0,_0:null};case 1:return{TAG:0,_0:!1};case 2:return{TAG:0,_0:!0};case 3:case 4:return{TAG:0,_0:r._1};case 5:return q(rr(s(r._1,(function(r){return er(r,e)}))),(function(r){return r}));case 6:var n=r.binding,i=function(r,e){if(void 0!==r)return t(e(a(r)))}(A.get(e,n),Z);if(void 0===i)return{TAG:1,_0:{TAG:1,loc:r.bindLoc,binding:n}};if("number"==typeof i)return{TAG:1,_0:{TAG:0,data:i,pattern:r,binding:n}};if(3!==i.TAG)return{TAG:1,_0:{TAG:0,data:i,pattern:r,binding:n}};var c=i._0;return q(rr(s(r.array,(function(r){return er(r,e)}))),(function(r){return function(r,e){for(var n=r.length,t=e.length,a=new Array(n+t|0),i=0;i<n;++i)a[i]=r[i];for(var o=0;o<t;++o)a[n+o|0]=e[o];return a}(r,c)}));case 7:return q(rr(s(r._1,(function(r){var n=er(r[1],e);return n.TAG?n:{TAG:0,_0:[r[0],n._0]}}))),o);case 8:var u=r._1,_=A.get(e,u);return void 0!==_?{TAG:0,_0:a(_)}:{TAG:1,_0:{TAG:1,loc:r._0,binding:u}}}}function nr(r,e,n,t){return"_"===e?{TAG:0,_0:r}:void 0!==A.get(r,e)?{TAG:1,_0:{TAG:1,loc:t,binding:e}}:(A.set(r,e,n),{TAG:0,_0:r})}function tr(r,e,n){var t=Z(e);switch(0|r.TAG){case 0:return"number"==typeof t&&t>=2?{TAG:0,_0:n}:{TAG:1,_0:0};case 1:if("number"!=typeof t)return{TAG:1,_0:{TAG:0,data:t,pattern:r}};switch(t){case 0:return{TAG:0,_0:n};case 1:case 2:return{TAG:1,_0:0}}case 2:if("number"!=typeof t)return{TAG:1,_0:{TAG:0,data:t,pattern:r}};switch(t){case 1:return{TAG:0,_0:n};case 0:case 2:return{TAG:1,_0:0}}case 3:return"number"==typeof t?2===t?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:t.TAG?{TAG:1,_0:{TAG:0,data:t,pattern:r}}:r._1===t._0?{TAG:0,_0:n}:{TAG:1,_0:0};case 4:return"number"==typeof t?2===t?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:1===t.TAG?r._1===t._0?{TAG:0,_0:n}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}};case 5:var o=r._1;return o?"number"==typeof t?2===t?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:3===t.TAG?ar(o,t._0,n,void 0):{TAG:1,_0:{TAG:0,data:t,pattern:r}}:"number"==typeof t?2===t?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:3===t.TAG?0===t._0.length?{TAG:0,_0:n}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}};case 6:return"number"==typeof t?2===t?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:3===t.TAG?ar(r.array,t._0,n,[r.bindLoc,r.binding]):{TAG:1,_0:{TAG:0,data:t,pattern:r}};case 7:var c=r._1;if(!c)return"number"==typeof t?2===t?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:2===t.TAG?0===Object.keys(t._0).length?{TAG:0,_0:n}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}};if("number"==typeof t)return 2===t?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}};if(2!==t.TAG)return{TAG:1,_0:{TAG:0,data:t,pattern:r}};for(var u=c,_=t._0;;){var s=u;if(!s)return{TAG:0,_0:n};var f=s.hd,E=i(_,f[0]);if(void 0===E)return{TAG:1,_0:0};var d=tr(f[1],a(E),n);if(d.TAG)return d;u=s.tl}case 8:return nr(n,r._1,e,r._0)}}function ar(r,e,n,t){for(var i=r,o=0;;){var _=o,s=i;if(!s)return void 0!==t?nr(n,t[1],u(e,_),t[0]):{TAG:0,_0:n};var f=c(e,_);if(void 0===f)return{TAG:1,_0:0};var E=tr(s.hd,a(f),n);if(E.TAG)return E;o=_+1|0,i=s.tl}}function ir(r,e){for(var n={},t=d.toList(r),a=d.toList(e);;){var i=a,o=t;if(!o)return i?{TAG:1,_0:1}:{TAG:0,_0:n};if(!i)return{TAG:1,_0:1};var c=tr(o.hd,i.hd,n);if(c.TAG)return c;a=i.tl,t=o.tl}}function or(r,e){for(var n=r.f,t=d.toList(r.patterns);;){var a=t;if(!a)return{TAG:1,_0:0};var i=ir(a.hd,e);if(!i.TAG)return{TAG:0,_0:n(i._0)};var o=i._0;if("number"!=typeof o)return i;if(0!==o)return i;t=a.tl}}function cr(r){for(var e=0,n="";;){var t=n,a=e,i=r.charAt(a);switch(i){case"":return t;case'"':n=t+"&quot;",e=a+1|0;continue;case"&":n=t+"&amp;",e=a+1|0;continue;case"'":n=t+"&apos;",e=a+1|0;continue;case"/":n=t+"&#x2F;",e=a+1|0;continue;case"<":n=t+"&lt;",e=a+1|0;continue;case"=":n=t+"&#x3D;",e=a+1|0;continue;case">":n=t+"&gt;",e=a+1|0;continue;case"`":n=t+"&#x60;",e=a+1|0;continue;default:n=t+i,e=a+1|0;continue}}}function ur(r,e){var n=A.get(r,e);return void 0!==n?a(n):null}function _r(r,e){var n=Z(ur(r,e));if("number"==typeof n)return{TAG:1,_0:n};switch(0|n.TAG){case 0:return{TAG:0,_0:n._0};case 1:return{TAG:0,_0:String(n._0)};default:return{TAG:1,_0:n}}}function sr(r){return function(e){return e._1?e:{_0:e._0,_1:{hd:{TAG:8,_0:r,_1:"_"},tl:0}}}}function fr(r,e,n,t){var a=function(r,e){for(var n=d.toList(r);;){var t=n;if(!t)return{TAG:1,_0:0};var a=or(t.hd,e);if(!a.TAG)return a;var i=a._0;if("number"!=typeof i)return a;if(0!==i)return a;n=t.tl}}(r,e);if(!a.TAG)return a._0;var i=a._0;if("number"==typeof i){if(0===i)throw{RE_EXN_ID:O,loc:n,name:t,Error:new Error};throw{RE_EXN_ID:P,loc:n,name:t,Error:new Error}}if(i.TAG)throw{RE_EXN_ID:L,loc:i.loc,binding:i.binding,name:t,Error:new Error};throw{RE_EXN_ID:x,data:i.data,pattern:i.pattern,name:t,Error:new Error}}function Er(r){for(var e=0;;){var n=e;switch(r.charAt(n)){case"\t":case"\n":case"\r":case" ":e=n+1|0;continue;default:return r.slice(n)}}}function dr(r){for(var e=r.length;;){var n=e;switch(r.charAt(n-1|0)){case"\t":case"\n":case"\r":case" ":e=n-1|0;continue;default:return r.slice(0,n)}}}function Ar(r,e,n,t,i,o,c,u){for(var s=n;;){var f=s;if(!f)return;var l=f.hd;switch(0|l.TAG){case 0:var T,v=l._0;switch(l._1){case 0:T=Er(v);break;case 1:T=dr(v);break;case 2:T=Er(dr(v));break;case 3:T=v}H(r,e(T)),s=f.tl;continue;case 1:var h=l._1,G=_r(t,h);if(G.TAG)throw{RE_EXN_ID:C,loc:l._0,binding:h,type_:G._0,name:c,Error:new Error};H(r,e(G._0)),s=f.tl;continue;case 2:var m=l._1,p=_r(t,m);if(p.TAG)throw{RE_EXN_ID:C,loc:l._0,binding:m,type_:p._0,name:c,Error:new Error};H(r,e(cr(p._0))),s=f.tl;continue;case 3:var w=l._1,g=A.get(i,w);if(void 0===g)throw{RE_EXN_ID:V,loc:l._0,child:w,name:c,Error:new Error};H(r,a(g)),s=f.tl;continue;case 4:H(r,e(cr(l._0))),s=f.tl;continue;case 5:H(r,e(cr(String(l._0)))),s=f.tl;continue;case 6:fr(d.map(l._2,(function(n){var a=n.ast;return{patterns:n.patterns,f:function(n){return Ar(r,e,a,Object.assign({},t,n),i,o,c,u)}}})),d.map(l._1,(function(r){return ur(t,r[1])})),l._0,c),s=f.tl;continue;case 7:var b=l._2,D=l._1,N=l._0,I=Z(ur(t,D));if("number"==typeof I)throw{RE_EXN_ID:j,loc:N,binding:D,type_:I,name:c,Error:new Error};if(3===I.TAG){_(I._0,function(n,a){return function(_,s){return fr(d.map(a,(function(a){var _=a.ast;return{patterns:d.map(a.patterns,sr(n)),f:function(n){return Ar(r,e,_,Object.assign({},t,n),i,o,c,u)}}})),{_0:s,_1:{hd:_,tl:0}},n,c)}}(N,b)),s=f.tl;continue}throw{RE_EXN_ID:j,loc:N,binding:D,type_:I,name:c,Error:new Error};case 8:var R=l.name,X=l.loc,y=A.get(o,R);if(void 0!==y){var k={},x={};E(l.children,function(r,e){return function(n){var o,_=n[1];if(_.TAG)o=u({ast:_._0,name:c,isCompiledAst:"VALID_AST"},t,i);else{var s=_._0,f=A.get(i,s);if(void 0===f)throw{RE_EXN_ID:V,loc:r,child:s,name:c,Error:new Error};o=a(f)}return A.set(e,n[0],o)}}(X,x)),E(l.props,function(r){return function(e){var n=er(e[1],t);if(!n.TAG)return A.set(r,e[0],n._0);var a=n._0;if(a.TAG)throw{RE_EXN_ID:M,loc:a.loc,binding:a.binding,name:c,Error:new Error};throw{RE_EXN_ID:B,data:a.data,pattern:a.pattern,binding:a.binding,name:c,Error:new Error}}}(k));var L=y(u,k,x);H(r,L),s=f.tl;continue}throw{RE_EXN_ID:S,loc:X,component:R,name:c,Error:new Error}}}}function lr(r){if("VALID_AST"!==r.isCompiledAst)throw{RE_EXN_ID:z,Error:new Error}}function Tr(r){return r}function vr(r){return Promise.resolve(r)}function hr(r){return Promise.resolve(r.join(""))}function Gr(r,e){return r.str.charAt(r.position+e|0)}function mr(r){return r.str.charAt(r.position)}function pr(r){r.position=r.position+1|0}function wr(r){var e=mr(r);return pr(r),e}function gr(r,e){for(var n=r.position;;){var t=n;if(e(r.str.charAt(t)))return t;n=t+1|0}}function br(r,e){r.position=gr(r,e)}function Dr(r,e){r.position=r.position+e|0}function Nr(r,e){var n=r.position,t=gr(r,e);return r.position=t,r.str.slice(n,t)}function Ir(r,e){var n=r.position;return r.position=r.position+e|0,r.str.slice(n,r.position)}function Rr(r){switch(r){case"+":case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"E":case"e":return!1;default:return!0}}function Xr(r){switch(r){case"\t":case"\n":case"\r":case" ":return!1;default:return!0}}function yr(r,e){return H(e,{TAG:0,_0:r.position,_1:function(r,e){for(;;){var n=e;switch(Gr(r,n)){case"":return Ir(r,n);case"{":switch(Gr(r,n+1|0)){case"%":case"*":case"{":return Ir(r,n);default:e=n+2|0;continue}default:e=n+1|0;continue}}}(r,0)})}function kr(r,e){for(var n=r.position,t=0,a=0;;){var i=a,o=t;switch(Gr(r,o)){case"":throw{RE_EXN_ID:b,loc:n,name:e,Error:new Error};case"*":if("}"===Gr(r,o+1|0)){if(0===i){var c=Ir(r,o);return Dr(r,2),c}a=i-1|0,t=o+2|0;continue}t=o+2|0;continue;case"{":if("*"===Gr(r,o+1|0)){a=i+1|0,t=o+2|0;continue}t=o+1|0;continue;default:t=o+1|0;continue}}}var Sr=/\\"/g;function xr(r,e){for(var n=r.position,t=0;;){var a=t;switch(Gr(r,a)){case"":throw{RE_EXN_ID:D,loc:n,name:e,Error:new Error};case'"':var i=Ir(r,a).replace(Sr,'"');return pr(r),i;case"\\":switch(Gr(r,a+1|0)){case'"':case"\\":t=a+2|0;continue;default:t=a+1|0;continue}default:t=a+1|0;continue}}}function Br(r,e){var n,t=r.position,a=Nr(r,Rr),i=(n=parseFloat(a),isNaN(n)?void 0:n);if(void 0!==i)return i;throw{RE_EXN_ID:N,loc:t,identifier:a,name:e,Error:new Error}}function Lr(r,e,n){for(var t=!0;t;){var a=r.position,i=mr(r),o=0;switch(i){case"":throw{RE_EXN_ID:g,loc:a,name:n,Error:new Error};case"\t":case"\n":case"\r":case" ":pr(r);break;case'"':pr(r),H(e,{TAG:1,_0:a,_1:xr(r,n)});break;case"#":H(e,{TAG:18,_0:a}),pr(r);break;case"%":pr(r);var c=r.position,u=wr(r);if("}"!==u)throw{RE_EXN_ID:R,loc:c,character:u,expected:["}"],name:n,Error:new Error};t=!1;break;case",":H(e,{TAG:10,_0:a}),pr(r);break;case".":var _=Ir(r,3);if("..."!==_)throw{RE_EXN_ID:R,loc:a,character:_,expected:["..."],name:n,Error:new Error};H(e,{TAG:17,_0:a});break;case"/":H(e,{TAG:12,_0:a}),pr(r);break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o=1;break;case":":H(e,{TAG:11,_0:a}),pr(r);break;case"=":H(e,{TAG:19,_0:a}),pr(r);break;case"[":H(e,{TAG:13,_0:a}),pr(r);break;case"]":H(e,{TAG:14,_0:a}),pr(r);break;case"{":H(e,{TAG:15,_0:a}),pr(r);break;case"}":H(e,{TAG:16,_0:a}),pr(r);break;case"~":pr(r),H(e,{TAG:20,_0:a});break;default:if(m.isValidIdentifierStart(i))H(e,{TAG:4,_0:a,_1:Nr(r,m.isEndOfIdentifier)});else{if(!m.isValidComponentStart(i))throw{RE_EXN_ID:I,loc:a,character:i,name:n,Error:new Error};H(e,{TAG:5,_0:a,_1:Nr(r,m.isEndOfIdentifier)})}}1===o&&H(e,{TAG:3,_0:a,_1:Br(r,n)})}}function Or(r,e){if("~"===mr(r))return H(e,{TAG:20,_0:r.position}),pr(r)}function Pr(r,e){var n={str:e,position:0},t={length:0,first:void 0,last:void 0};yr(n,t);for(var a=wr(n);""!==a;){if("{"!==a)throw{RE_EXN_ID:R,loc:n.position,character:a,expected:["{","[end of file]"],name:r,Error:new Error};var i=wr(n);switch(i){case"%":Lr(n,t,r),yr(n,t);break;case"*":H(t,{TAG:2,_0:n.position,_1:kr(n,r)}),yr(n,t);break;case"{":Or(n,t),br(n,Xr);var o=mr(n),c=0;switch(o){case'"':var u=n.position;pr(n),H(t,{TAG:8,_0:u,_1:xr(n,r)});break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=1;break;default:if(m.isValidIdentifierStart(o)){H(t,{TAG:6,_0:n.position,_1:Nr(n,m.isEndOfIdentifier)})}else{if(!m.isValidComponentStart(o))throw{RE_EXN_ID:I,loc:n.position,character:o,name:r,Error:new Error};H(t,{TAG:7,_0:n.position,_1:Nr(n,m.isEndOfIdentifier)})}}if(1===c)H(t,{TAG:9,_0:n.position,_1:Br(n,r)});br(n,Xr),Or(n,t);var _=Ir(n,2);if("}}"!==_)throw{RE_EXN_ID:R,loc:n.position,character:_,expected:["}}"],name:r,Error:new Error};yr(n,t);break;default:throw{RE_EXN_ID:R,loc:n.position,character:i,expected:["{","%","*"],name:r,Error:new Error}}a=wr(n)}return H(t,{TAG:21,_0:n.position}),{tokens:t,name:r}}function Cr(r){return function(r){var e=r.first;if(void 0!==e)return e.content;throw{RE_EXN_ID:"Not_found",Error:new Error}}(r.tokens)}function Mr(r){return Q(r.tokens)}function Vr(r){Q(r.tokens)}function jr(r){return r.name}function Ur(r){var e=Mr(r);switch(0|e.TAG){case 1:return{TAG:3,_0:e._0,_1:e._1};case 3:return{TAG:4,_0:e._0,_1:e._1};case 4:var n=e._1,t=e._0;switch(n){case"false":return{TAG:1,_0:t};case"null":return{TAG:0,_0:t};case"true":return{TAG:2,_0:t};default:return{TAG:8,_0:t,_1:n}}case 13:var a=e._0;if(14===Cr(r).TAG)return Vr(r),{TAG:5,_0:a,_1:0};for(var i={hd:Ur(r),tl:0};;){var o=i,c=Mr(r);switch(0|c.TAG){case 10:var u=Cr(r);switch(0|u.TAG){case 1:case 3:case 4:case 13:case 15:break;case 17:Vr(r);var _=Mr(r);if(4===_.TAG){var s={TAG:6,loc:a,array:f(o),bindLoc:_._0,binding:_._1},E=Mr(r);if(14===E.TAG)return s;throw{RE_EXN_ID:X,token:E,name:jr(r),Error:new Error}}throw{RE_EXN_ID:X,token:_,name:jr(r),Error:new Error};default:throw{RE_EXN_ID:X,token:u,name:jr(r),Error:new Error}}i={hd:Ur(r),tl:o};continue;case 14:return{TAG:5,_0:a,_1:f(o)};default:throw{RE_EXN_ID:X,token:c,name:jr(r),Error:new Error}}}case 15:var d=e._0;if(16===Cr(r).TAG)return Vr(r),{TAG:7,_0:d,_1:0};for(var A={hd:zr(r),tl:0};;){var l=A,T=Mr(r);switch(0|T.TAG){case 10:A={hd:zr(r),tl:l};continue;case 16:return{TAG:7,_0:d,_1:f(l)};default:throw{RE_EXN_ID:X,token:T,name:jr(r),Error:new Error}}}default:throw{RE_EXN_ID:X,token:e,name:jr(r),Error:new Error}}}function zr(r){var e=Mr(r);switch(0|e.TAG){case 1:case 4:break;default:throw{RE_EXN_ID:X,token:e,name:jr(r),Error:new Error}}var n=e._1,t=e._0;if(11===Cr(r).TAG)return Vr(r),[n,Ur(r)];if(m.isLegalBinding(n))return[n,{TAG:8,_0:t,_1:n}];throw{RE_EXN_ID:N,loc:t,identifier:n,name:jr(r),Error:new Error}}function Fr(r){for(var e=Ur(r),n=0;;){var t=n;if(10!==Cr(r).TAG)return{_0:e,_1:f(t)};Vr(r),n={hd:Ur(r),tl:t}}}function $r(r){var e=Mr(r);if(4===e.TAG){var n=e._1,t=e._0;if(m.isLegalBinding(n))for(var a=0;;){var i=a;if(10!==Cr(r).TAG)return{_0:[t,n],_1:f(i)};Vr(r);var o=Mr(r);if(4===o.TAG){var c=o._1,u=o._0;if(m.isLegalBinding(c)){a={hd:[u,c],tl:i};continue}throw{RE_EXN_ID:y,loc:u,binding:c,name:jr(r),Error:new Error}}throw{RE_EXN_ID:X,token:o,name:jr(r),Error:new Error}}throw{RE_EXN_ID:y,loc:t,binding:n,name:jr(r),Error:new Error}}throw{RE_EXN_ID:X,token:e,name:jr(r),Error:new Error}}function Zr(r){switch(0|r.TAG){case 4:return"with"===r._1;case 12:return!0;default:return!1}}function qr(r){return 21===r.TAG}function Kr(r){return 12===r.TAG}function Hr(r,e){for(var n=0;;){var t=n;if(e(Cr(r)))return f(t);var a=Mr(r);switch(0|a.TAG){case 0:var i=a._1;if(20===Cr(r).TAG){Vr(r),n={hd:{TAG:0,_0:i,_1:1},tl:t};continue}n={hd:{TAG:0,_0:i,_1:3},tl:t};continue;case 2:continue;case 4:var o=a._1,c=a._0;switch(o){case"map":var u,_=Mr(r);if(4!==_.TAG)throw{RE_EXN_ID:X,token:_,name:jr(r),Error:new Error};var s=_._1,E=_._0;if(!m.isLegalBinding(s))throw{RE_EXN_ID:y,loc:E,binding:s,name:jr(r),Error:new Error};u=[E,s];var d=Jr(r),A=Qr(r,"map");n={hd:{TAG:7,_0:u[0],_1:u[1],_2:{_0:d,_1:A}},tl:t};continue;case"match":n={hd:{TAG:6,_0:c,_1:$r(r),_2:{_0:Jr(r),_1:Qr(r,"match")}},tl:t};continue;case"raw":var l=Mr(r);if(4===l.TAG){var T=l._1,v=l._0;if(m.isLegalBinding(T)){n={hd:{TAG:1,_0:v,_1:T},tl:t};continue}throw{RE_EXN_ID:y,loc:v,binding:T,name:jr(r),Error:new Error}}throw{RE_EXN_ID:X,token:l,name:jr(r),Error:new Error};default:throw{RE_EXN_ID:k,loc:c,statement:o,name:jr(r),Error:new Error}}case 5:n={hd:Wr(a._0,a._1,r),tl:t};continue;case 6:var h=a._1,G=a._0;if(m.isLegalBinding(h)){n={hd:{TAG:2,_0:G,_1:h},tl:t};continue}throw{RE_EXN_ID:y,loc:G,binding:h,name:jr(r),Error:new Error};case 7:n={hd:{TAG:3,_0:a._0,_1:a._1},tl:t};continue;case 8:n={hd:{TAG:4,_0:a._1},tl:t};continue;case 9:n={hd:{TAG:5,_0:a._1},tl:t};continue;case 20:var p=Mr(r);if(p.TAG)throw{RE_EXN_ID:X,token:p,name:jr(r),Error:new Error};var w=p._1;if(20===Cr(r).TAG){Vr(r),n={hd:{TAG:0,_0:w,_1:2},tl:t};continue}n={hd:{TAG:0,_0:w,_1:0},tl:t};continue;default:throw{RE_EXN_ID:X,token:a,name:jr(r),Error:new Error}}}}function Jr(r){return{patterns:function(r){var e=Mr(r);if(4!==e.TAG)throw{RE_EXN_ID:X,token:e,name:jr(r),Error:new Error};if("with"!==e._1)throw{RE_EXN_ID:X,token:e,name:jr(r),Error:new Error};for(var n=Fr(r),t=0;;){var a=t,i=Cr(r);if(4!==i.TAG)return{_0:n,_1:f(a)};if("with"!==i._1)return{_0:n,_1:f(a)};Vr(r),t={hd:Fr(r),tl:a}}}(r),ast:Hr(r,Zr)}}function Qr(r,e){for(var n=0;;){var t=n;if(12===Cr(r).TAG){Vr(r);var a=Mr(r);if(4===a.TAG){if(a._1===e)return f(t);throw{RE_EXN_ID:X,token:a,name:jr(r),Error:new Error}}throw{RE_EXN_ID:X,token:a,name:jr(r),Error:new Error}}n={hd:Jr(r),tl:t}}}function Wr(r,e,n){var t=function(r,e,n){for(;;){var t=n,a=e,i=Cr(r);switch(0|i.TAG){case 4:var o=i._1;if(Vr(r),19===Cr(r).TAG){Vr(r),e={hd:[o,Ur(r)],tl:a};continue}e={hd:[o,{TAG:8,_0:i._0,_1:o}],tl:a};continue;case 5:var c=i._1;if(Vr(r),19!==Cr(r).TAG){n={hd:[c,{TAG:0,_0:c}],tl:t};continue}Vr(r);var u=Mr(r);switch(0|u.TAG){case 5:n={hd:[c,{TAG:0,_0:u._1}],tl:t};continue;case 18:n={hd:[c,{TAG:1,_0:Yr(r)}],tl:t};continue;default:throw{RE_EXN_ID:X,token:u,name:jr(r),Error:new Error}}default:return[a,t]}}}(n,0,0),a=t[1],i=t[0];if(12===Cr(n).TAG)return Vr(n),{TAG:8,loc:r,name:e,props:i,children:a};var o=Hr(n,Kr);Vr(n);var c={hd:["Children",{TAG:1,_0:o}],tl:a},u=Mr(n);if(5===u.TAG){if(e===u._1)return{TAG:8,loc:r,name:e,props:i,children:c};throw{RE_EXN_ID:X,token:u,name:jr(n),Error:new Error}}throw{RE_EXN_ID:X,token:u,name:jr(n),Error:new Error}}function Yr(r){var e=Hr(r,Kr);Vr(r);var n=Mr(r);if(18===n.TAG)return e;throw{RE_EXN_ID:X,token:n,name:jr(r),Error:new Error}}function re(r,e){var n=void 0!==r?r:void 0;return{ast:Hr(Pr(n,e),qr),name:n,isCompiledAst:"VALID_AST"}}var ee=function(r,e){var n=typeof r;if("string"===n)return re(e,r);throw{RE_EXN_ID:U,_1:n,Error:new Error}},ne=function(r,e){var n=typeof r;if("string"===n)return function(r,e){var n=re(r,e);return function(r,e,t){return r(n,e,t)}}(e,r);throw{RE_EXN_ID:U,_1:n,Error:new Error}},te=function(r){var e=function(n,t,a){lr(n);var i={length:0,first:void 0,last:void 0};Ar(i,Tr,n.ast,t,a,r,n.name,e);for(var o="";;){var c=o,u=J(i);if(void 0===u)return c;o=c+u}};return e},ae=function(r){var e=function(n,t,a){try{lr(n);var i={length:0,first:void 0,last:void 0};return Ar(i,vr,n.ast,t,a,r,n.name,e),Promise.all(W(i)).then(hr)}catch(r){return Promise.reject(function(r){return null!=r&&"string"==typeof r.RE_EXN_ID}(o=r)?o:{RE_EXN_ID:Y,_1:o})}var o};return e},ie=function(r){if(r.RE_EXN_ID===g)return $("Syntax","Unexpected end of file.",r.loc,r.name);if(r.RE_EXN_ID===b)return $("Syntax","Unterminated comment.",r.loc,r.name);if(r.RE_EXN_ID===D)return $("Syntax","Unterminated string.",r.loc,r.name);if(r.RE_EXN_ID===N)return $("Parse",'"'+r.identifier+'" is an illegal identifier name.',r.loc,r.name);if(r.RE_EXN_ID===I)return $("Syntax",'Invalid character: "'+r.character+'".',r.loc,r.name);if(r.RE_EXN_ID===R){var e=r.expected,n=1===e.length?"Expected":"Expected one of",t=e.join(", ");return $("Syntax",'Unexpected character: "'+r.character+'".\n'+n+': "'+t+'".',r.loc,r.name)}if(r.RE_EXN_ID===X){var a=r.token,i=p.toLocation(a);return $("Parse",'Unexpected token: "'+p.toString(a)+'".',i,r.name)}if(r.RE_EXN_ID===y)return $("Parse",'"'+r.binding+'" is a reserved name',r.loc,r.name);if(r.RE_EXN_ID===k)return $("Parse",'Invalid statement: "'+r.statement+'".',r.loc,r.name);if(r.RE_EXN_ID===S)return $("Parse",'Component "'+r.component+'" does not exist.',r.loc,r.name);if(r.RE_EXN_ID===x){var o=r.pattern,c=F(r.data),u=w.toLocation(o);return $("Type","This pattern is type "+w.toString(o)+" but the data is type "+c+".",u,r.name)}if(r.RE_EXN_ID===B){var _=r.pattern,s=F(r.data),f=w.toLocation(_),E=w.toString(_);return $("Pattern",'Type mismatch: "'+r.binding+'" is type '+E+" but the data is type "+s+".",f,r.name)}if(r.RE_EXN_ID===L)return $("Pattern matching",'"'+r.binding+'" is bound multiple times in this pattern.',r.loc,r.name);if(r.RE_EXN_ID===O)return $("Pattern matching","None of the patterns match the data. Consider a catch-all case to avoid this.",r.loc,r.name);if(r.RE_EXN_ID===P)return $("Pattern Matching","The number of patterns does not match the number of data.",r.loc,r.name);if(r.RE_EXN_ID===C){var d=F(r.type_);return $("Render",'"'+r.binding+'" is a '+d+". I can only echo strings and numbers.",r.loc,r.name)}if(r.RE_EXN_ID===M)return $("Render",'Binding "'+r.binding+'" does not exist.',r.loc,r.name);if(r.RE_EXN_ID===V)return $("Render",'Template child "'+r.child+'" does not exist.',r.loc,r.name);if(r.RE_EXN_ID===j){var A=F(r.type_);return $("Type",'"'+r.binding+'" is a '+A+". I can only map arrays.",r.loc,r.name)}return r.RE_EXN_ID===U?"Input template is type "+r._1+" but must be type string.":r.RE_EXN_ID===z?"The render function didn't receive an AST. Did you forget to compile the source first?":"An unexpected error occured in a template. This is probably due to malformed input.\n\n"+String(r)};return r.compile=ne,r.errorMessage=ie,r.makeAst=ee,r.renderContext=te,r.renderContextAsync=ae,Object.defineProperty(r,"__esModule",{value:!0}),r}({});
//# sourceMappingURL=acutis.iife.min.js.map
