var Acutis=function(r){"use strict";function n(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function t(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var n=r.BS_PRIVATE_NESTED_SOME_NONE;return 0===n?void 0:{BS_PRIVATE_NESTED_SOME_NONE:n-1|0}}function e(r,t){if(t>=0&&t<r.length)return n(r[t])}function o(r,n){for(var t,e,o=r.length,a=n<0?(t=o+n|0)>(e=0)?t:e:n,i=o-a|0,c=new Array(i),u=0;u<i;++u)c[u]=r[a+u|0];return c}function a(r,n){for(var t=0,e=r.length;t<e;++t)n(r[t])}function i(r,n){for(var t=0,e=r.length;t<e;++t)n(t,r[t])}function c(r,n){if(!r)return 0;var t={hd:n(r.hd),tl:0};return function(r,n,t){for(;;){var e=n,o=r;if(!o)return;var a={hd:t(o.hd),tl:0};e.tl=a,n=a,r=o.tl}}(r.tl,t,n),t}function u(r){return function(r,n){for(;;){var t=n,e=r;if(!e)return t;n={hd:e.hd,tl:t},r=e.tl}}(r,0)}function s(r,n){for(;;){var t=r;if(!t)return;n(t.hd),r=t.tl}}var _={contents:0};function f(r){return _.contents=_.contents+1|0,r+"/"+_.contents}var d={map:function(r,n){return{_0:n(r._0),_1:c(r._1,n)}},toList:function(r){return{hd:r._0,tl:r._1}}},A=/^[a-zA-Z0-9_]$/;var l=/^[a-z_]$/;var v=/^[A-Z]$/;function T(r){switch(r){case"false":case"null":case"true":return!0;default:return!1}}var E=/^[a-z_][a-zA-Z0-9_]*$/;var h={stringChar:A,isEndOfIdentifier:function(r){return!A.test(r)},stringStartChar:l,isValidIdentifierStart:function(r){return l.test(r)},componentStart:v,isValidComponentStart:function(r){return v.test(r)},isReservedKeyword:T,bindingRegEx:E,isLegalBinding:function(r){return!!E.test(r)&&!T(r)}};var G={$$location:function(r){return{character:r+1|0}},Stack:{nameToJson:function(r){if("number"==typeof r)return 0===r?"match":"map";if(0!==r.TAG)return r._0;var n=r._0;return void 0!==n?n:null}}};var p={toString:function(r){switch(0|r.TAG){case 0:return"%} "+r._1;case 2:return"{*"+r._1+"*}";case 4:case 5:return r._1;case 6:case 7:return"{{ "+r._1+" }}";case 1:case 8:return'"'+r._1+'"';case 3:case 9:return String(r._1);case 10:return",";case 11:return":";case 12:return"/";case 13:return"[";case 14:return"]";case 15:return"{";case 16:return"}";case 17:return"...";case 18:return"#";case 19:return"=";case 20:return"~";case 21:return"[end of file]"}},toLocation:function(r){return r._0}};var w={toString:function(r){switch(0|r.TAG){case 0:return"null";case 1:case 2:return"boolean";case 3:return"string";case 4:return"number";case 5:case 6:return"array";case 7:return"object";case 8:return"binding: `"+r._1+"`"}},toLocation:function(r){return 6===r.TAG?r.loc:r._0}};var m={make:function(r){return{data:r,acutis_is_valid:"ACUTIS_IS_VALID"}},validate:function(r){if("ACUTIS_IS_VALID"===r.acutis_is_valid)return n(r.data)}};function g(r){return function(r){var n=function(r){for(var n=r,t=0;;){if(!n)return t;t=t+1|0,n=n.tl}}(r),t=new Array(n);return function(r,n,t){for(;;){var e=t,o=n;if(!e)return;r[o]=e.hd,t=e.tl,n=o+1|0}}(t,0,r),t}(c(r,G.Stack.nameToJson))}var N=f("Debug-Acutis.CompileError");function b(r,n){return{message:"Unexpected end of file.",kind:"Syntax",location:G.$$location(r),path:[void 0!==n?n:null],exn:void 0}}function k(r,n){return{message:"Unterminated comment.",kind:"Syntax",location:G.$$location(r),path:[void 0!==n?n:null],exn:void 0}}function I(r,n){return{message:"Unterminated string.",kind:"Syntax",location:G.$$location(r),path:[void 0!==n?n:null],exn:void 0}}function R(r,n,t){return{message:'"'+t+'" is an illegal identifier name.',kind:"Parse",location:G.$$location(r),path:[void 0!==n?n:null],exn:void 0}}function D(r,n,t){return{message:'Invalid character: "'+t+'".',kind:"Syntax",location:G.$$location(r),path:[void 0!==n?n:null],exn:void 0}}function y(r,n,t,e){return{message:'Unexpected character: "'+t+'". '+(1===e.length?"Expected":"Expected one of")+': "'+e.join(", ")+'".',kind:"Syntax",location:G.$$location(r),path:[void 0!==n?n:null],exn:void 0}}function L(r,n){var t=G.$$location(p.toLocation(r));return{message:'Unexpected token: "'+p.toString(r)+'".',kind:"Parse",location:t,path:[void 0!==n?n:null],exn:void 0}}function S(r,n,t){return{message:'"'+t+'" is a reserved name',kind:"Parse",location:G.$$location(r),path:[void 0!==n?n:null],exn:void 0}}function x(r,n,t){return{message:'Invalid statement: "'+t+'".',kind:"Parse",location:G.$$location(r),path:[void 0!==n?n:null],exn:void 0}}function V(r){if("number"==typeof r)switch(r){case 0:case 1:return"boolean";case 2:return"null"}else switch(0|r.TAG){case 0:return"string";case 1:return"number";case 2:return"object";case 3:return"array"}}function X(r,n,t){return{message:'Component "'+n+'" does not exist.',kind:"Render",location:G.$$location(r),path:g(t),exn:void 0}}function $(r,n,t){var e=V(r);return{message:"This pattern is type "+w.toString(n)+" but the data is type "+e+".",kind:"Type",location:G.$$location(w.toLocation(n)),path:g(t),exn:void 0}}function M(r,n,t,e){var o=V(r),a=w.toLocation(n);return{message:'"'+t+'" is type '+w.toString(n)+" but the data is type "+o+".",kind:"Type",location:G.$$location(a),path:g(e),exn:void 0}}function P(r,n,t){return{message:'"'+n+'" is bound multiple times in this pattern.',kind:"Pattern",location:G.$$location(r),path:g(t),exn:void 0}}function O(r,n){return{message:"None of the patterns match the data. Consider a catch-all case to avoid this.",kind:"Pattern",location:G.$$location(r),path:g(n),exn:void 0}}function C(r,n){return{message:"The number of patterns does not match the number of data.",kind:"Pattern",location:G.$$location(r),path:g(n),exn:void 0}}function B(r,n,t,e){return{message:'"'+n+'" is type '+V(t)+". I can only echo strings and numbers.",kind:"Render",location:G.$$location(r),path:g(e),exn:void 0}}function j(r,n,t){return{message:'Binding "'+n+'" does not exist.',kind:"Render",location:G.$$location(r),path:g(t),exn:void 0}}function U(r,n,t){return{message:'Template child "'+n+'" does not exist.',kind:"Render",location:G.$$location(r),path:g(t),exn:void 0}}function z(r,n,t,e){return{message:'"'+n+'" is a '+V(t)+". I can only map arrays.",kind:"Type",location:G.$$location(r),path:g(e),exn:void 0}}function Z(r){return{message:"A template AST was not valid. Did you forget to compile one?",kind:"Render",location:void 0,path:g(r),exn:void 0}}function F(r,t){return{message:"An exception was thrown while rendering this template. This is probably due to malformed input.",kind:"Compile",location:void 0,path:[void 0!==t?t:null],exn:n(r)}}function J(r,t){return{message:"An exception was thrown while rendering a template component.",kind:"Render",location:void 0,path:g(t),exn:n(r)}}function q(r,n){return{message:r,kind:"Render",location:void 0,path:g(n),exn:void 0}}function K(r,n){var t={content:n,next:void 0},e=r.last;void 0!==e?(r.length=r.length+1|0,e.next=t,r.last=t):(r.length=1,r.first=t,r.last=t)}function H(r){var n=r.first;if(void 0!==n){var t=n.next;return void 0===t?(function(r){r.length=0,r.first=void 0,r.last=void 0}(r),n.content):(r.length=r.length-1|0,r.first=t,n.content)}throw{RE_EXN_ID:"Not_found",Error:new Error}}function Q(r){return 0===r.length}function W(r){var n=new Array(r.length);return function(r,n,t){for(;;){var e=t,o=r;if(void 0===e)return;n[o]=e.content,t=e.next,r=o+1|0}}(0,n,r.first),n}function Y(r,n){return r.str.charAt(r.position+n|0)}function rr(r){return r.str.charAt(r.position)}function nr(r){r.position=r.position+1|0}function tr(r){var n=rr(r);return nr(r),n}function er(r,n){for(var t=r.position;;){var e=t;if(n(r.str.charAt(e)))return e;t=e+1|0}}function or(r,n){r.position=er(r,n)}function ar(r,n){r.position=r.position+n|0}function ir(r,n){var t=r.position,e=er(r,n);return r.position=e,r.str.slice(t,e)}function cr(r,n){var t=r.position;return r.position=r.position+n|0,r.str.slice(t,r.position)}function ur(r){switch(r){case"+":case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"E":case"e":return!1;default:return!0}}function sr(r){switch(r){case"\t":case"\n":case"\r":case" ":return!1;default:return!0}}function _r(r,n){return K(n,{TAG:0,_0:r.position,_1:function(r,n){for(;;){var t=n;switch(Y(r,t)){case"":return cr(r,t);case"{":switch(Y(r,t+1|0)){case"%":case"*":case"{":return cr(r,t);default:n=t+2|0;continue}default:n=t+1|0;continue}}}(r,0)})}function fr(r,n){for(var t=r.position,e=0,o=0;;){var a=o,i=e;switch(Y(r,i)){case"":throw{RE_EXN_ID:N,_1:k(t,n),Error:new Error};case"*":if("}"===Y(r,i+1|0)){if(0===a){var c=cr(r,i);return ar(r,2),c}o=a-1|0,e=i+2|0;continue}e=i+2|0;continue;case"{":if("*"===Y(r,i+1|0)){o=a+1|0,e=i+2|0;continue}e=i+1|0;continue;default:e=i+1|0;continue}}}var dr=/\\"/g;function Ar(r,n){for(var t=r.position,e=0;;){var o=e;switch(Y(r,o)){case"":throw{RE_EXN_ID:N,_1:I(t,n),Error:new Error};case'"':var a=cr(r,o).replace(dr,'"');return nr(r),a;case"\\":switch(Y(r,o+1|0)){case'"':case"\\":e=o+2|0;continue;default:e=o+1|0;continue}default:e=o+1|0;continue}}}function lr(r,n){var t,e=r.position,o=ir(r,ur),a=(t=parseFloat(o),isNaN(t)?void 0:t);if(void 0!==a)return a;throw{RE_EXN_ID:N,_1:R(e,n,o),Error:new Error}}function vr(r,n,t){for(var e=!0;e;){var o=r.position,a=rr(r),i=0;switch(a){case"":throw{RE_EXN_ID:N,_1:b(o,t),Error:new Error};case"\t":case"\n":case"\r":case" ":nr(r);break;case'"':nr(r),K(n,{TAG:1,_0:o,_1:Ar(r,t)});break;case"#":K(n,{TAG:18,_0:o}),nr(r);break;case"%":nr(r);var c=r.position,u=tr(r);if("}"!==u)throw{RE_EXN_ID:N,_1:y(c,t,u,["}"]),Error:new Error};e=!1;break;case",":K(n,{TAG:10,_0:o}),nr(r);break;case".":var s=cr(r,3);if("..."!==s)throw{RE_EXN_ID:N,_1:y(o,t,s,["..."]),Error:new Error};K(n,{TAG:17,_0:o});break;case"/":K(n,{TAG:12,_0:o}),nr(r);break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i=1;break;case":":K(n,{TAG:11,_0:o}),nr(r);break;case"=":K(n,{TAG:19,_0:o}),nr(r);break;case"[":K(n,{TAG:13,_0:o}),nr(r);break;case"]":K(n,{TAG:14,_0:o}),nr(r);break;case"{":K(n,{TAG:15,_0:o}),nr(r);break;case"}":K(n,{TAG:16,_0:o}),nr(r);break;case"~":nr(r),K(n,{TAG:20,_0:o});break;default:if(h.isValidIdentifierStart(a))K(n,{TAG:4,_0:o,_1:ir(r,h.isEndOfIdentifier)});else{if(!h.isValidComponentStart(a))throw{RE_EXN_ID:N,_1:D(o,t,a),Error:new Error};K(n,{TAG:5,_0:o,_1:ir(r,h.isEndOfIdentifier)})}}1===i&&K(n,{TAG:3,_0:o,_1:lr(r,t)})}}function Tr(r,n){if("~"===rr(r))return K(n,{TAG:20,_0:r.position}),nr(r)}function Er(r,n){var t={str:n,position:0},e={length:0,first:void 0,last:void 0};_r(t,e);for(var o=tr(t);""!==o;){if("{"!==o)throw{RE_EXN_ID:N,_1:y(t.position,r,o,["{","[end of file]"]),Error:new Error};var a=tr(t);switch(a){case"%":vr(t,e,r),_r(t,e);break;case"*":K(e,{TAG:2,_0:t.position,_1:fr(t,r)}),_r(t,e);break;case"{":Tr(t,e),or(t,sr);var i=rr(t),c=0;switch(i){case'"':var u=t.position;nr(t),K(e,{TAG:8,_0:u,_1:Ar(t,r)});break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=1;break;default:if(h.isValidIdentifierStart(i)){K(e,{TAG:6,_0:t.position,_1:ir(t,h.isEndOfIdentifier)})}else{if(!h.isValidComponentStart(i))throw{RE_EXN_ID:N,_1:D(t.position,r,i),Error:new Error};K(e,{TAG:7,_0:t.position,_1:ir(t,h.isEndOfIdentifier)})}}if(1===c)K(e,{TAG:9,_0:t.position,_1:lr(t,r)});or(t,sr),Tr(t,e);var s=cr(t,2);if("}}"!==s)throw{RE_EXN_ID:N,_1:y(t.position,r,s,["}}"]),Error:new Error};_r(t,e);break;default:throw{RE_EXN_ID:N,_1:y(t.position,r,a,["{","%","*"]),Error:new Error}}o=tr(t)}return K(e,{TAG:21,_0:t.position}),{tokens:e,name:r}}function hr(r){return function(r){var n=r.first;if(void 0!==n)return n.content;throw{RE_EXN_ID:"Not_found",Error:new Error}}(r.tokens)}function Gr(r){return H(r.tokens)}function pr(r){H(r.tokens)}function wr(r){return r.name}var mr=f("Caml_js_exceptions.Error");function gr(r){return function(r){return null!=r&&"string"==typeof r.RE_EXN_ID}(r)?r:{RE_EXN_ID:mr,_1:r}}function Nr(r){var n=Gr(r);switch(0|n.TAG){case 1:return{TAG:3,_0:n._0,_1:n._1};case 3:return{TAG:4,_0:n._0,_1:n._1};case 4:var t=n._1,e=n._0;switch(t){case"false":return{TAG:1,_0:e};case"null":return{TAG:0,_0:e};case"true":return{TAG:2,_0:e};default:return{TAG:8,_0:e,_1:t}}case 13:var o=n._0;if(14===hr(r).TAG)return pr(r),{TAG:5,_0:o,_1:0};for(var a={hd:Nr(r),tl:0};;){var i=a,c=Gr(r);switch(0|c.TAG){case 10:var s=hr(r);switch(0|s.TAG){case 1:case 3:case 4:case 13:case 15:break;case 17:pr(r);var _=Gr(r);if(4===_.TAG){var f={TAG:6,loc:o,array:u(i),bindLoc:_._0,binding:_._1},d=Gr(r);if(14===d.TAG)return f;throw{RE_EXN_ID:N,_1:L(d,wr(r)),Error:new Error}}throw{RE_EXN_ID:N,_1:L(_,wr(r)),Error:new Error};default:throw{RE_EXN_ID:N,_1:L(s,wr(r)),Error:new Error}}a={hd:Nr(r),tl:i};continue;case 14:return{TAG:5,_0:o,_1:u(i)};default:throw{RE_EXN_ID:N,_1:L(c,wr(r)),Error:new Error}}}case 15:var A=n._0;if(16===hr(r).TAG)return pr(r),{TAG:7,_0:A,_1:0};for(var l={hd:br(r),tl:0};;){var v=l,T=Gr(r);switch(0|T.TAG){case 10:l={hd:br(r),tl:v};continue;case 16:return{TAG:7,_0:A,_1:u(v)};default:throw{RE_EXN_ID:N,_1:L(T,wr(r)),Error:new Error}}}default:throw{RE_EXN_ID:N,_1:L(n,wr(r)),Error:new Error}}}function br(r){var n=Gr(r);switch(0|n.TAG){case 1:case 4:break;default:throw{RE_EXN_ID:N,_1:L(n,wr(r)),Error:new Error}}var t=n._1,e=n._0;if(11===hr(r).TAG)return pr(r),[t,Nr(r)];if(h.isLegalBinding(t))return[t,{TAG:8,_0:e,_1:t}];throw{RE_EXN_ID:N,_1:R(e,wr(r),t),Error:new Error}}function kr(r){for(var n=Nr(r),t=0;;){var e=t;if(10!==hr(r).TAG)return{_0:n,_1:u(e)};pr(r),t={hd:Nr(r),tl:e}}}function Ir(r){var n=Gr(r);if(4===n.TAG){var t=n._1,e=n._0;if(h.isLegalBinding(t))for(var o=0;;){var a=o;if(10!==hr(r).TAG)return{_0:[e,t],_1:u(a)};pr(r);var i=Gr(r);if(4===i.TAG){var c=i._1,s=i._0;if(h.isLegalBinding(c)){o={hd:[s,c],tl:a};continue}throw{RE_EXN_ID:N,_1:S(s,wr(r),c),Error:new Error}}throw{RE_EXN_ID:N,_1:L(i,wr(r)),Error:new Error}}throw{RE_EXN_ID:N,_1:S(e,wr(r),t),Error:new Error}}throw{RE_EXN_ID:N,_1:L(n,wr(r)),Error:new Error}}function Rr(r){switch(0|r.TAG){case 4:return"with"===r._1;case 12:return!0;default:return!1}}function Dr(r){return 21===r.TAG}function yr(r){return 12===r.TAG}function Lr(r,n){for(var t=0;;){var e=t;if(n(hr(r)))return u(e);var o=Gr(r);switch(0|o.TAG){case 0:var a=o._1;if(20===hr(r).TAG){pr(r),t={hd:{TAG:0,_0:a,_1:1},tl:e};continue}t={hd:{TAG:0,_0:a,_1:3},tl:e};continue;case 2:continue;case 4:var i=o._1,c=o._0;switch(i){case"map":var s,_=Gr(r);if(4!==_.TAG)throw{RE_EXN_ID:N,_1:L(_,wr(r)),Error:new Error};var f=_._1,d=_._0;if(!h.isLegalBinding(f))throw{RE_EXN_ID:N,_1:S(d,wr(r),f),Error:new Error};s=[d,f];var A=Sr(r),l=xr(r,"map");t={hd:{TAG:7,_0:s[0],_1:s[1],_2:{_0:A,_1:l}},tl:e};continue;case"match":t={hd:{TAG:6,_0:c,_1:Ir(r),_2:{_0:Sr(r),_1:xr(r,"match")}},tl:e};continue;case"raw":var v=Gr(r);if(4===v.TAG){var T=v._1,E=v._0;if(h.isLegalBinding(T)){t={hd:{TAG:1,_0:E,_1:T},tl:e};continue}throw{RE_EXN_ID:N,_1:S(E,wr(r),T),Error:new Error}}throw{RE_EXN_ID:N,_1:L(v,wr(r)),Error:new Error};default:throw{RE_EXN_ID:N,_1:x(c,wr(r),i),Error:new Error}}case 5:t={hd:Vr(o._0,o._1,r),tl:e};continue;case 6:var G=o._1,p=o._0;if(h.isLegalBinding(G)){t={hd:{TAG:2,_0:p,_1:G},tl:e};continue}throw{RE_EXN_ID:N,_1:S(p,wr(r),G),Error:new Error};case 7:t={hd:{TAG:3,_0:o._0,_1:o._1},tl:e};continue;case 8:t={hd:{TAG:4,_0:o._1},tl:e};continue;case 9:t={hd:{TAG:5,_0:o._1},tl:e};continue;case 20:var w=Gr(r);if(0===w.TAG){var m=w._1;if(20===hr(r).TAG){pr(r),t={hd:{TAG:0,_0:m,_1:2},tl:e};continue}t={hd:{TAG:0,_0:m,_1:0},tl:e};continue}throw{RE_EXN_ID:N,_1:L(w,wr(r)),Error:new Error};default:throw{RE_EXN_ID:N,_1:L(o,wr(r)),Error:new Error}}}}function Sr(r){return{patterns:function(r){var n=Gr(r);if(4!==n.TAG)throw{RE_EXN_ID:N,_1:L(n,wr(r)),Error:new Error};if("with"!==n._1)throw{RE_EXN_ID:N,_1:L(n,wr(r)),Error:new Error};for(var t=kr(r),e=0;;){var o=e,a=hr(r);if(4!==a.TAG)return{_0:t,_1:u(o)};if("with"!==a._1)return{_0:t,_1:u(o)};pr(r),e={hd:kr(r),tl:o}}}(r),ast:Lr(r,Rr)}}function xr(r,n){for(var t=0;;){var e=t;if(12===hr(r).TAG){pr(r);var o=Gr(r);if(4===o.TAG){if(o._1===n)return u(e);throw{RE_EXN_ID:N,_1:L(o,wr(r)),Error:new Error}}throw{RE_EXN_ID:N,_1:L(o,wr(r)),Error:new Error}}t={hd:Sr(r),tl:e}}}function Vr(r,n,t){var e=function(r,n,t){for(;;){var e=t,o=n,a=hr(r);switch(0|a.TAG){case 4:var i=a._1;if(pr(r),19===hr(r).TAG){pr(r),n={hd:[i,Nr(r)],tl:o};continue}n={hd:[i,{TAG:8,_0:a._0,_1:i}],tl:o};continue;case 5:var c=a._1;if(pr(r),19!==hr(r).TAG){t={hd:[c,{TAG:0,_0:c}],tl:e};continue}pr(r);var u=Gr(r);switch(0|u.TAG){case 5:t={hd:[c,{TAG:0,_0:u._1}],tl:e};continue;case 18:t={hd:[c,{TAG:1,_0:Xr(r)}],tl:e};continue;default:throw{RE_EXN_ID:N,_1:L(u,wr(r)),Error:new Error}}default:return[o,e]}}}(t,0,0),o=e[1],a=e[0];if(12===hr(t).TAG)return pr(t),{TAG:8,loc:r,name:n,props:a,children:o};var i=Lr(t,yr);pr(t);var c={hd:["Children",{TAG:1,_0:i}],tl:o},u=Gr(t);if(5===u.TAG){if(n===u._1)return{TAG:8,loc:r,name:n,props:a,children:c};throw{RE_EXN_ID:N,_1:L(u,wr(t)),Error:new Error}}throw{RE_EXN_ID:N,_1:L(u,wr(t)),Error:new Error}}function Xr(r){var n=Lr(r,yr);pr(r);var t=Gr(r);if(18===t.TAG)return n;throw{RE_EXN_ID:N,_1:L(t,wr(r)),Error:new Error}}function $r(r,n){try{return m.make({NAME:"data",VAL:{ast:Lr(Er(r,n),Dr),name:r}})}catch(n){var t=gr(n);return t.RE_EXN_ID===N?m.make({NAME:"errors",VAL:t._1}):m.make({NAME:"errors",VAL:F(t,r)})}}function Mr(r,t){if(t in r)return n(r[t])}function Pr(r){for(var n={},t=r.length,e=0;e<t;++e){var o=r[e];n[o[0]]=o[1]}return n}function Or(r){var n=typeof r;return"string"===n?{TAG:0,_0:r}:"number"===n?{TAG:1,_0:r}:"boolean"===n?!0===r?1:0:null===r?2:Array.isArray(r)?{TAG:3,_0:r}:{TAG:2,_0:r}}function Cr(r,n){return 0===r.TAG?{TAG:0,_0:n(r._0)}:{TAG:1,_0:r._0}}function Br(r){for(var n={length:0,first:void 0,last:void 0},t=r;;){var e=t;if(!e)return{TAG:0,_0:W(n)};var o=e.hd;if(0!==o.TAG)return o;K(n,o._0),t=e.tl}}function jr(r,e){switch(0|r.TAG){case 0:return{TAG:0,_0:null};case 1:return{TAG:0,_0:!1};case 2:return{TAG:0,_0:!0};case 3:case 4:return{TAG:0,_0:r._1};case 5:return Cr(Br(c(r._1,(function(r){return jr(r,e)}))),(function(r){return r}));case 6:var o=r.binding,a=function(r,e){if(void 0!==r)return n(e(t(r)))}(Mr(e,o),Or);if(void 0===a)return{TAG:1,_0:{TAG:1,loc:r.bindLoc,binding:o}};if("number"==typeof a)return{TAG:1,_0:{TAG:0,data:a,pattern:r,binding:o}};if(3!==a.TAG)return{TAG:1,_0:{TAG:0,data:a,pattern:r,binding:o}};var i=a._0;return Cr(Br(c(r.array,(function(r){return jr(r,e)}))),(function(r){return function(r,n){for(var t=r.length,e=n.length,o=new Array(t+e|0),a=0;a<t;++a)o[a]=r[a];for(var i=0;i<e;++i)o[t+i|0]=n[i];return o}(r,i)}));case 7:return Cr(Br(c(r._1,(function(r){var n=jr(r[1],e);return 0===n.TAG?{TAG:0,_0:[r[0],n._0]}:n}))),Pr);case 8:var u=r._1,s=Mr(e,u);return void 0!==s?{TAG:0,_0:t(s)}:{TAG:1,_0:{TAG:1,loc:r._0,binding:u}}}}function Ur(r,n,t,e){return"_"===n?{TAG:0,_0:r}:void 0!==Mr(r,n)?{TAG:1,_0:{TAG:1,loc:e,binding:n}}:(r[n]=t,{TAG:0,_0:r})}function zr(r,n,e){var o=Or(n);switch(0|r.TAG){case 0:return"number"==typeof o&&o>=2?{TAG:0,_0:e}:{TAG:1,_0:0};case 1:if("number"!=typeof o)return{TAG:1,_0:{TAG:0,data:o,pattern:r}};switch(o){case 0:return{TAG:0,_0:e};case 1:case 2:return{TAG:1,_0:0}}case 2:if("number"!=typeof o)return{TAG:1,_0:{TAG:0,data:o,pattern:r}};switch(o){case 1:return{TAG:0,_0:e};case 0:case 2:return{TAG:1,_0:0}}case 3:return"number"==typeof o?2===o?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}}:0===o.TAG?r._1===o._0?{TAG:0,_0:e}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}};case 4:return"number"==typeof o?2===o?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}}:1===o.TAG?r._1===o._0?{TAG:0,_0:e}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}};case 5:var a=r._1;return a?"number"==typeof o?2===o?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}}:3===o.TAG?Zr(a,o._0,e,void 0):{TAG:1,_0:{TAG:0,data:o,pattern:r}}:"number"==typeof o?2===o?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}}:3===o.TAG?0===o._0.length?{TAG:0,_0:e}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}};case 6:return"number"==typeof o?2===o?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}}:3===o.TAG?Zr(r.array,o._0,e,[r.bindLoc,r.binding]):{TAG:1,_0:{TAG:0,data:o,pattern:r}};case 7:var i=r._1;if(!i)return"number"==typeof o?2===o?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}}:2===o.TAG?0===Object.keys(o._0).length?{TAG:0,_0:e}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}};if("number"==typeof o)return 2===o?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:o,pattern:r}};if(2!==o.TAG)return{TAG:1,_0:{TAG:0,data:o,pattern:r}};for(var c=i,u=o._0;;){var s=c;if(!s)return{TAG:0,_0:e};var _=s.hd,f=Mr(u,_[0]);if(void 0===f)return{TAG:1,_0:0};var d=zr(_[1],t(f),e);if(0!==d.TAG)return d;c=s.tl}case 8:return Ur(e,r._1,n,r._0)}}function Zr(r,n,a,i){for(var c=r,u=0;;){var s=u,_=c;if(!_)return void 0!==i?Ur(a,i[1],o(n,s),i[0]):{TAG:0,_0:a};var f=e(n,s);if(void 0===f)return{TAG:1,_0:0};var d=zr(_.hd,t(f),a);if(0!==d.TAG)return d;u=s+1|0,c=_.tl}}function Fr(r,n){for(var t={},e=d.toList(r),o=d.toList(n);;){var a=o,i=e;if(!i)return a?{TAG:1,_0:1}:{TAG:0,_0:t};if(!a)return{TAG:1,_0:1};var c=zr(i.hd,a.hd,t);if(0!==c.TAG)return c;o=a.tl,e=i.tl}}function Jr(r,n){for(var t=r.f,e=d.toList(r.patterns);;){var o=e;if(!o)return{TAG:1,_0:0};var a=Fr(o.hd,n);if(0===a.TAG)return{TAG:0,_0:t(a._0)};var i=a._0;if("number"!=typeof i)return a;if(0!==i)return a;e=o.tl}}function qr(r){for(var n=0,t="";;){var e=t,o=n,a=r.charAt(o);switch(a){case"":return e;case'"':t=e+"&quot;",n=o+1|0;continue;case"&":t=e+"&amp;",n=o+1|0;continue;case"'":t=e+"&apos;",n=o+1|0;continue;case"/":t=e+"&#x2F;",n=o+1|0;continue;case"<":t=e+"&lt;",n=o+1|0;continue;case"=":t=e+"&#x3D;",n=o+1|0;continue;case">":t=e+"&gt;",n=o+1|0;continue;case"`":t=e+"&#x60;",n=o+1|0;continue;default:t=e+a,n=o+1|0;continue}}}function Kr(r,n){var e=Mr(r,n);return void 0!==e?t(e):null}function Hr(r,n){var t=Or(Kr(r,n));if("number"==typeof t)return{TAG:1,_0:t};switch(0|t.TAG){case 0:return{TAG:0,_0:t._0};case 1:return{TAG:0,_0:String(t._0)};default:return{TAG:1,_0:t}}}function Qr(r){return function(n){return n._1?n:{_0:n._0,_1:{hd:{TAG:8,_0:r,_1:"_"},tl:0}}}}function Wr(r,n,t,e){var o=function(r,n){for(var t=d.toList(r);;){var e=t;if(!e)return{TAG:1,_0:0};var o=Jr(e.hd,n);if(0===o.TAG)return o;var a=o._0;if("number"!=typeof a)return o;if(0!==a)return o;t=e.tl}}(r,n);if(0===o.TAG)return o;var a=o._0;return"number"==typeof a?0===a?{TAG:1,_0:O(t,e)}:{TAG:1,_0:C(t,e)}:0===a.TAG?{TAG:1,_0:$(a.data,a.pattern,e)}:{TAG:1,_0:P(a.loc,a.binding,e)}}function Yr(r){for(var n=0;;){var t=n;switch(r.charAt(t)){case"\t":case"\n":case"\r":case" ":n=t+1|0;continue;default:return r.slice(t)}}}function rn(r){for(var n=r.length;;){var t=n;switch(r.charAt(t-1|0)){case"\t":case"\n":case"\r":case" ":n=t-1|0;continue;default:return r.slice(0,t)}}}function nn(r,n,e,o,a,c,u,_){for(var f=a.stack,A=a.components,l=c(a),v=r;;){var T=v;if(!T)return;var E=T.hd;switch(0|E.TAG){case 0:var h,G=E._0;switch(E._1){case 0:h=Yr(G);break;case 1:h=rn(G);break;case 2:h=Yr(rn(G));break;case 3:h=G}K(n,l.return(h)),v=T.tl;continue;case 1:var p,w=E._1,g=Hr(e,w);p=0===g.TAG?l.return(g._0):u([B(E._0,w,g._0,f)]),K(n,p),v=T.tl;continue;case 2:var N,b=E._1,k=Hr(e,b);N=0===k.TAG?l.return(qr(k._0)):u([B(E._0,b,k._0,f)]),K(n,N),v=T.tl;continue;case 3:var I=E._1,R=Mr(o,I),D=void 0!==R?t(R):u([U(E._0,I,f)]);K(n,D),v=T.tl;continue;case 4:K(n,l.return(qr(E._0))),v=T.tl;continue;case 5:K(n,l.return(qr(String(E._0)))),v=T.tl;continue;case 6:var y=Wr(d.map(E._2,(function(r){var t=r.ast;return{patterns:r.patterns,f:function(r){return nn(t,n,Object.assign({},e,r),o,{components:a.components,stack:{hd:0,tl:f}},c,u,_)}}})),d.map(E._1,(function(r){return Kr(e,r[1])})),E._0,f);0!==y.TAG&&K(n,u([y._0])),v=T.tl;continue;case 7:var L=E._2,S=E._1,x=E._0,V=Or(Kr(e,S)),$=0;"number"==typeof V||3!==V.TAG?$=1:i(V._0,function(r,t){return function(i,s){var A=Wr(d.map(t,(function(t){var s=t.ast;return{patterns:d.map(t.patterns,Qr(r)),f:function(r){return nn(s,n,Object.assign({},e,r),o,{components:a.components,stack:{hd:{TAG:1,_0:i},tl:{hd:1,tl:f}}},c,u,_)}}})),{_0:s,_1:{hd:i,tl:0}},r,f);return 0===A.TAG?void 0:K(n,u([A._0]))}}(x,L)),1===$&&K(n,u([z(x,S,V,f)])),v=T.tl;continue;case 8:var P=E.name,O=E.loc,C=Mr(A,P);if(void 0!==C){var Z={},F={},q={length:0,first:void 0,last:void 0};s(E.children,function(r,n,a,i){return function(c){var u=c[1],s=c[0];if(0===u.TAG){var _=u._0,d=Mr(o,_);return void 0!==d?void(a[s]=t(d)):K(i,U(r,_,f))}var A=l.render(m.make({NAME:"data",VAL:{ast:u._0,name:"section: "+n+"#"+s}}),e,o);a[s]=A}}(O,P,F,q)),s(E.props,function(r,n){return function(t){var o=jr(t[1],e);if(0!==o.TAG){var a=o._0;return 0===a.TAG?K(n,M(a.data,a.pattern,a.binding,f)):K(n,j(a.loc,a.binding,f))}r[t[0]]=o._0}}(Z,q)),Q(q)?K(n,_(function(r,n,t){return function(){return t(l,r,n)}}(Z,F,C),(function(r){return u([J(r,f)])}))):K(n,u(W(q)))}else K(n,u([X(O,P,f)]));v=T.tl;continue}}}function tn(r){return Promise.resolve({NAME:"data",VAL:r})}function en(r){return Promise.resolve({NAME:"errors",VAL:r})}function on(r,n){return r().catch((function(r){return n(r)}))}function an(r,n){return r.then((function(r){return"errors"===r.NAME?Promise.resolve(r):Promise.resolve({NAME:"data",VAL:n(r.VAL)})}))}function cn(r,n){return r.then((function(r){return"errors"===r.NAME?Promise.resolve(r):n(r.VAL)}))}function un(r){var n={contents:""},t={length:0,first:void 0,last:void 0};return a(r,(function(r){return"errors"===r.NAME?a(r.VAL,(function(r){return K(t,r)})):void(n.contents=n.contents+r.VAL)})),Q(t)?Promise.resolve({NAME:"data",VAL:n.contents}):Promise.resolve({NAME:"errors",VAL:W(t)})}function sn(r){var n=r.stack,t=r.components;return{render:function(r,e,o){var a=m.validate(r);if(void 0===a)return Promise.resolve({NAME:"errors",VAL:[Z(n)]});if("errors"===a.NAME)return Promise.resolve({NAME:"errors",VAL:[a.VAL]});var i=a.VAL,c={length:0,first:void 0,last:void 0};return nn(i.ast,c,e,o,{components:t,stack:{hd:{TAG:0,_0:i.name},tl:n}},sn,en,on),Promise.all(W(c)).then(un)},return:tn,error:function(r){return Promise.resolve({NAME:"errors",VAL:[q(r,n)]})},mapChild:an,flatMapChild:cn}}function _n(r){return{NAME:"data",VAL:r}}function fn(r){return{NAME:"errors",VAL:r}}function dn(r,n){try{return r()}catch(r){return n(gr(r))}}function An(r,n){return"errors"===r.NAME?r:{NAME:"data",VAL:n(r.VAL)}}function ln(r,n){return"errors"===r.NAME?r:n(r.VAL)}function vn(r){var n=r.stack,t=r.components;return{render:function(r,e,o){var i=m.validate(r);if(void 0===i)return{NAME:"errors",VAL:[Z(n)]};if("errors"===i.NAME)return{NAME:"errors",VAL:[i.VAL]};var c=i.VAL,u={length:0,first:void 0,last:void 0};nn(c.ast,u,e,o,{components:t,stack:{hd:{TAG:0,_0:c.name},tl:n}},vn,fn,dn);var s={contents:""},_={length:0,first:void 0,last:void 0};return function(r,n){for(var t=r.first;;){var e=t;if(void 0===e)return;n(e.content),t=e.next}}(u,(function(r){return"errors"===r.NAME?a(r.VAL,(function(r){return K(_,r)})):void(s.contents=s.contents+r.VAL)})),Q(_)?{NAME:"data",VAL:s.contents}:{NAME:"errors",VAL:W(_)}},return:_n,error:function(r){return{NAME:"errors",VAL:[q(r,n)]}},mapChild:An,flatMapChild:ln}}var Tn={make:function(r){return sn({components:r,stack:0})}},En={makeAst:function(r,n){return $r(n,r)},make:function(r,n){return function(r,n){var t=$r(r,n);return function(r,n,e){return r.render(t,n,e)}}(n,r)}},hn=Object.freeze({__proto__:null,Async:Tn,make:function(r){return vn({components:r,stack:0})}});return r.Compile=En,r.Environment=hn,Object.defineProperty(r,"__esModule",{value:!0}),r}({});
//# sourceMappingURL=acutis.iife.min.js.map
