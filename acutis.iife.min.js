var Acutis=function(r){"use strict";function t(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function n(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var t=r.BS_PRIVATE_NESTED_SOME_NONE;return 0===t?void 0:{BS_PRIVATE_NESTED_SOME_NONE:t-1|0}}function e(r,n){if(n in r)return t(r[n])}function a(r){for(var t={},n=r.length,e=0;e<n;++e){var a=r[e];t[a[0]]=a[1]}return t}function o(r){var t=typeof r;return"string"===t?{TAG:0,_0:r}:"number"===t?{TAG:1,_0:r}:"boolean"===t?!0===r?1:0:null===r?2:Array.isArray(r)?{TAG:3,_0:r}:{TAG:2,_0:r}}function i(r,n){if(n>=0&&n<r.length)return t(r[n])}function c(r,t){for(var n,e,a=r.length,o=t<0?(n=a+t|0)>(e=0)?n:e:t,i=a-o|0,c=new Array(i),u=0;u<i;++u)c[u]=r[o+u|0];return c}function u(r,t){for(var n=0,e=r.length;n<e;++n)t(r[n])}function s(r,t){for(var n=0,e=r.length;n<e;++n)t(n,r[n])}function _(r,t){if(!r)return 0;var n={hd:t(r.hd),tl:0};return function(r,t,n){for(;;){var e=t,a=r;if(!a)return;var o={hd:n(a.hd),tl:0};e.tl=o,t=o,r=a.tl}}(r.tl,n,t),n}function f(r){return function(r,t){for(;;){var n=t,e=r;if(!e)return n;t={hd:e.hd,tl:n},r=e.tl}}(r,0)}function d(r,t){for(;;){var n=r;if(!n)return;t(n.hd),r=n.tl}}function l(r,t){return 0===r.TAG?{TAG:0,_0:t(r._0)}:{TAG:1,_0:r._0}}var A={contents:0};function v(r){return A.contents=A.contents+1|0,r+"/"+A.contents}var T={map:function(r,t){return{_0:t(r._0),_1:_(r._1,t)}},toList:function(r){return{hd:r._0,tl:r._1}}},G=/^[a-zA-Z0-9_]$/;var E=/^[a-z_]$/;var h=/^[A-Z]$/;function p(r){switch(r){case"false":case"null":case"true":return!0;default:return!1}}var w=/^[a-z_][a-zA-Z0-9_]*$/;var m={stringChar:G,isEndOfIdentifier:function(r){return!G.test(r)},stringStartChar:E,isValidIdentifierStart:function(r){return E.test(r)},componentStart:h,isValidComponentStart:function(r){return h.test(r)},isReservedKeyword:p,bindingRegEx:w,isLegalBinding:function(r){return!!w.test(r)&&!p(r)}};var g={$$location:function(r){return{character:r+1|0}}};var b={toString:function(r){switch(0|r.TAG){case 0:return"%} "+r._1;case 2:return"{*"+r._1+"*}";case 4:case 5:return r._1;case 6:case 7:return"{{ "+r._1+" }}";case 1:case 8:return'"'+r._1+'"';case 3:case 9:return String(r._1);case 10:return",";case 11:return":";case 12:return"/";case 13:return"[";case 14:return"]";case 15:return"{";case 16:return"}";case 17:return"...";case 18:return"#";case 19:return"=";case 20:return"~";case 21:return"[end of file]"}},toLocation:function(r){return r._0}};var N={toString:function(r){switch(0|r.TAG){case 0:return"null";case 1:case 2:return"boolean";case 3:return"string";case 4:return"number";case 5:case 6:return"array";case 7:return"object";case 8:return"binding: `"+r._1+"`"}},toLocation:function(r){return 6===r.TAG?r.loc:r._0}};var I={make:function(r){return{data:r,acutis_is_valid:"ACUTIS_IS_VALID"}},validate:function(r){if("ACUTIS_IS_VALID"===r.acutis_is_valid)return t(r.data)}},R=v("Debug-Acutis.CompileError");function k(r,t){return{message:"Unexpected end of file.",kind:"Syntax",location:g.$$location(r),template:t,exn:void 0}}function D(r,t){return{message:"Unterminated comment.",kind:"Syntax",location:g.$$location(r),template:t,exn:void 0}}function y(r,t){return{message:"Unterminated string.",kind:"Syntax",location:g.$$location(r),template:t,exn:void 0}}function x(r,t,n){return{message:'"'+n+'" is an illegal identifier name.',kind:"Parse",location:g.$$location(r),template:t,exn:void 0}}function S(r,t,n){return{message:'Invalid character: "'+n+'".',kind:"Syntax",location:g.$$location(r),template:t,exn:void 0}}function X(r,t,n,e){return{message:'Unexpected character: "'+n+'". '+(1===e.length?"Expected":"Expected one of")+': "'+e.join(", ")+'".',kind:"Syntax",location:g.$$location(r),template:t,exn:void 0}}function $(r,t){var n=g.$$location(b.toLocation(r));return{message:'Unexpected token: "'+b.toString(r)+'".',kind:"Parse",location:n,template:t,exn:void 0}}function O(r,t,n){return{message:'"'+n+'" is a reserved name',kind:"Parse",location:g.$$location(r),template:t,exn:void 0}}function L(r,t,n){return{message:'Invalid statement: "'+n+'".',kind:"Parse",location:g.$$location(r),template:t,exn:void 0}}function P(r){if("number"==typeof r)switch(r){case 0:case 1:return"boolean";case 2:return"null"}else switch(0|r.TAG){case 0:return"string";case 1:return"number";case 2:return"object";case 3:return"array"}}function B(r,t,n){return{message:'Component "'+t+'" does not exist.',kind:"Render",location:g.$$location(r),template:n,exn:void 0}}function C(r,t,n){var e=P(r);return{message:"This pattern is type "+N.toString(t)+" but the data is type "+e+".",kind:"Type",location:g.$$location(N.toLocation(t)),template:n,exn:void 0}}function V(r,t,n,e){var a=P(r),o=N.toLocation(t);return{message:'"'+n+'" is type '+N.toString(t)+" but the data is type "+a+".",kind:"Type",location:g.$$location(o),template:e,exn:void 0}}function j(r,t,n){return{message:'"'+t+'" is bound multiple times in this pattern.',kind:"Pattern",location:g.$$location(r),template:n,exn:void 0}}function M(r,t){return{message:"None of the patterns match the data. Consider a catch-all case to avoid this.",kind:"Pattern",location:g.$$location(r),template:t,exn:void 0}}function U(r,t){return{message:"The number of patterns does not match the number of data.",kind:"Pattern",location:g.$$location(r),template:t,exn:void 0}}function z(r,t,n,e){return{message:'"'+t+'" is type '+P(n)+". I can only echo strings and numbers.",kind:"Render",location:g.$$location(r),template:e,exn:void 0}}function Z(r,t,n){return{message:'Binding "'+t+'" does not exist.',kind:"Render",location:g.$$location(r),template:n,exn:void 0}}function F(r,t,n){return{message:'Template child "'+t+'" does not exist.',kind:"Render",location:g.$$location(r),template:n,exn:void 0}}function q(r,t,n,e){return{message:'"'+t+'" is a '+P(n)+". I can only map arrays.",kind:"Type",location:g.$$location(r),template:e,exn:void 0}}function K(r,t,n){return{message:"An exception was thrown while rendering this template. This is probably due to malformed input.",kind:n,location:void 0,template:t,exn:r}}function H(r,t){var n={content:t,next:void 0},e=r.last;void 0!==e?(r.length=r.length+1|0,e.next=n,r.last=n):(r.length=1,r.first=n,r.last=n)}function J(r){var t=r.first;if(void 0!==t){var n=t.next;return void 0===n?(function(r){r.length=0,r.first=void 0,r.last=void 0}(r),t.content):(r.length=r.length-1|0,r.first=n,t.content)}throw{RE_EXN_ID:"Not_found",Error:new Error}}function Q(r){return 0===r.length}function W(r){var t=new Array(r.length);return function(r,t,n){for(;;){var e=n,a=r;if(void 0===e)return;t[a]=e.content,n=e.next,r=a+1|0}}(0,t,r.first),t}var Y=v("Caml_js_exceptions.Error");function rr(r){return function(r){return null!=r&&"string"==typeof r.RE_EXN_ID}(r)?r:{RE_EXN_ID:Y,_1:r}}function tr(r){for(var t={length:0,first:void 0,last:void 0},n=r;;){var e=n;if(!e)return{TAG:0,_0:W(t)};var a=e.hd;if(0!==a.TAG)return a;H(t,a._0),n=e.tl}}function nr(r,i){switch(0|r.TAG){case 0:return{TAG:0,_0:null};case 1:return{TAG:0,_0:!1};case 2:return{TAG:0,_0:!0};case 3:case 4:return{TAG:0,_0:r._1};case 5:return l(tr(_(r._1,(function(r){return nr(r,i)}))),(function(r){return r}));case 6:var c=r.binding,u=function(r,e){if(void 0!==r)return t(e(n(r)))}(e(i,c),o);if(void 0===u)return{TAG:1,_0:{TAG:1,loc:r.bindLoc,binding:c}};if("number"==typeof u)return{TAG:1,_0:{TAG:0,data:u,pattern:r,binding:c}};if(3!==u.TAG)return{TAG:1,_0:{TAG:0,data:u,pattern:r,binding:c}};var s=u._0;return l(tr(_(r.array,(function(r){return nr(r,i)}))),(function(r){return function(r,t){for(var n=r.length,e=t.length,a=new Array(n+e|0),o=0;o<n;++o)a[o]=r[o];for(var i=0;i<e;++i)a[n+i|0]=t[i];return a}(r,s)}));case 7:return l(tr(_(r._1,(function(r){var t=nr(r[1],i);return 0===t.TAG?{TAG:0,_0:[r[0],t._0]}:t}))),a);case 8:var f=r._1,d=e(i,f);return void 0!==d?{TAG:0,_0:n(d)}:{TAG:1,_0:{TAG:1,loc:r._0,binding:f}}}}function er(r,t,n,a){return"_"===t?{TAG:0,_0:r}:void 0!==e(r,t)?{TAG:1,_0:{TAG:1,loc:a,binding:t}}:(r[t]=n,{TAG:0,_0:r})}function ar(r,t,a){var i=o(t);switch(0|r.TAG){case 0:return"number"==typeof i&&i>=2?{TAG:0,_0:a}:{TAG:1,_0:0};case 1:if("number"!=typeof i)return{TAG:1,_0:{TAG:0,data:i,pattern:r}};switch(i){case 0:return{TAG:0,_0:a};case 1:case 2:return{TAG:1,_0:0}}case 2:if("number"!=typeof i)return{TAG:1,_0:{TAG:0,data:i,pattern:r}};switch(i){case 1:return{TAG:0,_0:a};case 0:case 2:return{TAG:1,_0:0}}case 3:return"number"==typeof i?2===i?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}}:0===i.TAG?r._1===i._0?{TAG:0,_0:a}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}};case 4:return"number"==typeof i?2===i?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}}:1===i.TAG?r._1===i._0?{TAG:0,_0:a}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}};case 5:var c=r._1;return c?"number"==typeof i?2===i?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}}:3===i.TAG?or(c,i._0,a,void 0):{TAG:1,_0:{TAG:0,data:i,pattern:r}}:"number"==typeof i?2===i?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}}:3===i.TAG?0===i._0.length?{TAG:0,_0:a}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}};case 6:return"number"==typeof i?2===i?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}}:3===i.TAG?or(r.array,i._0,a,[r.bindLoc,r.binding]):{TAG:1,_0:{TAG:0,data:i,pattern:r}};case 7:var u=r._1;if(!u)return"number"==typeof i?2===i?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}}:2===i.TAG?0===Object.keys(i._0).length?{TAG:0,_0:a}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}};if("number"==typeof i)return 2===i?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:i,pattern:r}};if(2!==i.TAG)return{TAG:1,_0:{TAG:0,data:i,pattern:r}};for(var s=u,_=i._0;;){var f=s;if(!f)return{TAG:0,_0:a};var d=f.hd,l=e(_,d[0]);if(void 0===l)return{TAG:1,_0:0};var A=ar(d[1],n(l),a);if(0!==A.TAG)return A;s=f.tl}case 8:return er(a,r._1,t,r._0)}}function or(r,t,e,a){for(var o=r,u=0;;){var s=u,_=o;if(!_)return void 0!==a?er(e,a[1],c(t,s),a[0]):{TAG:0,_0:e};var f=i(t,s);if(void 0===f)return{TAG:1,_0:0};var d=ar(_.hd,n(f),e);if(0!==d.TAG)return d;u=s+1|0,o=_.tl}}function ir(r,t){for(var n={},e=T.toList(r),a=T.toList(t);;){var o=a,i=e;if(!i)return o?{TAG:1,_0:1}:{TAG:0,_0:n};if(!o)return{TAG:1,_0:1};var c=ar(i.hd,o.hd,n);if(0!==c.TAG)return c;a=o.tl,e=i.tl}}function cr(r,t){for(var n=r.f,e=T.toList(r.patterns);;){var a=e;if(!a)return{TAG:1,_0:0};var o=ir(a.hd,t);if(0===o.TAG)return{TAG:0,_0:n(o._0)};var i=o._0;if("number"!=typeof i)return o;if(0!==i)return o;e=a.tl}}function ur(r){for(var t=0,n="";;){var e=n,a=t,o=r.charAt(a);switch(o){case"":return e;case'"':n=e+"&quot;",t=a+1|0;continue;case"&":n=e+"&amp;",t=a+1|0;continue;case"'":n=e+"&apos;",t=a+1|0;continue;case"/":n=e+"&#x2F;",t=a+1|0;continue;case"<":n=e+"&lt;",t=a+1|0;continue;case"=":n=e+"&#x3D;",t=a+1|0;continue;case">":n=e+"&gt;",t=a+1|0;continue;case"`":n=e+"&#x60;",t=a+1|0;continue;default:n=e+o,t=a+1|0;continue}}}function sr(r,t){var a=e(r,t);return void 0!==a?n(a):null}function _r(r,t){var n=o(sr(r,t));if("number"==typeof n)return{TAG:1,_0:n};switch(0|n.TAG){case 0:return{TAG:0,_0:n._0};case 1:return{TAG:0,_0:String(n._0)};default:return{TAG:1,_0:n}}}function fr(r){return function(t){return t._1?t:{_0:t._0,_1:{hd:{TAG:8,_0:r,_1:"_"},tl:0}}}}function dr(r,t,n,e){var a=function(r,t){for(var n=T.toList(r);;){var e=n;if(!e)return{TAG:1,_0:0};var a=cr(e.hd,t);if(0===a.TAG)return a;var o=a._0;if("number"!=typeof o)return a;if(0!==o)return a;n=e.tl}}(r,t);if(0===a.TAG)return a;var o=a._0;return"number"==typeof o?0===o?{TAG:1,_0:M(n,e)}:{TAG:1,_0:U(n,e)}:0===o.TAG?{TAG:1,_0:C(o.data,o.pattern,e)}:{TAG:1,_0:j(o.loc,o.binding,e)}}function lr(r){for(var t=0;;){var n=t;switch(r.charAt(n)){case"\t":case"\n":case"\r":case" ":t=n+1|0;continue;default:return r.slice(n)}}}function Ar(r){for(var t=r.length;;){var n=t;switch(r.charAt(n-1|0)){case"\t":case"\n":case"\r":case" ":t=n-1|0;continue;default:return r.slice(0,n)}}}function vr(r,t,a,i,c,u,_,f,l,A){for(var v=c;;){var G=v;if(!G)return;var E=G.hd;switch(0|E.TAG){case 0:var h,p=E._0;switch(E._1){case 0:h=lr(p);break;case 1:h=Ar(p);break;case 2:h=lr(Ar(p));break;case 3:h=p}H(r,t(h)),v=G.tl;continue;case 1:var w,m=E._1,g=_r(u,m);w=0===g.TAG?t(g._0):a([z(E._0,m,g._0,l)]),H(r,w),v=G.tl;continue;case 2:var b,N=E._1,R=_r(u,N);b=0===R.TAG?t(ur(R._0)):a([z(E._0,N,R._0,l)]),H(r,b),v=G.tl;continue;case 3:var k=E._1,D=e(_,k),y=void 0!==D?n(D):a([F(E._0,k,l)]);H(r,y),v=G.tl;continue;case 4:H(r,t(ur(E._0))),v=G.tl;continue;case 5:H(r,t(ur(String(E._0)))),v=G.tl;continue;case 6:var x=dr(T.map(E._2,(function(n){var e=n.ast;return{patterns:n.patterns,f:function(n){return vr(r,t,a,i,e,Object.assign({},u,n),_,f,l,A)}}})),T.map(E._1,(function(r){return sr(u,r[1])})),E._0,l);0!==x.TAG&&H(r,a([x._0])),v=G.tl;continue;case 7:var S=E._2,X=E._1,$=E._0,O=o(sr(u,X)),L=0;"number"==typeof O||3!==O.TAG?L=1:s(O._0,function(n,e){return function(o,c){var s=dr(T.map(e,(function(e){var o=e.ast;return{patterns:T.map(e.patterns,fr(n)),f:function(n){return vr(r,t,a,i,o,Object.assign({},u,n),_,f,l,A)}}})),{_0:c,_1:{hd:o,tl:0}},n,l);return 0===s.TAG?void 0:H(r,a([s._0]))}}($,S)),1===L&&H(r,a([q($,X,O,l)])),v=G.tl;continue;case 8:var P=E.name,C=E.loc,j=e(f,P);if(void 0!==j){var M={},U={},J={length:0,first:void 0,last:void 0};d(E.children,function(r,t,a){return function(o){var i=o[1],c=o[0];if(0===i.TAG){var s=i._0,f=e(_,s);return void 0!==f?void(t[c]=n(f)):H(a,F(r,s,l))}var d=A(I.make({TAG:0,_0:{ast:i._0,name:l}}),u,_);t[c]=d}}(C,U,J)),d(E.props,function(r,t){return function(n){var e=nr(n[1],u);if(0!==e.TAG){var a=e._0;return 0===a.TAG?H(t,V(a.data,a.pattern,a.binding,l)):H(t,Z(a.loc,a.binding,l))}r[n[0]]=e._0}}(M,J)),Q(J)?H(r,i(function(r,t,n){return function(){return n(A,r,t)}}(M,U,j),function(r){return function(t){return a([K(t,r,"Render")])}}(P))):H(r,a(W(J)))}else H(r,a([B(C,P,l)]));v=G.tl;continue}}}function Tr(r){return{TAG:0,_0:r}}function Gr(r){return{TAG:1,_0:r}}function Er(r,t){try{return r()}catch(r){return t(rr(r))}}function hr(r){return Promise.resolve({TAG:0,_0:r})}function pr(r){return Promise.resolve({TAG:1,_0:r})}function wr(r,t){return r().catch((function(r){return t(r)}))}function mr(r){var t={contents:""},n={length:0,first:void 0,last:void 0};return u(r,(function(r){return 0===r.TAG?void(t.contents=t.contents+r._0):u(r._0,(function(r){return H(n,r)}))})),Q(n)?hr(t.contents):pr(W(n))}function gr(r,t){return r.str.charAt(r.position+t|0)}function br(r){return r.str.charAt(r.position)}function Nr(r){r.position=r.position+1|0}function Ir(r){var t=br(r);return Nr(r),t}function Rr(r,t){for(var n=r.position;;){var e=n;if(t(r.str.charAt(e)))return e;n=e+1|0}}function kr(r,t){r.position=Rr(r,t)}function Dr(r,t){r.position=r.position+t|0}function yr(r,t){var n=r.position,e=Rr(r,t);return r.position=e,r.str.slice(n,e)}function xr(r,t){var n=r.position;return r.position=r.position+t|0,r.str.slice(n,r.position)}function Sr(r){switch(r){case"+":case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"E":case"e":return!1;default:return!0}}function Xr(r){switch(r){case"\t":case"\n":case"\r":case" ":return!1;default:return!0}}function $r(r,t){return H(t,{TAG:0,_0:r.position,_1:function(r,t){for(;;){var n=t;switch(gr(r,n)){case"":return xr(r,n);case"{":switch(gr(r,n+1|0)){case"%":case"*":case"{":return xr(r,n);default:t=n+2|0;continue}default:t=n+1|0;continue}}}(r,0)})}function Or(r,t){for(var n=r.position,e=0,a=0;;){var o=a,i=e;switch(gr(r,i)){case"":throw{RE_EXN_ID:R,_1:D(n,t),Error:new Error};case"*":if("}"===gr(r,i+1|0)){if(0===o){var c=xr(r,i);return Dr(r,2),c}a=o-1|0,e=i+2|0;continue}e=i+2|0;continue;case"{":if("*"===gr(r,i+1|0)){a=o+1|0,e=i+2|0;continue}e=i+1|0;continue;default:e=i+1|0;continue}}}var Lr=/\\"/g;function Pr(r,t){for(var n=r.position,e=0;;){var a=e;switch(gr(r,a)){case"":throw{RE_EXN_ID:R,_1:y(n,t),Error:new Error};case'"':var o=xr(r,a).replace(Lr,'"');return Nr(r),o;case"\\":switch(gr(r,a+1|0)){case'"':case"\\":e=a+2|0;continue;default:e=a+1|0;continue}default:e=a+1|0;continue}}}function Br(r,t){var n,e=r.position,a=yr(r,Sr),o=(n=parseFloat(a),isNaN(n)?void 0:n);if(void 0!==o)return o;throw{RE_EXN_ID:R,_1:x(e,t,a),Error:new Error}}function Cr(r,t,n){for(var e=!0;e;){var a=r.position,o=br(r),i=0;switch(o){case"":throw{RE_EXN_ID:R,_1:k(a,n),Error:new Error};case"\t":case"\n":case"\r":case" ":Nr(r);break;case'"':Nr(r),H(t,{TAG:1,_0:a,_1:Pr(r,n)});break;case"#":H(t,{TAG:18,_0:a}),Nr(r);break;case"%":Nr(r);var c=r.position,u=Ir(r);if("}"!==u)throw{RE_EXN_ID:R,_1:X(c,n,u,["}"]),Error:new Error};e=!1;break;case",":H(t,{TAG:10,_0:a}),Nr(r);break;case".":var s=xr(r,3);if("..."!==s)throw{RE_EXN_ID:R,_1:X(a,n,s,["..."]),Error:new Error};H(t,{TAG:17,_0:a});break;case"/":H(t,{TAG:12,_0:a}),Nr(r);break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i=1;break;case":":H(t,{TAG:11,_0:a}),Nr(r);break;case"=":H(t,{TAG:19,_0:a}),Nr(r);break;case"[":H(t,{TAG:13,_0:a}),Nr(r);break;case"]":H(t,{TAG:14,_0:a}),Nr(r);break;case"{":H(t,{TAG:15,_0:a}),Nr(r);break;case"}":H(t,{TAG:16,_0:a}),Nr(r);break;case"~":Nr(r),H(t,{TAG:20,_0:a});break;default:if(m.isValidIdentifierStart(o))H(t,{TAG:4,_0:a,_1:yr(r,m.isEndOfIdentifier)});else{if(!m.isValidComponentStart(o))throw{RE_EXN_ID:R,_1:S(a,n,o),Error:new Error};H(t,{TAG:5,_0:a,_1:yr(r,m.isEndOfIdentifier)})}}1===i&&H(t,{TAG:3,_0:a,_1:Br(r,n)})}}function Vr(r,t){if("~"===br(r))return H(t,{TAG:20,_0:r.position}),Nr(r)}function jr(r,t){var n={str:t,position:0},e={length:0,first:void 0,last:void 0};$r(n,e);for(var a=Ir(n);""!==a;){if("{"!==a)throw{RE_EXN_ID:R,_1:X(n.position,r,a,["{","[end of file]"]),Error:new Error};var o=Ir(n);switch(o){case"%":Cr(n,e,r),$r(n,e);break;case"*":H(e,{TAG:2,_0:n.position,_1:Or(n,r)}),$r(n,e);break;case"{":Vr(n,e),kr(n,Xr);var i=br(n),c=0;switch(i){case'"':var u=n.position;Nr(n),H(e,{TAG:8,_0:u,_1:Pr(n,r)});break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=1;break;default:if(m.isValidIdentifierStart(i)){H(e,{TAG:6,_0:n.position,_1:yr(n,m.isEndOfIdentifier)})}else{if(!m.isValidComponentStart(i))throw{RE_EXN_ID:R,_1:S(n.position,r,i),Error:new Error};H(e,{TAG:7,_0:n.position,_1:yr(n,m.isEndOfIdentifier)})}}if(1===c)H(e,{TAG:9,_0:n.position,_1:Br(n,r)});kr(n,Xr),Vr(n,e);var s=xr(n,2);if("}}"!==s)throw{RE_EXN_ID:R,_1:X(n.position,r,s,["}}"]),Error:new Error};$r(n,e);break;default:throw{RE_EXN_ID:R,_1:X(n.position,r,o,["{","%","*"]),Error:new Error}}a=Ir(n)}return H(e,{TAG:21,_0:n.position}),{tokens:e,name:r}}function Mr(r){return function(r){var t=r.first;if(void 0!==t)return t.content;throw{RE_EXN_ID:"Not_found",Error:new Error}}(r.tokens)}function Ur(r){return J(r.tokens)}function zr(r){J(r.tokens)}function Zr(r){return r.name}function Fr(r){var t=Ur(r);switch(0|t.TAG){case 1:return{TAG:3,_0:t._0,_1:t._1};case 3:return{TAG:4,_0:t._0,_1:t._1};case 4:var n=t._1,e=t._0;switch(n){case"false":return{TAG:1,_0:e};case"null":return{TAG:0,_0:e};case"true":return{TAG:2,_0:e};default:return{TAG:8,_0:e,_1:n}}case 13:var a=t._0;if(14===Mr(r).TAG)return zr(r),{TAG:5,_0:a,_1:0};for(var o={hd:Fr(r),tl:0};;){var i=o,c=Ur(r);switch(0|c.TAG){case 10:var u=Mr(r);switch(0|u.TAG){case 1:case 3:case 4:case 13:case 15:break;case 17:zr(r);var s=Ur(r);if(4===s.TAG){var _={TAG:6,loc:a,array:f(i),bindLoc:s._0,binding:s._1},d=Ur(r);if(14===d.TAG)return _;throw{RE_EXN_ID:R,_1:$(d,Zr(r)),Error:new Error}}throw{RE_EXN_ID:R,_1:$(s,Zr(r)),Error:new Error};default:throw{RE_EXN_ID:R,_1:$(u,Zr(r)),Error:new Error}}o={hd:Fr(r),tl:i};continue;case 14:return{TAG:5,_0:a,_1:f(i)};default:throw{RE_EXN_ID:R,_1:$(c,Zr(r)),Error:new Error}}}case 15:var l=t._0;if(16===Mr(r).TAG)return zr(r),{TAG:7,_0:l,_1:0};for(var A={hd:qr(r),tl:0};;){var v=A,T=Ur(r);switch(0|T.TAG){case 10:A={hd:qr(r),tl:v};continue;case 16:return{TAG:7,_0:l,_1:f(v)};default:throw{RE_EXN_ID:R,_1:$(T,Zr(r)),Error:new Error}}}default:throw{RE_EXN_ID:R,_1:$(t,Zr(r)),Error:new Error}}}function qr(r){var t=Ur(r);switch(0|t.TAG){case 1:case 4:break;default:throw{RE_EXN_ID:R,_1:$(t,Zr(r)),Error:new Error}}var n=t._1,e=t._0;if(11===Mr(r).TAG)return zr(r),[n,Fr(r)];if(m.isLegalBinding(n))return[n,{TAG:8,_0:e,_1:n}];throw{RE_EXN_ID:R,_1:x(e,Zr(r),n),Error:new Error}}function Kr(r){for(var t=Fr(r),n=0;;){var e=n;if(10!==Mr(r).TAG)return{_0:t,_1:f(e)};zr(r),n={hd:Fr(r),tl:e}}}function Hr(r){var t=Ur(r);if(4===t.TAG){var n=t._1,e=t._0;if(m.isLegalBinding(n))for(var a=0;;){var o=a;if(10!==Mr(r).TAG)return{_0:[e,n],_1:f(o)};zr(r);var i=Ur(r);if(4===i.TAG){var c=i._1,u=i._0;if(m.isLegalBinding(c)){a={hd:[u,c],tl:o};continue}throw{RE_EXN_ID:R,_1:O(u,Zr(r),c),Error:new Error}}throw{RE_EXN_ID:R,_1:$(i,Zr(r)),Error:new Error}}throw{RE_EXN_ID:R,_1:O(e,Zr(r),n),Error:new Error}}throw{RE_EXN_ID:R,_1:$(t,Zr(r)),Error:new Error}}function Jr(r){switch(0|r.TAG){case 4:return"with"===r._1;case 12:return!0;default:return!1}}function Qr(r){return 21===r.TAG}function Wr(r){return 12===r.TAG}function Yr(r,t){for(var n=0;;){var e=n;if(t(Mr(r)))return f(e);var a=Ur(r);switch(0|a.TAG){case 0:var o=a._1;if(20===Mr(r).TAG){zr(r),n={hd:{TAG:0,_0:o,_1:1},tl:e};continue}n={hd:{TAG:0,_0:o,_1:3},tl:e};continue;case 2:continue;case 4:var i=a._1,c=a._0;switch(i){case"map":var u,s=Ur(r);if(4!==s.TAG)throw{RE_EXN_ID:R,_1:$(s,Zr(r)),Error:new Error};var _=s._1,d=s._0;if(!m.isLegalBinding(_))throw{RE_EXN_ID:R,_1:O(d,Zr(r),_),Error:new Error};u=[d,_];var l=rt(r),A=tt(r,"map");n={hd:{TAG:7,_0:u[0],_1:u[1],_2:{_0:l,_1:A}},tl:e};continue;case"match":n={hd:{TAG:6,_0:c,_1:Hr(r),_2:{_0:rt(r),_1:tt(r,"match")}},tl:e};continue;case"raw":var v=Ur(r);if(4===v.TAG){var T=v._1,G=v._0;if(m.isLegalBinding(T)){n={hd:{TAG:1,_0:G,_1:T},tl:e};continue}throw{RE_EXN_ID:R,_1:O(G,Zr(r),T),Error:new Error}}throw{RE_EXN_ID:R,_1:$(v,Zr(r)),Error:new Error};default:throw{RE_EXN_ID:R,_1:L(c,Zr(r),i),Error:new Error}}case 5:n={hd:nt(a._0,a._1,r),tl:e};continue;case 6:var E=a._1,h=a._0;if(m.isLegalBinding(E)){n={hd:{TAG:2,_0:h,_1:E},tl:e};continue}throw{RE_EXN_ID:R,_1:O(h,Zr(r),E),Error:new Error};case 7:n={hd:{TAG:3,_0:a._0,_1:a._1},tl:e};continue;case 8:n={hd:{TAG:4,_0:a._1},tl:e};continue;case 9:n={hd:{TAG:5,_0:a._1},tl:e};continue;case 20:var p=Ur(r);if(0===p.TAG){var w=p._1;if(20===Mr(r).TAG){zr(r),n={hd:{TAG:0,_0:w,_1:2},tl:e};continue}n={hd:{TAG:0,_0:w,_1:0},tl:e};continue}throw{RE_EXN_ID:R,_1:$(p,Zr(r)),Error:new Error};default:throw{RE_EXN_ID:R,_1:$(a,Zr(r)),Error:new Error}}}}function rt(r){return{patterns:function(r){var t=Ur(r);if(4!==t.TAG)throw{RE_EXN_ID:R,_1:$(t,Zr(r)),Error:new Error};if("with"!==t._1)throw{RE_EXN_ID:R,_1:$(t,Zr(r)),Error:new Error};for(var n=Kr(r),e=0;;){var a=e,o=Mr(r);if(4!==o.TAG)return{_0:n,_1:f(a)};if("with"!==o._1)return{_0:n,_1:f(a)};zr(r),e={hd:Kr(r),tl:a}}}(r),ast:Yr(r,Jr)}}function tt(r,t){for(var n=0;;){var e=n;if(12===Mr(r).TAG){zr(r);var a=Ur(r);if(4===a.TAG){if(a._1===t)return f(e);throw{RE_EXN_ID:R,_1:$(a,Zr(r)),Error:new Error}}throw{RE_EXN_ID:R,_1:$(a,Zr(r)),Error:new Error}}n={hd:rt(r),tl:e}}}function nt(r,t,n){var e=function(r,t,n){for(;;){var e=n,a=t,o=Mr(r);switch(0|o.TAG){case 4:var i=o._1;if(zr(r),19===Mr(r).TAG){zr(r),t={hd:[i,Fr(r)],tl:a};continue}t={hd:[i,{TAG:8,_0:o._0,_1:i}],tl:a};continue;case 5:var c=o._1;if(zr(r),19!==Mr(r).TAG){n={hd:[c,{TAG:0,_0:c}],tl:e};continue}zr(r);var u=Ur(r);switch(0|u.TAG){case 5:n={hd:[c,{TAG:0,_0:u._1}],tl:e};continue;case 18:n={hd:[c,{TAG:1,_0:et(r)}],tl:e};continue;default:throw{RE_EXN_ID:R,_1:$(u,Zr(r)),Error:new Error}}default:return[a,e]}}}(n,0,0),a=e[1],o=e[0];if(12===Mr(n).TAG)return zr(n),{TAG:8,loc:r,name:t,props:o,children:a};var i=Yr(n,Wr);zr(n);var c={hd:["Children",{TAG:1,_0:i}],tl:a},u=Ur(n);if(5===u.TAG){if(t===u._1)return{TAG:8,loc:r,name:t,props:o,children:c};throw{RE_EXN_ID:R,_1:$(u,Zr(n)),Error:new Error}}throw{RE_EXN_ID:R,_1:$(u,Zr(n)),Error:new Error}}function et(r){var t=Yr(r,Wr);zr(r);var n=Ur(r);if(18===n.TAG)return t;throw{RE_EXN_ID:R,_1:$(n,Zr(r)),Error:new Error}}function at(r,t){try{return I.make({TAG:0,_0:{ast:Yr(jr(r,t),Qr),name:r}})}catch(t){var n=rr(t);return n.RE_EXN_ID===R?I.make({TAG:1,_0:n._1}):I.make({TAG:1,_0:K(n,r,"Compile")})}}var ot=function(r,t){return at(t,r)},it=function(r,t){return function(r,t){var n=at(r,t);return function(r,t,e){return r(n,t,e)}}(t,r)},ct=function(r){var t=function(n,e,a){var o=I.validate(n);if(void 0===o)return{TAG:1,_0:[{message:"An AST was not valid. Did you forget to compile it?",kind:"Render",location:void 0,template:void 0,exn:void 0}]};if(0!==o.TAG)return{TAG:1,_0:[o._0]};var i=o._0,c={length:0,first:void 0,last:void 0};vr(c,Tr,Gr,Er,i.ast,e,a,r,i.name,t);var s={contents:""},_={length:0,first:void 0,last:void 0};return function(r,t){for(var n=r.first;;){var e=n;if(void 0===e)return;t(e.content),n=e.next}}(c,(function(r){return 0===r.TAG?void(s.contents=s.contents+r._0):u(r._0,(function(r){return H(_,r)}))})),Q(_)?{TAG:0,_0:s.contents}:{TAG:1,_0:W(_)}};return t},ut=function(r){var t=function(n,e,a){var o=I.validate(n);if(void 0===o)return Promise.resolve({TAG:1,_0:[{message:"An AST was not valid. Did you forget to compile it?",kind:"Render",location:void 0,template:void 0,exn:void 0}]});if(0!==o.TAG)return Promise.resolve({TAG:1,_0:[o._0]});var i=o._0,c={length:0,first:void 0,last:void 0};return vr(c,hr,pr,wr,i.ast,e,a,r,i.name,t),Promise.all(W(c)).then(mr)};return t};return r.compile=it,r.makeAst=ot,r.renderContext=ct,r.renderContextAsync=ut,r.result=function(r){return 0===r.TAG?{data:r._0,errors:[]}:{data:null,errors:r._0}},Object.defineProperty(r,"__esModule",{value:!0}),r}({});
//# sourceMappingURL=acutis.iife.min.js.map
