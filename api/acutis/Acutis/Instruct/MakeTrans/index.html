<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>MakeTrans (acutis.Acutis.Instruct.MakeTrans)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../';
let search_urls = ['../../../db.js','../../../../sherlodoc.js'];
</script><script src="../../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">acutis</a> &#x00BB; <a href="../../index.html">Acutis</a> &#x00BB; <a href="../index.html">Instruct</a> &#x00BB; MakeTrans</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Instruct.MakeTrans</span></code></h1><p>Apply a transformation module and a semantics module to produce a new semantics module that uses the transformation state.</p><p>The module this creates won't do any transformations by itself, and its values are defined as identity functions. You need to override specific functions to apply transformations. This is used in <a href="../../PrintJs/index.html"><code>PrintJs</code></a> to optimize its output.</p><p>Define the semantics of our abstract language.</p></header><nav class="odoc-toc"><ul><li><a href="#parameters">Parameters</a></li><li><a href="#signature">Signature</a></li><li><a href="#statements-and-expressions.">Statements and expressions.</a></li><li><a href="#functions.">Functions.</a></li><li><a href="#control-flow.">Control flow.</a></li><li><a href="#standard-values.">Standard values.</a></li><li><a href="#arrays.">Arrays.</a></li><li><a href="#hash-tables.">Hash tables.</a></li><li><a href="#buffers.">Buffers.</a></li><li><a href="#promises.">Promises.</a></li><li><a href="#importing-and-exporting.">Importing and exporting.</a></li><li><a href="#runtime-data.">Runtime data.</a></li></ul></nav><div class="odoc-content"><h2 id="parameters"><a href="#parameters" class="anchor"></a>Parameters</h2><div class="odoc-spec"><div class="spec parameter anchored" id="argument-1-T"><a href="#argument-1-T" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-1-T/index.html">T</a></span><span> : <a href="../module-type-TRANS/index.html">TRANS</a></span></code></div></div><div class="odoc-spec"><div class="spec parameter anchored" id="argument-2-F"><a href="#argument-2-F" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-2-F/index.html">F</a></span><span> : <a href="../module-type-SEM/index.html">SEM</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../module-type-SEM/index.html#type-exp">exp</a></span> = <span><span class="type-var">'a</span> <a href="argument-1-T/index.html#type-from_exp">T.from_exp</a></span></span> <span class="keyword">and</span> <span><span class="keyword">type</span> <span>'a <a href="../module-type-SEM/index.html#type-stmt">stmt</a></span> = <span><span class="type-var">'a</span> <a href="argument-1-T/index.html#type-from_stmt">T.from_stmt</a></span></span></span></code></div></div><h2 id="signature"><a href="#signature" class="anchor"></a>Signature</h2><h2 id="statements-and-expressions."><a href="#statements-and-expressions." class="anchor"></a>Statements and expressions.</h2><div class="odoc-spec"><div class="spec type anchored" id="type-stmt"><a href="#type-stmt" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a stmt</span></span><span> = <span><span class="type-var">'a</span> <a href="argument-1-T/index.html#type-stmt">T.stmt</a></span></span></code></div><div class="spec-doc"><p>A statement, generally some side-effecting code.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-obs"><a href="#type-obs" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a obs</span></span><span> = <span><span class="type-var">'a</span> <a href="argument-2-F/index.html#type-obs">F.obs</a></span></span></code></div><div class="spec-doc"><p>The final evaluation result.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-observe"><a href="#val-observe" class="anchor"></a><code><span><span class="keyword">val</span> observe : <span><span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-obs">obs</a></span></span></code></div><div class="spec-doc"><p>Observe the evaluation result after all transformations have applied.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(|:)"><a href="#val-(|:)" class="anchor"></a><code><span><span class="keyword">val</span> (|:) : <span><span>unit <a href="#type-stmt">stmt</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span></span></code></div><div class="spec-doc"><p>Sequence statements. <b>Evaluation order is unspecified in OCaml</b>. To guarantee that statements are evaluated in your intended order, you must let-bind each one before applying them to <code>|:</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-exp"><a href="#type-exp" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a exp</span></span><span> = <span><span class="type-var">'a</span> <a href="argument-1-T/index.html#type-exp">T.exp</a></span></span></code></div><div class="spec-doc"><p>An expression.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-return"><a href="#val-return" class="anchor"></a><code><span><span class="keyword">val</span> return : <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span></span></code></div><div class="spec-doc"><p>Return value <code>'a</code> from a function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stmt"><a href="#val-stmt" class="anchor"></a><code><span><span class="keyword">val</span> stmt : <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-let$"><a href="#val-let$" class="anchor"></a><code><span><span class="keyword">val</span> let$ : <span><span>(string * <span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-stmt">stmt</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-stmt">stmt</a></span></span></code></div><div class="spec-doc"><p>Define a new immutable binding. The string is used for pretty-printing.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-mut"><a href="#type-mut" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a mut</span></span><span> = <span><span class="type-var">'a</span> <a href="argument-2-F/index.html#type-mut">F.mut</a></span></span></code></div><div class="spec-doc"><p>A mutable reference variable.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-let&amp;"><a href="#val-let&amp;" class="anchor"></a><code><span><span class="keyword">val</span> let&amp; : <span><span>(string * <span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-mut">mut</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-stmt">stmt</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-stmt">stmt</a></span></span></code></div><div class="spec-doc"><p>Define a new reference variable. The string is used for pretty-printing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-deref"><a href="#val-deref" class="anchor"></a><code><span><span class="keyword">val</span> deref : <span><span><span class="type-var">'a</span> <a href="#type-mut">mut</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(:=)"><a href="#val-(:=)" class="anchor"></a><code><span><span class="keyword">val</span> (:=) : <span><span><span class="type-var">'a</span> <a href="#type-mut">mut</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-incr"><a href="#val-incr" class="anchor"></a><code><span><span class="keyword">val</span> incr : <span><span>int <a href="#type-mut">mut</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><h2 id="functions."><a href="#functions." class="anchor"></a>Functions.</h2><div class="odoc-spec"><div class="spec value anchored" id="val-lambda"><a href="#val-lambda" class="anchor"></a><code><span><span class="keyword">val</span> lambda : <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-stmt">stmt</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(@@)"><a href="#val-(@@)" class="anchor"></a><code><span><span class="keyword">val</span> (@@) : <span><span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-exp">exp</a></span></span></code></div></div><h2 id="control-flow."><a href="#control-flow." class="anchor"></a>Control flow.</h2><div class="odoc-spec"><div class="spec value anchored" id="val-if_"><a href="#val-if_" class="anchor"></a><code><span><span class="keyword">val</span> if_ : <span><span>bool <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">then_</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-if_else"><a href="#val-if_else" class="anchor"></a><code><span><span class="keyword">val</span> if_else : 
  <span><span>bool <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">then_</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">else_</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-while_"><a href="#val-while_" class="anchor"></a><code><span><span class="keyword">val</span> while_ : <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-exp">exp</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-mut">mut</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><h2 id="standard-values."><a href="#standard-values." class="anchor"></a>Standard values.</h2><div class="odoc-spec"><div class="spec value anchored" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-not"><a href="#val-not" class="anchor"></a><code><span><span class="keyword">val</span> not : <span><span>bool <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span>bool <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal_int"><a href="#val-equal_int" class="anchor"></a><code><span><span class="keyword">val</span> equal_int : <span><span>int <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>int <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal_string"><a href="#val-equal_string" class="anchor"></a><code><span><span class="keyword">val</span> equal_string : <span><span>string <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_int"><a href="#val-string_of_int" class="anchor"></a><code><span><span class="keyword">val</span> string_of_int : <span><span>int <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float_of_int"><a href="#val-float_of_int" class="anchor"></a><code><span><span class="keyword">val</span> float_of_int : <span><span>int <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>float <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_float"><a href="#val-string_of_float" class="anchor"></a><code><span><span class="keyword">val</span> string_of_float : <span><span>float <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_bool"><a href="#val-string_of_bool" class="anchor"></a><code><span><span class="keyword">val</span> string_of_bool : <span><span>int <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <a href="#type-exp">exp</a></span></span></code></div></div><h2 id="arrays."><a href="#arrays." class="anchor"></a>Arrays.</h2><div class="odoc-spec"><div class="spec value anchored" id="val-array"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array_make"><a href="#val-array_make" class="anchor"></a><code><span><span class="keyword">val</span> array_make : <span><span>int <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(.%())"><a href="#val-(.%())" class="anchor"></a><code><span><span class="keyword">val</span> (.%()) : <span><span><span><span class="type-var">'a</span> array</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>int <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(.%()&lt;-)"><a href="#val-(.%()&lt;-)" class="anchor"></a><code><span><span class="keyword">val</span> (.%()&lt;-) : <span><span><span><span class="type-var">'a</span> array</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>int <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><h2 id="hash-tables."><a href="#hash-tables." class="anchor"></a>Hash tables.</h2><div class="odoc-spec"><div class="spec type anchored" id="type-hashtbl"><a href="#type-hashtbl" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a hashtbl</span></span><span> = <span><span class="type-var">'a</span> <a href="argument-2-F/index.html#type-hashtbl">F.hashtbl</a></span></span></code></div><div class="spec-doc"><p>A mutable map of string keys to <code>'a</code> values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hashtbl"><a href="#val-hashtbl" class="anchor"></a><code><span><span class="keyword">val</span> hashtbl : <span><span><span>(<span>string <a href="#type-exp">exp</a></span> * <span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-hashtbl">hashtbl</a></span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hashtbl_create"><a href="#val-hashtbl_create" class="anchor"></a><code><span><span class="keyword">val</span> hashtbl_create : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-hashtbl">hashtbl</a></span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(.%{})"><a href="#val-(.%{})" class="anchor"></a><code><span><span class="keyword">val</span> (.%{}) : <span><span><span><span class="type-var">'a</span> <a href="#type-hashtbl">hashtbl</a></span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(.%{}&lt;-)"><a href="#val-(.%{}&lt;-)" class="anchor"></a><code><span><span class="keyword">val</span> (.%{}&lt;-) : <span><span><span><span class="type-var">'a</span> <a href="#type-hashtbl">hashtbl</a></span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hashtbl_mem"><a href="#val-hashtbl_mem" class="anchor"></a><code><span><span class="keyword">val</span> hashtbl_mem : <span><span><span><span class="type-var">'a</span> <a href="#type-hashtbl">hashtbl</a></span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hashtbl_copy"><a href="#val-hashtbl_copy" class="anchor"></a><code><span><span class="keyword">val</span> hashtbl_copy : <span><span><span><span class="type-var">'a</span> <a href="#type-hashtbl">hashtbl</a></span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-hashtbl">hashtbl</a></span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hashtbl_iter"><a href="#val-hashtbl_iter" class="anchor"></a><code><span><span class="keyword">val</span> hashtbl_iter : 
  <span><span><span><span class="type-var">'a</span> <a href="#type-hashtbl">hashtbl</a></span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span>string <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><h2 id="buffers."><a href="#buffers." class="anchor"></a>Buffers.</h2><div class="odoc-spec"><div class="spec type anchored" id="type-buffer"><a href="#type-buffer" class="anchor"></a><code><span><span class="keyword">type</span> buffer</span><span> = <a href="argument-2-F/index.html#type-buffer">F.buffer</a></span></code></div><div class="spec-doc"><p>A mutable string buffer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-buffer_create"><a href="#val-buffer_create" class="anchor"></a><code><span><span class="keyword">val</span> buffer_create : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-buffer">buffer</a> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-buffer_add_string"><a href="#val-buffer_add_string" class="anchor"></a><code><span><span class="keyword">val</span> buffer_add_string : <span><span><a href="#type-buffer">buffer</a> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-buffer_add_buffer"><a href="#val-buffer_add_buffer" class="anchor"></a><code><span><span class="keyword">val</span> buffer_add_buffer : <span><span><a href="#type-buffer">buffer</a> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-buffer">buffer</a> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-buffer_add_escape"><a href="#val-buffer_add_escape" class="anchor"></a><code><span><span class="keyword">val</span> buffer_add_escape : <span><span><a href="#type-buffer">buffer</a> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div><div class="spec-doc"><p>E.g. sanitize HTML syntax.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-buffer_contents"><a href="#val-buffer_contents" class="anchor"></a><code><span><span class="keyword">val</span> buffer_contents : <span><span><a href="#type-buffer">buffer</a> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-buffer_length"><a href="#val-buffer_length" class="anchor"></a><code><span><span class="keyword">val</span> buffer_length : <span><span><a href="#type-buffer">buffer</a> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-buffer_clear"><a href="#val-buffer_clear" class="anchor"></a><code><span><span class="keyword">val</span> buffer_clear : <span><span><a href="#type-buffer">buffer</a> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-stmt">stmt</a></span></span></code></div></div><h2 id="promises."><a href="#promises." class="anchor"></a>Promises.</h2><div class="odoc-spec"><div class="spec type anchored" id="type-promise"><a href="#type-promise" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a promise</span></span><span> = <span><span class="type-var">'a</span> <a href="argument-2-F/index.html#type-promise">F.promise</a></span></span></code></div><div class="spec-doc"><p>An asynchronous monad.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-promise"><a href="#val-promise" class="anchor"></a><code><span><span class="keyword">val</span> promise : <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-promise">promise</a></span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind"><a href="#val-bind" class="anchor"></a><code><span><span class="keyword">val</span> bind : <span><span><span><span class="type-var">'a</span> <a href="#type-promise">promise</a></span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-promise">promise</a></span>)</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-promise">promise</a></span> <a href="#type-exp">exp</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error"><a href="#val-error" class="anchor"></a><code><span><span class="keyword">val</span> error : <span><span>string <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-promise">promise</a></span> <a href="#type-exp">exp</a></span></span></code></div></div><h2 id="importing-and-exporting."><a href="#importing-and-exporting." class="anchor"></a>Importing and exporting.</h2><div class="odoc-spec"><div class="spec type anchored" id="type-external_data"><a href="#type-external_data" class="anchor"></a><code><span><span class="keyword">type</span> external_data</span><span> = <a href="argument-2-F/index.html#type-external_data">F.external_data</a></span></code></div><div class="spec-doc"><p>Data from the outside world that we need to decode.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-import"><a href="#type-import" class="anchor"></a><code><span><span class="keyword">type</span> import</span><span> = <a href="argument-2-F/index.html#type-import">F.import</a></span></code></div><div class="spec-doc"><p>Information to import a function from external code.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-import"><a href="#val-import" class="anchor"></a><code><span><span class="keyword">val</span> import : 
  <span><a href="#type-import">import</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span><span>(<span><a href="#type-external_data">external_data</a> <span class="arrow">&#45;&gt;</span></span> <span>string <a href="#type-promise">promise</a></span>)</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-export"><a href="#val-export" class="anchor"></a><code><span><span class="keyword">val</span> export : <span><span><span class="type-var">'a</span> <a href="#type-exp">exp</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-stmt">stmt</a></span></span></code></div></div><h2 id="runtime-data."><a href="#runtime-data." class="anchor"></a>Runtime data.</h2><div class="odoc-spec"><div class="spec type anchored" id="type-data"><a href="#type-data" class="anchor"></a><code><span><span class="keyword">type</span> data</span><span> = <a href="argument-2-F/index.html#type-data">F.data</a></span></code></div><div class="spec-doc"><p>Runtime data. Either a string, an integer, a float, an array, or a hash table.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Data"><a href="#module-Data" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Data/index.html">Data</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-External"><a href="#module-External" class="anchor"></a><code><span><span class="keyword">module</span> <a href="External/index.html">External</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The foreign data before it's parsed into <code>Data.t</code>.</p></div></div></div></body></html>
