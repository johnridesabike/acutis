<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Acutis (acutis.Acutis)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../';
let search_urls = ['../db.js','../../sherlodoc.js'];
</script><script src="../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">acutis</a> &#x00BB; Acutis</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Acutis</span></code></h1><p>This is the main API wrapper around the compiler internals (<a href="../Acutis_internals/index.html"><code>Acutis_internals</code></a>).</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#compiling-templates.">Compiling templates.</a></li><li><a href="#working-with-decodable-data-and-rendering-templates-in-ocaml.">Working with decodable data and rendering templates in OCaml.</a></li><li><a href="#printing-templates-as-javascript-modules.">Printing templates as JavaScript modules.</a></li><li><a href="#handling-errors-and-printing-debug-information.">Handling errors and printing debug information.</a></li></ul></nav></div><div class="odoc-content"><p>This module is unstable. Use at your own risk.</p><div class="odoc-spec"><div class="spec type anchored" id="type-interface"><a href="#type-interface" class="anchor"></a><code><span><span class="keyword">type</span> interface</span><span> = <span class="keyword">private</span> <a href="../Acutis_internals/Typechecker/Type/index.html#type-interface">Acutis_internals.Typechecker.Type.interface</a></span></code></div><div class="spec-doc"><p>Type interfaces for templates.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-parsed"><a href="#type-parsed" class="anchor"></a><code><span><span class="keyword">type</span> parsed</span><span> = <span class="keyword">private</span> <a href="../Acutis_internals/Compile/index.html#type-parsed">Acutis_internals.Compile.parsed</a></span></code></div><div class="spec-doc"><p>A template that's been parsed but not type-checked, optimized, or linked yet.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-comp"><a href="#type-comp" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a comp</span></span><span> = <span class="keyword">private</span> <span><span class="type-var">'a</span> <a href="../Acutis_internals/Compile/Components/index.html#type-source">Acutis_internals.Compile.Components.source</a></span></span></code></div><div class="spec-doc"><p>A template component. Parameter <code>'a</code> is the type of external components, which may either be a function or a <a href="#type-js_import"><code>js_import</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-comps_compiled"><a href="#type-comps_compiled" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a comps_compiled</span></span><span> = <span class="keyword">private</span> <span><span class="type-var">'a</span> <a href="../Acutis_internals/Compile/Components/index.html#type-t">Acutis_internals.Compile.Components.t</a></span></span></code></div><div class="spec-doc"><p>A group of compiled and linked components.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-compiled"><a href="#type-compiled" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a compiled</span></span><span> = <span class="keyword">private</span> <span><span class="type-var">'a</span> <a href="../Acutis_internals/Compile/index.html#type-t">Acutis_internals.Compile.t</a></span></span></code></div><div class="spec-doc"><p>A completely compiled template.</p></div></div><h2 id="compiling-templates."><a href="#compiling-templates." class="anchor"></a>Compiling templates.</h2><div class="odoc-spec"><div class="spec value anchored" id="val-comp_of_lexbuf"><a href="#val-comp_of_lexbuf" class="anchor"></a><code><span><span class="keyword">val</span> comp_of_lexbuf : <span><span class="label">name</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-comp">comp</a></span></span></code></div><div class="spec-doc"><p>Parse an Acutis source into a template component. This doesn't type-check yet. <code>name</code> is the name the component is called in Acutis code.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-comp_of_fun"><a href="#val-comp_of_fun" class="anchor"></a><code><span><span class="keyword">val</span> comp_of_fun : <span><span class="label">name</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-interface">interface</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-comp">comp</a></span></span></code></div><div class="spec-doc"><p>Convert a function or a <a href="#type-js_import"><code>js_import</code></a> into a template component. <code>name</code> is the name the component is called in Acutis code.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-comps_compile"><a href="#val-comps_compile" class="anchor"></a><code><span><span class="keyword">val</span> comps_compile : <span><span><span><span class="type-var">'a</span> <a href="#type-comp">comp</a></span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-comps_compiled">comps_compiled</a></span></span></code></div><div class="spec-doc"><p>Type-check, optimize, and link the components.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-comps_empty"><a href="#val-comps_empty" class="anchor"></a><code><span><span class="keyword">val</span> comps_empty : <span><span class="type-var">'a</span> <a href="#type-comps_compiled">comps_compiled</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse"><a href="#val-parse" class="anchor"></a><code><span><span class="keyword">val</span> parse : <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> <a href="#type-parsed">parsed</a></span></code></div><div class="spec-doc"><p>Parse a component.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compile"><a href="#val-compile" class="anchor"></a><code><span><span class="keyword">val</span> compile : <span><span><span class="type-var">'a</span> <a href="#type-comps_compiled">comps_compiled</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-parsed">parsed</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-compiled">compiled</a></span></span></code></div><div class="spec-doc"><p>Type-check, optimize, and link the template with its components.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compile_interface"><a href="#val-compile_interface" class="anchor"></a><code><span><span class="keyword">val</span> compile_interface : <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> <a href="#type-interface">interface</a></span></code></div><div class="spec-doc"><p>Parse and type-check a type interface with no template.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_interface"><a href="#val-get_interface" class="anchor"></a><code><span><span class="keyword">val</span> get_interface : <span><span><span class="type-var">'a</span> <a href="#type-compiled">compiled</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-interface">interface</a></span></code></div></div><h2 id="working-with-decodable-data-and-rendering-templates-in-ocaml."><a href="#working-with-decodable-data-and-rendering-templates-in-ocaml." class="anchor"></a>Working with decodable data and rendering templates in OCaml.</h2><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-DECODABLE"><a href="#module-type-DECODABLE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-DECODABLE/index.html">DECODABLE</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A specification for decoding and encoding input data.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Of_decodable"><a href="#module-Of_decodable" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Of_decodable/index.html">Of_decodable</a></span><span> (<a href="Of_decodable/argument-1-D/index.html">D</a> : <a href="module-type-DECODABLE/index.html">DECODABLE</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A functor that builds functions to render templates and construct type interfaces from decodable data.</p></div></div><h2 id="printing-templates-as-javascript-modules."><a href="#printing-templates-as-javascript-modules." class="anchor"></a>Printing templates as JavaScript modules.</h2><div class="odoc-spec"><div class="spec type anchored" id="type-js_import"><a href="#type-js_import" class="anchor"></a><code><span><span class="keyword">type</span> js_import</span></code></div><div class="spec-doc"><p>Information to import an external JavaScript function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-js_import"><a href="#val-js_import" class="anchor"></a><code><span><span class="keyword">val</span> js_import : <span><span class="label">module_path</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">function_path</span>:string <span class="arrow">&#45;&gt;</span></span> <a href="#type-js_import">js_import</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cjs"><a href="#val-cjs" class="anchor"></a><code><span><span class="keyword">val</span> cjs : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-js_import">js_import</a> <a href="#type-compiled">compiled</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print a template as a CommonJS module.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-esm"><a href="#val-esm" class="anchor"></a><code><span><span class="keyword">val</span> esm : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-js_import">js_import</a> <a href="#type-compiled">compiled</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print a template as an ECMAScript module.</p></div></div><h2 id="handling-errors-and-printing-debug-information."><a href="#handling-errors-and-printing-debug-information." class="anchor"></a>Handling errors and printing debug information.</h2><div class="odoc-spec"><div class="spec type anchored" id="type-error"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = <span class="keyword">private</span> <a href="../Acutis_internals/Error/index.html#type-t">Acutis_internals.Error.t</a></span></code></div><div class="spec-doc"><p>An error message.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Acutis_error"><a href="#exception-Acutis_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Acutis_error</span> <span class="keyword">of</span> <a href="#type-error">error</a></span></code></div><div class="spec-doc"><p>This is raised if any part of the compilation or rendering fails.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_error"><a href="#val-pp_error" class="anchor"></a><code><span><span class="keyword">val</span> pp_error : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty-print an error message.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_interface"><a href="#val-pp_interface" class="anchor"></a><code><span><span class="keyword">val</span> pp_interface : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-interface">interface</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty-print a type interface in Acutis syntax.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_ast"><a href="#val-pp_ast" class="anchor"></a><code><span><span class="keyword">val</span> pp_ast : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-parsed">parsed</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty-print a template's abstract syntax tree in S-expression syntax.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_compiled"><a href="#val-pp_compiled" class="anchor"></a><code><span><span class="keyword">val</span> pp_compiled : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">_</span> <a href="#type-compiled">compiled</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty-print a fully-compiled template in S-expression syntax.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_instructions"><a href="#val-pp_instructions" class="anchor"></a><code><span><span class="keyword">val</span> pp_instructions : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-compiled">compiled</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Pretty-print runtime instructions in S-expression syntax.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_js_import"><a href="#val-pp_js_import" class="anchor"></a><code><span><span class="keyword">val</span> pp_js_import : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-js_import">js_import</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty-print JavaScript import data in S-expression syntax.</p></div></div></div></body></html>
