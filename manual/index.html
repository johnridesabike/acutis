<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>Acutis language manual</title>
    
      <meta name="description" content="The manual for how to use the Acutis template language." />
    
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="stylesheet" href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis/style.css" />
  </head>
  <body>
    <a class="skip-nav" href="#content">Skip to content.</a><div class="site-header__wrapper">
        <header><p class="site-header__title">
              <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis/">Acutis</a>
            </p><p class="site-header__subtitle">A declarative template language for web documents &amp; beyond.</p>
        </header>
        <nav class="site-header__nav">
          <ol class="site-header__nav-list"><li>
                <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis&#x2F;" aria-current="false">Home</a>
              </li><li>
                <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis&#x2F;introduction&#x2F;" aria-current="false">Getting started</a>
              </li><li>
                <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis&#x2F;manual&#x2F;" aria-current="true">Language manual</a>
              </li><li>
                <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis&#x2F;api&#x2F;" aria-current="false">API</a>
              </li><li>
                <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis&#x2F;playground&#x2F;" aria-current="false">Playground</a>
              </li><li>
                <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis&#x2F;development&#x2F;" aria-current="false">Development</a>
              </li><li>
                <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis&#x2F;credits&#x2F;" aria-current="false">Credits</a>
              </li></ol>
        </nav>
      </div><main class="main" id="content">
      <article>
          <header class="header">
            <h1>Acutis language manual</h1>
          </header><p>An Acutis template is parsed as three basic building blocks:</p>
<ul>
<li>Text, which is rendered as-is.</li>
<li>Echoes, which are values wrapped in <code>{{</code> ‚Äúmustaches‚Äù <code>}}</code>.</li>
<li>Expressions, which are wrapped in <code>{%</code> and <code>%}</code>.</li>
</ul>
<p>Most of the language features occur within <code>{%</code> expressions <code>%}</code>.</p>
<p><div class="table-of-contents"><details open><summary class="toc-container-header">Contents</summary><ol><li><a href="#bindings">Bindings</a></li><li><a href="#echoing-values">Echoing values</a><ol><li><a href="#nullish-coalescing">Nullish coalescing</a></li><li><a href="#escaping">Escaping</a></li></ol></li><li><a href="#comments">Comments</a></li><li><a href="#whitespace-control">Whitespace control</a></li><li><a href="#patterns%2C-matching%2C-and-mapping">Patterns, matching, and mapping</a></li><li><a href="#multiple-patterns-for-a-block">Multiple patterns for a block</a></li><li><a href="#shadowing-bindings">Shadowing bindings</a></li><li><a href="#map">Map</a><ol><li><a href="#mapping-static-patterns">Mapping static patterns</a></li><li><a href="#matching-the-item-index">Matching the item index</a></li></ol></li><li><a href="#pattern-matching-in-depth">Pattern matching in-depth</a><ol><li><a href="#reference-table">Reference table</a></li><li><a href="#ignoring-values-with-_-(underscore)">Ignoring values with _ (underscore)</a></li><li><a href="#matching-multiple-values-at-once">Matching multiple values at once</a></li><li><a href="#the-rules-of-pattern-matching">The rules of pattern matching</a></li></ol></li><li><a href="#type">Type</a></li><li><a href="#template-components">Template components</a><ol><li><a href="#patterns-in-props">Patterns in props</a></li><li><a href="#prop-punning">Prop punning</a></li><li><a href="#template-children-props">Template children props</a></li><li><a href="#default-children-prop">Default children prop</a></li></ol></li></ol></details></div></p>
<h2 id="bindings">Bindings</h2>
<p>Every template accepts a properties object (props) that binds values to
names. The object <code>{&quot;color&quot;: &quot;blue&quot;}</code> binds <code>&quot;blue&quot;</code> to the name <code>color</code>.</p>
<p>If a template tries to access a binding that doesn‚Äôt exist, then the value
defaults to <code>null</code>. (See <a href="#patterns%2C-matching%2C-and-mapping">Pattern matching</a> and <a href="#type">Type</a> for more
information about this.)</p>
<h2 id="echoing-values">Echoing values</h2>
<p>If you apply the props from the last section to this template:</p>
<pre class="language-jinja2"><code class="language-jinja2">My favorite color is <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">color</span> <span class="token delimiter punctuation">}}</span></span>.</code></pre>
<p>It renders:</p>
<pre class="language-jinja2"><code class="language-jinja2">My favorite color is blue.</code></pre>
<h3 id="nullish-coalescing">Nullish coalescing</h3>
<p>The <code>?</code> (question mark) echoes the value on its right-hand side if the value
on its left-hand side is <code>null</code>.</p>
<pre class="language-jinja2"><code class="language-jinja2">My favorite color is <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">color</span> ? <span class="token variable">fallbackColor</span> <span class="token delimiter punctuation">}}</span></span>.<br><br>You can chain ?s: <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">a</span> ? <span class="token variable">b</span> ? <span class="token string">"If this prints, a and b are both null."</span> <span class="token delimiter punctuation">}}</span></span></code></pre>
<h3 id="escaping">Escaping</h3>
<p>Acutis escapes echoes by default. It transforms the following characters into
HTML entities:</p>
<pre class="language-jinja2"><code class="language-jinja2">&amp; " ' > &lt; / ` =</code></pre>
<p>If the <code>&amp;</code> (ampersand) character appears before a value, then the value will
not be escaped.</p>
<pre class="language-jinja2"><code class="language-jinja2">My favorite color is <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token operator">&amp;</span><span class="token variable">color</span> <span class="token delimiter punctuation">}}</span></span>.</code></pre>
<h2 id="comments">Comments</h2>
<pre class="language-jinja2"><code class="language-jinja2">{* TODO: add more colors. *}</code></pre>
<p>Anything wrapped <code>{*</code> and <code>*}</code> is always ignored in the output. It is
possible to nest comments, similar to in ML-style languages.</p>
<pre class="language-jinja2"><code class="language-jinja2">{* None of {* this is *} rendered. *}</code></pre>
<h2 id="whitespace-control">Whitespace control</h2>
<p>The <code>~</code> (tilde) symbol trims whitespace before or after an expression or an
echo statement.</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>  <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span><span class="token operator">~</span> <span class="token variable">color</span> <span class="token operator">~</span><span class="token delimiter punctuation">}}</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<p>Renders:</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Blue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
<h2 id="patterns%2C-matching%2C-and-mapping">Patterns, matching, and mapping</h2>
<p>The <code>match</code> and <code>map</code> statements are the core of Acutis‚Äô superpowers. They
use pattern matching to conditionally output sections of a template.</p>
<p>Pattern matching in Acutis combines object destructuring with equality
checking. If you‚Äôre used to destructuring objects and using the <code>switch</code>
statement in JavaScript, then this may seem like a natural progression from
that.</p>
<p>Consider this pattern:</p>
<pre class="language-reason"><code class="language-reason"><span class="token punctuation">{</span>published<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">,</span> dates<span class="token punctuation">:</span> <span class="token punctuation">{</span>posted<span class="token punctuation">,</span> updated<span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>
<p>This matches any object where <code>published</code> equals <code>true</code>, which contains a
<code>title</code> field, and which contains a <code>dates</code> object with <code>posted</code> and
<code>updated</code> fields. Additionally, it <em>binds</em> the values of <code>title</code>, <code>posted</code>,
and <code>updated</code> to those names.</p>
<p>Therefore, we can use these with the <code>match</code> statement and the <code>with</code> clause:</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">match</span> <span class="token variable">article</span><br>   <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token variable">published</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token variable">title</span><span class="token punctuation">,</span> <span class="token variable">dates</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token variable">posted</span><span class="token punctuation">,</span> <span class="token variable">updated</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token delimiter punctuation">%}</span></span><br>  <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span> was posted on <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">posted</span> <span class="token delimiter punctuation">}}</span></span> and updated on <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">updated</span> <span class="token delimiter punctuation">}}</span></span>.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">with</span> <span class="token punctuation">{</span><span class="token variable">published</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token delimiter punctuation">%}</span></span><br>  {* Don't render unpublished articles. *}<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">match</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<p>The <code>match</code>‚Ä¶<code>with</code> block is analogous to a <code>switch</code>‚Ä¶<code>case</code> block in some
languages. Here, the structure and values of the <code>article</code> binding is checked
against the patterns after each <code>with</code> clause. If one of the patterns
<em>matches</em> the contents of <code>article</code>, then the following template section is
rendered.</p>
<h2 id="multiple-patterns-for-a-block">Multiple patterns for a block</h2>
<p>Acutis allows multiple <code>with</code> patterns to render single block expression.</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">match</span> <span class="token variable">greeting</span><br>   <span class="token keyword">with</span> <span class="token string">"Hello"</span><br>   <span class="token keyword">with</span> <span class="token string">"Hola"</span><br>   <span class="token keyword">with</span> <span class="token string">"Konnichiwa"</span> <span class="token delimiter punctuation">%}</span></span><br>  I can speak this language.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">with</span> <span class="token variable">unknown</span> <span class="token delimiter punctuation">%}</span></span><br>  I don't know what "<span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">unknown</span> <span class="token delimiter punctuation">}}</span></span>" means.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">match</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<h2 id="shadowing-bindings">Shadowing bindings</h2>
<p>Bindings are immutable. Binding a value to an existing name does not override
the original, but <em>shadows</em> it. Bindings are also scoped to their blocks.</p>
<p>Consider this object about my favorite colors:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token property">"other"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"green"</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>
<p>And this template:</p>
<pre class="language-jinja2"><code class="language-jinja2">My favorite is <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">color</span> <span class="token delimiter punctuation">}}</span></span>.<br><br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">match</span> <span class="token variable">other</span> <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token variable">color</span><span class="token punctuation">}</span> <span class="token operator">~</span><span class="token delimiter punctuation">%}</span></span><br>  Another is <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">color</span> <span class="token delimiter punctuation">}}</span></span>.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span><span class="token operator">~</span> <span class="token operator">/</span><span class="token variable">match</span> <span class="token delimiter punctuation">%}</span></span><br><br>But my favorite is still <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">color</span> <span class="token delimiter punctuation">}}</span></span>.</code></pre>
<p>Which renders:</p>
<pre class="language-jinja2"><code class="language-jinja2">My favorite is blue.<br><br>Another is green.<br><br>But my favorite is still blue.</code></pre>
<p>The top-level <code>color</code> is not affected by the nested <code>color</code> binding.</p>
<h2 id="map">Map</h2>
<p>The <code>map</code> statement is similar to <code>match</code> except that it is used on arrays to
render each value of the array.</p>
<p>These props:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"articles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Acutis templates for beginners"</span><span class="token punctuation">,</span> <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <br>    <span class="token punctuation">{</span><span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Level up your Acutis skills"</span><span class="token punctuation">,</span> <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Carlo"</span><span class="token punctuation">}</span><br>  <span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre>
<p>And this template:</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">map</span> <span class="token variable">articles</span> <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">,</span> <span class="token variable">author</span><span class="token punctuation">}</span> <span class="token operator">~</span><span class="token delimiter punctuation">%}</span></span><br>  The article "<span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span>" was written by <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">author</span> <span class="token delimiter punctuation">}}</span></span>.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">map</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<p>Renders:</p>
<pre class="language-html"><code class="language-html">The article "Acutis templates for beginners" was written by John.<br>The article "Level up your Acutis skills" was written by Carlo.</code></pre>
<p>Just like <code>match</code>, <code>map</code> can take multiple patterns to conditionally render
different template sections based on an value‚Äôs content.</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">map</span> <span class="token variable">articles</span><br>   <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">,</span> <span class="token variable">author</span><span class="token punctuation">:</span> <span class="token variable">null</span><span class="token punctuation">}</span> <span class="token delimiter punctuation">%}</span></span><br>  The article "<span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span>" was written anonymously.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">with</span> <span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">,</span> <span class="token variable">author</span><span class="token punctuation">}</span> <span class="token delimiter punctuation">%}</span></span><br>  The article "<span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span>" was written by <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">author</span> <span class="token delimiter punctuation">}}</span></span>.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">map</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<h3 id="mapping-static-patterns">Mapping static patterns</h3>
<p>You can map static array patterns.</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">map</span> <span class="token punctuation">[</span><span class="token string">"Carlo"</span><span class="token punctuation">,</span> <span class="token string">"John"</span><span class="token punctuation">]</span> <span class="token keyword">with</span> <span class="token variable">name</span> <span class="token operator">~</span><span class="token delimiter punctuation">%}</span></span><br>  Hello, <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">name</span> <span class="token delimiter punctuation">}}</span></span>.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">map</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<p>You can also concatenate a static array pattern with an array binding by
using the <code>...</code> (spread) syntax.</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">map</span> <span class="token punctuation">[</span><span class="token string">"Carlo"</span><span class="token punctuation">,</span> <span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token variable">others</span><span class="token punctuation">]</span> <span class="token keyword">with</span> <span class="token variable">name</span> <span class="token operator">~</span><span class="token delimiter punctuation">%}</span></span><br>  Hello, <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">name</span> <span class="token delimiter punctuation">}}</span></span>.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">map</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<h3 id="matching-the-item-index">Matching the item index</h3>
<p>You can optionally include an item‚Äôs index in the pattern.
<em>Indices always begin at zero.</em></p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">map</span> <span class="token variable">articles</span> <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">,</span> <span class="token variable">author</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token variable">index</span> <span class="token delimiter punctuation">%}</span></span><br>  <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">index</span> <span class="token delimiter punctuation">}}</span></span>. <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span> was written by <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">author</span> <span class="token delimiter punctuation">}}</span></span>.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">map</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<p>Because the <code>index</code> binding is just another pattern, you can also use it to
conditionally render sections by matching the index with specific numbers.</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">map</span> <span class="token variable">articles</span><br>   <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token delimiter punctuation">%}</span></span><br>  Our first article is <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span>.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">with</span> <span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">}</span> <span class="token delimiter punctuation">%}</span></span><br>  <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span><br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">map</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<h2 id="pattern-matching-in-depth">Pattern matching in-depth</h2>
<p>Pattern matching combines many concepts into one terse syntax. In other
languages, you may use variable assignment, <code>if</code>‚Ä¶<code>else</code> statements, and
imperative loops to control how your content is rendered. To help you
maximize your use of patterns, this section explains the system‚Äôs nuances.</p>
<h3 id="reference-table">Reference table</h3>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Matches</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x</code></td>
<td>A binding. It matches any value, and the value is bound to <code>x</code>.</td>
</tr>
<tr>
<td><code>true</code></td>
<td>Exactly <code>true</code>.</td>
</tr>
<tr>
<td><code>false</code></td>
<td>Exactly <code>false</code>.</td>
</tr>
<tr>
<td><code>null</code></td>
<td>Exactly <code>null</code>.</td>
</tr>
<tr>
<td><code>&quot;abc&quot;</code></td>
<td>The exact string <code>&quot;abc&quot;</code>.</td>
</tr>
<tr>
<td><code>1.5</code></td>
<td>The exact number <code>1.5</code>.</td>
</tr>
<tr>
<td><code>1.5e1</code></td>
<td>The exact number <code>15</code>.</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>An array with <em>exactly zero</em> items.</td>
</tr>
<tr>
<td><code>[&quot;a&quot;, &quot;b&quot;]</code></td>
<td>An array that contains strings <code>&quot;a&quot;</code> and <code>&quot;b&quot;</code> as its first two items, receptively. <em>There may be more items.</em></td>
</tr>
<tr>
<td><code>[&quot;a&quot;, &quot;b&quot;, ...rest]</code></td>
<td>An array that contains strings <code>&quot;a&quot;</code> and <code>&quot;b&quot;</code> as its first two items, receptively. The remainder of the array is bound to <code>rest</code>.</td>
</tr>
<tr>
<td><code>{}</code></td>
<td>An object with <em>exactly zero</em> fields.</td>
</tr>
<tr>
<td><code>{a: 1.5}</code></td>
<td>An object with a field <code>&quot;a&quot;</code> containing number <code>1.5</code>. <em>There may be more fields.</em></td>
</tr>
<tr>
<td><code>{a}</code></td>
<td>An object with a field <code>&quot;a&quot;</code> whose value is then bound to name <code>a</code>. <em>There may be more fields.</em></td>
</tr>
<tr>
<td><code>{a: x}</code></td>
<td>An object with a field <code>&quot;a&quot;</code> whose value is then bound to name <code>x</code>. <em>There may be more fields.</em></td>
</tr>
<tr>
<td><code>{&quot;null&quot;: a}</code></td>
<td>An object with a field <code>&quot;null&quot;</code> whose value is then bound to name <code>a</code>. (<code>null</code> itself is a reserved keyword). <em>There may be more fields.</em></td>
</tr>
</tbody>
</table>
<p>Notably, Acutis does not check the size of objects and arrays except for
empty objects (<code>{}</code>) and empty arrays (<code>[]</code>).</p>
<h3 id="ignoring-values-with-_-(underscore)">Ignoring values with <code>_</code> (underscore)</h3>
<p>Bindings will match any value, so they can be used as ‚Äúcatch-all‚Äù patterns.
However, Acutis will not let you reuse a binding in a pattern, so a pattern
like <code>{a: x, b: x}</code> is illegal.</p>
<p>Acutis treats the <code>_</code> (underscore) name as a special case. Values bound to it
are immediately discarded. Therefore <code>{a: _, b: _}</code> will always match any
object with fields <code>a</code> and <code>b</code>, but it will ignore their contents.</p>
<p>Because bindings match <em>anything</em>, you can use <code>_</code> as a ‚Äúdefault‚Äù case:</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">match</span> <span class="token variable">greeting</span><br>   <span class="token keyword">with</span> <span class="token string">"Hello"</span> <span class="token delimiter punctuation">%}</span></span><br>  This is an English greeting.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">with</span> <span class="token string">"Hola"</span> <span class="token delimiter punctuation">%}</span></span><br>  This is a Spanish greeting.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">with</span> <span class="token variable">_</span> <span class="token delimiter punctuation">%}</span></span><br>  This is some other kind of greeting.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">match</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<h3 id="matching-multiple-values-at-once">Matching multiple values at once</h3>
<p>You can match many values at once by separating them with a comma (<code>,</code>). This
can be useful for reasoning about two-dimensional matrices of data.</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">match</span> <span class="token variable">object</span><span class="token punctuation">,</span> <span class="token variable">color</span><br>   <span class="token keyword">with</span> <span class="token string">"sky"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><br>   <span class="token keyword">with</span> <span class="token string">"grass"</span><span class="token punctuation">,</span> <span class="token string">"green"</span> <span class="token delimiter punctuation">%}</span></span><br>  That's a common color.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">with</span> <span class="token variable">_</span><span class="token punctuation">,</span> <span class="token variable">_</span> <span class="token delimiter punctuation">%}</span></span><br>  That's an unusual color.<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">match</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<p>The number of patterns must match the number of values. This is illegal:</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">match</span> <span class="token variable">object</span><span class="token punctuation">,</span> <span class="token variable">color</span> <span class="token keyword">with</span> <span class="token string">"sky"</span> <span class="token delimiter punctuation">%}</span></span><br>  I forgot to match the color!<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">match</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<h3 id="the-rules-of-pattern-matching">The rules of pattern matching</h3>
<ul>
<li>When matching a value, at least one of the patterns <em>must</em> match. If no match
is found, then Acutis raises an error. (You can avoid this with a catch-all
pattern.)</li>
<li>Patterns are checked in the order they‚Äôre written. It‚Äôs usually best to put
more specific patterns before less specific patterns, with catch-all
patterns at the end.</li>
<li>When binding values, a binding name cannot be used more than once per
pattern. The only exception is <code>_</code>.</li>
<li>Each <code>with</code> clause must have the same number of patterns as the number of
values being matched.</li>
<li>Patterns can only contain concrete values. The following code doesn‚Äôt work
as you may expect: <code>{% match a with b %}...</code>. It doesn‚Äôt compare the value
of <code>a</code> with value of <code>b</code>, but rather binds the value of <code>a</code> to a new <code>b</code>
binding.</li>
</ul>
<h2 id="type">Type</h2>
<p>Acutis uses strong typing, where every value can only be of one type. Acutis
also uses dynamic typing, where types are checked at runtime, not compile
time.</p>
<p>Type definitions types are borrowed from <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON">JSON</a>:</p>
<ul>
<li>Object</li>
<li>Array</li>
<li>String</li>
<li>Number</li>
<li>Boolean</li>
<li>Null</li>
</ul>
<p>When a value is in a pattern, the matched value must be the same type. The
only exception to this rule that Acutis assumes all values are <em>nullable</em>, so
<code>null</code> can be compared with any value without a type error.</p>
<p>Only <code>string</code> and <code>number</code> values can be echoed. <code>null</code> cannot be echoed.</p>
<p>Acutis is suited for environments where data comes from a statically typed
source. Union types, such as <code>boolean | number</code>, are not supported. If you
must use data like that, we recommend you normalize the data before passing
it to templates. However, because type checking happens at runtime, it is
sometimes possible write patterns that cleverly guard against potential
errors. This usually isn‚Äôt best practice, though.</p>
<h2 id="template-components">Template components</h2>
<p>Template components in Acutis are analogous to ‚Äúpartials‚Äù or ‚Äúincludes‚Äù in
other template languages. They are how we reuse common pieces of templates.
We can also write them in JavaScript to add custom runtime logic, which makes
them also comparable to ‚Äúfilters‚Äù or ‚Äúshortcodes‚Äù in other languages.</p>
<p>Components always begin with a capital letter. They accept XML-style props
which are turned into bindings within the component. They also end with
XML-style <code>/</code> (backslash). If you‚Äôve used React JSX before, these concepts
will look similar.</p>
<p>Components are global. Once they are loaded into the render context, any
template in the render tree can access them. (See <a href="../api/#rendercontext"><code>renderContext</code></a> in the API
manual for more information.)</p>
<p>A couple of basic components:</p>
<p>File: <code>Byline.acutis</code></p>
<pre class="language-jinja2"><code class="language-jinja2">Written by <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">name</span> <span class="token delimiter punctuation">}}</span></span>.</code></pre>
<p>File: <code>Articles.acutis</code></p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">map</span> <span class="token variable">articles</span> <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">,</span> <span class="token variable">author</span><span class="token punctuation">}</span> <span class="token delimiter punctuation">%}</span></span><br>  <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span> <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">Byline</span> <span class="token variable">name</span><span class="token operator">=</span><span class="token variable">author</span> <span class="token operator">/</span> <span class="token delimiter punctuation">%}</span></span><br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">map</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<h3 id="patterns-in-props">Patterns in props</h3>
<p>Patterns can be used in props. They compile into the values they would match
in pattern matching.</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">Article</span><br>   <span class="token variable">published</span><span class="token operator">=</span><span class="token boolean">true</span><br>   <span class="token variable">class</span><span class="token operator">=</span><span class="token string">"news"</span><br>   <span class="token variable">authors</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token variable">author</span><span class="token punctuation">,</span> <span class="token variable">editor</span><span class="token punctuation">]</span><br>   <span class="token operator">/</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<p>‚ö†Ô∏è Unbound names in these patterns will not default to <code>null</code>. They will raise
an error.</p>
<h3 id="prop-punning">Prop punning</h3>
<p>Props can be ‚Äúpunned.‚Äù You can take code such as <code>{% DateTime date=date / %}</code>
and abbreviate it to <code>{% DateTime date / %}</code>.</p>
<h3 id="template-children-props">Template children props</h3>
<p>Props can be template sections, which are considered the template‚Äôs
‚Äúchildren.‚Äù These are denoted with octothorpes, beginning with <code>#</code> and ending
with <code>/#</code>. Children‚Äôs names must begin with a capital letter, just like
components.</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">Layout</span><br>   <span class="token variable">Header</span><span class="token operator">=</span>#<span class="token delimiter punctuation">%}</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span> <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>   <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span><span class="token operator">/</span>#<br>   <span class="token variable">Sidebar</span><span class="token operator">=</span>#<span class="token delimiter punctuation">%}</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span> Menu <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br>    <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">map</span> <span class="token variable">menu</span> <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">,</span> <span class="token variable">slug</span><span class="token punctuation">}</span> <span class="token delimiter punctuation">%}</span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">slug</span> <span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>    <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">map</span> <span class="token delimiter punctuation">%}</span></span><br>   <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span><span class="token operator">/</span>#<br>   <span class="token operator">/</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<p>Inside the template, you can echo these children the same way you echo other
bindings, such as <code>{{ Header }}</code> or <code>{{ Sidebar }}</code>. Their contents are
rendered just like any template content, so they will not be escaped.</p>
<p>Template children may look like regular bindings, but they live on a separate
layer of the language. We can‚Äôt use them with <code>map</code> or <code>match</code>, and we can‚Äôt
put them inside patterns. We can pass them to other components‚Äô children
props.</p>
<h3 id="default-children-prop">Default children prop</h3>
<p>A template section inside a component is automatically bound to a children
prop named <code>Children</code>.</p>
<p>An implicit children prop:</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">Layout</span> <span class="token delimiter punctuation">%}</span></span><br>  content<br><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token operator">/</span><span class="token variable">Layout</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<p>An explicit children prop:</p>
<pre class="language-jinja2"><code class="language-jinja2"><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">Layout</span> <br>   <span class="token variable">Children</span><span class="token operator">=</span>#<span class="token delimiter punctuation">%}</span></span><br>    content<br>   <span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{%</span><span class="token operator">/</span>#<br>   <span class="token operator">/</span> <span class="token delimiter punctuation">%}</span></span></code></pre>
<p>Both of those examples are rendered identically. If you‚Äôve used React, this
should look familiar.</p>
<nav class="next">
            <h2 class="next__header">Next:</h2>
            <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis&#x2F;api&#x2F;" class="next__url">Read the API üëâ</a>
          </nav>
      </article>
    </main><footer class="footer">
  <p>
    Published in 2021 by <a href="https:&#x2F;&#x2F;johnridesa.bike">John Jackson</a>.
  </p>
  <p class="footer__license">
    <a href="https:&#x2F;&#x2F;johnridesa.bike&#x2F;acutis/license/">View the license</a>.
  </p>
</footer>
</body>
</html>