var ze=Object.defineProperty;var Ke=(r,e)=>{for(var n in e)ze(r,n,{get:e[n],enumerable:!0})};function T(r){return r===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:r!==null&&r.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function w(r){if(!(r!==null&&r.BS_PRIVATE_NESTED_SOME_NONE!==void 0))return r;var e=r.BS_PRIVATE_NESTED_SOME_NONE;if(e!==0)return{BS_PRIVATE_NESTED_SOME_NONE:e-1|0}}function zr(r,e){return r>e?r:e}function U(r,e){if(e>=0&&e<r.length)return T(r[e])}function Kr(r,e){for(var n=r.length,t=e.length,u=new Array(n+t|0),i=0;i<n;++i)u[i]=r[i];for(var a=0;a<t;++a)u[n+a|0]=e[a];return u}function Zr(r,e){for(var n=r.length,t=e<0?zr(n+e|0,0):e,u=n-t|0,i=new Array(u),a=0;a<u;++a)i[a]=r[t+a|0];return i}function k(r,e){for(var n=0,t=r.length;n<t;++n)e(r[n])}function ar(r,e){for(var n=r.length,t=new Array(n),u=0;u<n;++u)t[u]=e(r[u]);return t}function Hr(r,e){for(var n=0,t=r.length;n<t;++n)e(n,r[n])}function Ze(r){for(var e=r,n=0;;){var t=n,u=e;if(!u)return t;n=t+1|0,e=u.tl}}function He(r,e,n){for(;;){var t=n,u=e;if(!t)return;r[u]=t.hd,n=t.tl,e=u+1|0}}function Xr(r){var e=Ze(r),n=new Array(e);return He(n,0,r),n}var Er={contents:0};function fr(r){return Er.contents=Er.contents+1|0,r+("/"+Er.contents)}function Yr(r){return r==null?!1:typeof r.RE_EXN_ID=="string"}function Xe(r,e){return{_0:e(r._0),_1:ar(r._1,e)}}var rr={map:Xe};function Ye(r){return{character:r+1|0}}function qe(r){if(typeof r=="number")return r===0?"match":"map";switch(r.TAG|0){case 0:var e=r._0;return e!==void 0?e:null;case 1:return"section: "+r.component+"#"+r.section;case 2:return r._0}}var rn={nameToJson:qe},p={$$location:Ye,Stack:rn};function en(r){switch(r.TAG|0){case 0:return"[text]: "+r._1;case 1:return"{*"+r._1+"*}";case 2:return'"'+r._1+'"';case 3:return String(r._1);case 4:return"true";case 5:return"false";case 6:return"null";case 7:return",";case 8:return":";case 9:return"[";case 10:return"]";case 11:return"{";case 12:return"}";case 13:return"...";case 15:return"/";case 16:return"#";case 17:return"=";case 14:case 18:return r._1;case 19:return"~";case 20:return"?";case 21:return"&";case 22:return"{{";case 23:return"[end of file]"}}function nn(r){return r._0}var Tr={toString:en,toLocation:nn};function tn(r){return{data:r,acutis_is_valid:"ACUTIS_IS_VALID"}}function un(r){if(r.acutis_is_valid==="ACUTIS_IS_VALID")return T(r.data)}var R={make:tn,validate:un};function an(r){var e=r.NAME;return e==="Object"?"object":e==="Binding"?"binding: `"+r.VAL[1]+"`":e==="Number"?"number":e==="True"||e==="False"?"boolean":e==="Array"||e==="ArrayWithTailBinding"?"array":e==="Null"?"null":"string"}function fn(r){var e=r.NAME;return e==="True"||e==="Null"||e==="False"?r.VAL:r.VAL[0]}var j={toString:an,toLocation:fn};function C(r){return ar(Xr(r),p.Stack.nameToJson)}var V=fr("Debug-AcutisLang.CompileError");function qr(r,e){throw{RE_EXN_ID:V,_1:{message:"Unexpected end of file.",kind:"Syntax",location:p.$$location(r),path:[e!==void 0?e:null],exn:void 0},Error:new Error}}function re(r,e){throw{RE_EXN_ID:V,_1:{message:"Unterminated comment.",kind:"Syntax",location:p.$$location(r),path:[e!==void 0?e:null],exn:void 0},Error:new Error}}function ee(r,e){throw{RE_EXN_ID:V,_1:{message:"Unterminated string.",kind:"Syntax",location:p.$$location(r),path:[e!==void 0?e:null],exn:void 0},Error:new Error}}function ne(r,e,n){throw{RE_EXN_ID:V,_1:{message:'"'+n+'" is an illegal identifier name.',kind:"Parse",location:p.$$location(r),path:[e!==void 0?e:null],exn:void 0},Error:new Error}}function te(r,e,n){throw{RE_EXN_ID:V,_1:{message:'Invalid character: "'+n+'".',kind:"Syntax",location:p.$$location(r),path:[e!==void 0?e:null],exn:void 0},Error:new Error}}function lr(r,e,n,t){throw{RE_EXN_ID:V,_1:{message:'Unexpected character: "'+n+'". Expected: "'+t+'".',kind:"Syntax",location:p.$$location(r),path:[e!==void 0?e:null],exn:void 0},Error:new Error}}function g(r,e){throw{RE_EXN_ID:V,_1:{message:'Unexpected token: "'+Tr.toString(r)+'".',kind:"Parse",location:p.$$location(Tr.toLocation(r)),path:[e!==void 0?e:null],exn:void 0},Error:new Error}}function ue(r,e){throw{RE_EXN_ID:V,_1:{message:'Bad map type: "'+j.toString(r)+'". I can only map bindings and arrays.',kind:"Parse",location:p.$$location(j.toLocation(r)),path:[e!==void 0?e:null],exn:void 0},Error:new Error}}function or(r){if(typeof r=="number")switch(r){case 0:case 1:return"boolean";case 2:return"null"}else switch(r.TAG|0){case 0:return"string";case 1:return"number";case 2:return"object";case 3:return"array"}}function ie(r,e,n){return{message:'Component "'+e+'" does not exist.',kind:"Render",location:p.$$location(r),path:C(n),exn:void 0}}function ae(r,e,n){var t=or(r),u=j.toString(e);return{message:"This pattern is type "+u+" but the data is type "+t+".",kind:"Type",location:p.$$location(j.toLocation(e)),path:C(n),exn:void 0}}function br(r,e,n,t){var u=or(r),i=j.toString(e);return{message:'"'+n+'" is type '+i+" but the data is type "+u+".",kind:"Type",location:p.$$location(j.toLocation(e)),path:C(t),exn:void 0}}function fe(r,e,n){return{message:'"'+e+'" is bound multiple times in this pattern.',kind:"Pattern",location:p.$$location(r),path:C(n),exn:void 0}}function le(r,e){return{message:"None of the patterns match the data. Consider a catch-all case to avoid this.",kind:"Pattern",location:p.$$location(r),path:C(e),exn:void 0}}function oe(r,e){return{message:"The number of patterns does not match the number of data.",kind:"Pattern",location:p.$$location(r),path:C(e),exn:void 0}}function ce(r,e,n,t){var u=or(n);return{message:'"'+e+'" is type '+u+". I can only echo strings and numbers.",kind:"Render",location:p.$$location(r),path:C(t),exn:void 0}}function Br(r,e,n){return{message:'Binding "'+e+'" does not exist.',kind:"Render",location:p.$$location(r),path:C(n),exn:void 0}}function wr(r,e,n){return{message:'Template child "'+e+'" does not exist.',kind:"Render",location:p.$$location(r),path:C(n),exn:void 0}}function ve(r,e,n,t){var u=or(n);return{message:'"'+e+'" is a '+u+". I can only map arrays.",kind:"Type",location:p.$$location(r),path:C(t),exn:void 0}}function Mr(r){return{message:"A template AST was not valid. Did you forget to compile one?",kind:"Render",location:void 0,path:C(r),exn:void 0}}function se(r,e){return{message:"An exception was thrown while rendering this template. This is probably due to malformed input.",kind:"Compile",location:void 0,path:[e!==void 0?e:null],exn:T(r)}}function _e(r,e){return{message:"An exception was thrown while rendering a template component.",kind:"Render",location:void 0,path:C(e),exn:T(r)}}function Cr(r,e){return{message:r,kind:"Render",location:void 0,path:C(e),exn:void 0}}function de(r){var e=parseFloat(r);if(!isNaN(e))return e}function y(r){return{length:0,first:void 0,last:void 0}}function Gr(r){r.length=0,r.first=void 0,r.last=void 0}function o(r,e){var n={content:e,next:void 0},t=r.last;t!==void 0?(r.length=r.length+1|0,t.next=n,r.last=n):(r.length=1,r.first=n,r.last=n)}function Ae(r){var e=r.first;if(e!==void 0)return e.content;throw{RE_EXN_ID:"Not_found",Error:new Error}}function me(r){var e=r.first;if(e!==void 0){var n=e.next;return n===void 0?(Gr(r),e.content):(r.length=r.length-1|0,r.first=n,e.content)}throw{RE_EXN_ID:"Not_found",Error:new Error}}function er(r){return r.length===0}function cr(r,e){for(var n=r.first;;){var t=n;if(t===void 0)return;e(t.content),n=t.next}}function xr(r,e){if(!(r.length<=0)){var n=e.last;return n!==void 0?(e.length=e.length+r.length|0,n.next=r.first,e.last=r.last,Gr(r)):(e.length=r.length,e.first=r.first,e.last=r.last,Gr(r))}}function ln(r,e,n){for(;;){var t=n,u=r;if(t===void 0)return;e[u]=t.content,n=t.next,r=u+1|0}}function A(r){var e=new Array(r.length);return ln(0,e,r.first),e}function O(r,e){return r.str.charAt(r.position+e|0)}function Ur(r){return r.str.charAt(r.position)}function E(r){r.position=r.position+1|0}function he(r){var e=Ur(r);return E(r),e}function on(r,e){for(var n=r.position;!e(r.str.charAt(n));)n=n+1|0;return n}function vr(r,e){r.position=r.position+e|0}function Vr(r,e){var n=r.position,t=on(r,e);return r.position=t,r.str.slice(n,t)}function $(r,e){var n=r.position;return r.position=r.position+e|0,r.str.slice(n,r.position)}function cn(r){switch(r){case"+":case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"E":case"e":return!1;default:return!0}}function sr(r,e){for(var n=r.position,t=0;;){var u=t,i=O(r,u);switch(i){case"":return o(e,{TAG:0,_0:n,_1:$(r,u)}),3;case"{":var a=O(r,u+1|0);switch(a){case"%":return o(e,{TAG:0,_0:n,_1:$(r,u)}),vr(r,2),1;case"*":return o(e,{TAG:0,_0:n,_1:$(r,u)}),vr(r,2),2;case"{":return o(e,{TAG:0,_0:n,_1:$(r,u)}),vr(r,2),0;default:t=u+2|0;continue}default:t=u+1|0;continue}}}function vn(r,e){for(var n=r.position,t=0,u=0;;){var i=u,a=t,f=O(r,a);switch(f){case"":return re(n,e);case"*":var l=O(r,a+1|0);if(l==="}"){if(i===0){var c=$(r,a);return vr(r,2),c}u=i-1|0,t=a+2|0;continue}t=a+2|0;continue;case"{":var s=O(r,a+1|0);if(s==="*"){u=i+1|0,t=a+2|0;continue}t=a+1|0;continue;default:t=a+1|0;continue}}}var sn=/\\"/g;function _n(r,e){for(var n=r.position,t=0;;){var u=t,i=O(r,u);switch(i){case"":return ee(n,e);case'"':var a=$(r,u).replace(sn,'"');return E(r),a;case"\\":var f=O(r,u+1|0);switch(f){case'"':case"\\":t=u+2|0;continue;default:t=u+1|0;continue}default:t=u+1|0;continue}}}function dn(r,e){var n=r.position,t=Vr(r,cn),u=de(t);return u!==void 0?u:ne(n,e,t)}var An=/^[a-zA-Z0-9_]$/;function pe(r){return!An.test(r)}var mn=/^[a-z_]$/,hn=/^[A-Z]$/;function pn(r,e){var n=Vr(r,pe);switch(n){case"false":return{TAG:5,_0:e};case"null":return{TAG:6,_0:e};case"true":return{TAG:4,_0:e};default:return{TAG:18,_0:e,_1:n}}}function ge(r,e,n,t){for(var u=!0;u;){var i=r.position,a=Ur(r),f=0;if(a===t)E(r),u=!1;else switch(a){case"":qr(i,n);break;case"	":case`
`:case"\r":case" ":E(r);break;case'"':E(r),o(e,{TAG:2,_0:i,_1:_n(r,n)});break;case"#":E(r),o(e,{TAG:16,_0:i});break;case"&":E(r),o(e,{TAG:21,_0:i});break;case",":E(r),o(e,{TAG:7,_0:i});break;case".":var l=$(r,3);l==="..."?o(e,{TAG:13,_0:i}):lr(i,n,l,"...");break;case"/":E(r),o(e,{TAG:15,_0:i});break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":f=1;break;case":":E(r),o(e,{TAG:8,_0:i});break;case"=":E(r),o(e,{TAG:17,_0:i});break;case"?":E(r),o(e,{TAG:20,_0:i});break;case"[":E(r),o(e,{TAG:9,_0:i});break;case"]":E(r),o(e,{TAG:10,_0:i});break;case"{":E(r),o(e,{TAG:11,_0:i});break;case"}":E(r),o(e,{TAG:12,_0:i});break;case"~":E(r),o(e,{TAG:19,_0:i});break;default:mn.test(a)?o(e,pn(r,i)):hn.test(a)?o(e,{TAG:14,_0:i,_1:Vr(r,pe)}):te(i,n,a)}f===1&&o(e,{TAG:3,_0:i,_1:dn(r,n)})}}function ye(r,e){for(var n={str:e,position:0},t=y(void 0),u=sr(n,t);;){var i=u;switch(i){case 0:var a=n.position;Ur(n)==="~"&&(o(t,{TAG:19,_0:n.position}),E(n)),o(t,{TAG:22,_0:a}),ge(n,t,r,"}");var f=he(n);if(f!=="}")return lr(n.position,r,f,"}");u=sr(n,t);continue;case 1:ge(n,t,r,"%");var l=he(n);if(l!=="}")return lr(n.position,r,l,"}");u=sr(n,t);continue;case 2:var c=n.position;o(t,{TAG:1,_0:c,_1:vn(n,r)}),u=sr(n,t);continue;case 3:return o(t,{TAG:23,_0:n.position}),{tokens:t,name:r}}}}function _r(r){return Ae(r.tokens)}function v(r){return me(r.tokens)}function h(r){return r.name}var gn=fr("Caml_js_exceptions.Error");function dr(r){return Yr(r)?r:{RE_EXN_ID:gn,_1:r}}function S(r,e){switch(r.TAG|0){case 2:return{NAME:"String",VAL:[r._0,r._1]};case 3:return{NAME:"Number",VAL:[r._0,r._1]};case 4:return{NAME:"True",VAL:r._0};case 5:return{NAME:"False",VAL:r._0};case 6:return{NAME:"Null",VAL:r._0};case 9:var n=r._0,t=v(e);if(t.TAG===10)return{NAME:"Array",VAL:[n,[]]};var u=y(void 0);o(u,S(t,e));for(var i;;){var a=v(e);switch(a.TAG|0){case 7:var f=v(e);if(f.TAG===13){var l=v(e);if(l.TAG!==18)return g(l,h(e));var c=v(e);return c.TAG===10?{NAME:"ArrayWithTailBinding",VAL:[n,A(u),{NAME:"Binding",VAL:[l._0,l._1]}]}:g(c,h(e))}o(u,S(f,e)),i=void 0;continue;case 10:return{NAME:"Array",VAL:[n,A(u)]};default:return g(a,h(e))}}case 11:var s=r._0,d=v(e);if(d.TAG===12)return{NAME:"Object",VAL:[s,[]]};var _=y(void 0);o(_,Le(d,e));for(var L;;){var m=v(e);switch(m.TAG|0){case 7:o(_,Le(v(e),e)),L=void 0;continue;case 12:return{NAME:"Object",VAL:[s,A(_)]};default:return g(m,h(e))}}case 18:return{NAME:"Binding",VAL:[r._0,r._1]};default:return g(r,h(e))}}function Le(r,e){switch(r.TAG|0){case 2:var n=v(e);return n.TAG===8?[r._1,S(v(e),e)]:g(n,h(e));case 18:var t=r._1,u=_r(e);return u.TAG!==8?[t,{NAME:"Binding",VAL:[r._0,t]}]:(v(e),[t,S(v(e),e)]);default:return g(r,h(e))}}function Ee(r){for(var e=S(v(r),r),n=y(void 0),t;;){var u=_r(r);if(u.TAG!==7)return{_0:e,_1:A(n)};v(r),o(n,S(v(r),r)),t=void 0}}function Te(r){var e=v(r);return e.TAG===18?[e._0,e._1]:g(e,h(r))}function yn(r){for(var e=Te(r),n=y(void 0),t;;){var u=_r(r);if(u.TAG!==7)return{_0:e,_1:A(n)};v(r),o(n,Te(r)),t=void 0}}function be(r,e,n){switch(r.TAG|0){case 2:return{TAG:2,_0:r._1,_1:n};case 3:return{TAG:3,_0:r._1,_1:n};case 18:return{TAG:0,_0:r._0,_1:r._1,_2:n};default:return g(r,h(e))}}function Be(r){var e=v(r);switch(e.TAG|0){case 14:return{TAG:1,_0:e._0,_1:e._1};case 21:return be(v(r),r,0);default:return be(e,r,1)}}function Ln(r){for(var e=Be(r),n=y(void 0),t;;){var u=v(r);switch(u.TAG|0){case 0:case 19:return[u,{_0:e,_1:A(n)}];case 20:o(n,Be(r)),t=void 0;continue;default:return g(u,h(r))}}}function En(r){switch(r.TAG|0){case 15:return!0;case 18:return r._1==="with";default:return!1}}function Tn(r){return r.TAG===23}function we(r){return r.TAG===15}function Ar(r,e,n){for(var t=y(void 0),u=r;;){var i=u;if(n(i))return[i,A(t)];switch(i.TAG|0){case 0:var a=i._1,f=v(e);if(f.TAG===19){o(t,{TAG:0,_0:a,_1:1}),u=v(e);continue}o(t,{TAG:0,_0:a,_1:3}),u=f;continue;case 1:u=v(e);continue;case 14:o(t,bn(i._0,i._1,e)),u=v(e);continue;case 18:var l=i._0;switch(i._1){case"map":var c=S(v(e),e),s=c.NAME;if(!(s==="Array"||s==="ArrayWithTailBinding"||s==="Binding"))return ue(c,h(e));var d=Me(e,"map");o(t,{TAG:3,_0:l,_1:c,_2:d}),u=v(e);continue;case"match":var _=yn(e),L=Me(e,"match");o(t,{TAG:2,_0:l,_1:_,_2:L}),u=v(e);continue;default:return g(i,h(e))}case 19:var m=v(e);if(m.TAG!==0)return g(m,h(e));var b=m._1,M=v(e);if(M.TAG===19){o(t,{TAG:0,_0:b,_1:2}),u=v(e);continue}o(t,{TAG:0,_0:b,_1:0}),u=M;continue;case 22:var G=Ln(e);o(t,{TAG:1,_0:i._0,_1:G[1]}),u=G[0];continue;default:return g(i,h(e))}}}function Ce(r){for(var e=Ee(r),n=y(void 0),t;;){var u=v(r);if(u.TAG===18&&u._1==="with"){o(n,Ee(r)),t=void 0;continue}var i=Ar(u,r,En);return[i[0],{patterns:{_0:e,_1:A(n)},ast:i[1]}]}}function Me(r,e){var n=v(r);if(n.TAG!==18)return g(n,h(r));if(n._1!=="with")return g(n,h(r));for(var t=Ce(r),u=t[1],i=y(void 0),a=t[0];;){var f=a;if(f.TAG===15){var l=v(r);return l.TAG===18&&l._1===e?{_0:u,_1:A(i)}:g(l,h(r))}var c=Ce(r);o(i,c[1]),a=c[0]}}function bn(r,e,n){var t=Bn(n),u=t[2],i=t[1],a=t[0];if(a.TAG===15)return{TAG:4,loc:r,name:e,props:A(i),children:A(u)};var f=Ar(a,n,we),l=v(n);return l.TAG===14&&e===l._1?(o(u,["Children",{TAG:1,_0:f[1]}]),{TAG:4,loc:r,name:e,props:A(i),children:A(u)}):g(l,h(n))}function Bn(r){for(var e=y(void 0),n=y(void 0),t=v(r);;){var u=t;switch(u.TAG|0){case 14:var i=u._1,a=v(r);if(a.TAG===17){var f=v(r);switch(f.TAG|0){case 14:o(n,[i,{TAG:0,_0:f._1}]),t=v(r);continue;case 16:var l=Ar(v(r),r,we),c=v(r);if(c.TAG!==16)return g(c,h(r));o(n,[i,{TAG:1,_0:l[1]}]),t=v(r);continue;default:return g(f,h(r))}}else{o(n,[i,{TAG:0,_0:i}]),t=a;continue}case 18:var s=u._1,d=v(r);if(d.TAG===17){var _=S(v(r),r);o(e,[s,_]),t=v(r);continue}o(e,[s,{NAME:"Binding",VAL:[u._0,s]}]),t=d;continue;default:return[u,e,n]}}}function Ge(r,e){try{var n=ye(r,e),t=Ar(v(n),n,Tn);return R.make({NAME:"data",VAL:{ast:t[1],name:r}})}catch(i){var u=dr(i);return u.RE_EXN_ID===V?R.make({NAME:"errors",VAL:u._1}):R.make({NAME:"errors",VAL:se(u,r)})}}function wn(r,e){var n=Ge(r,e);return function(t,u,i){return t.render(n,u,i)}}function Mn(r,e){return Ge(e,r)}function Cn(r,e){return wn(e,r)}var Nr={makeAst:Mn,make:Cn};var Or={};Ke(Or,{Async:()=>Yn,make:()=>Xn});function Q(r,e){if(e in r)return T(r[e])}function nr(r){var e=typeof r;return e==="string"?{TAG:0,_0:r}:e==="number"?{TAG:1,_0:r}:e==="boolean"?r===!0?1:0:r===null?2:Array.isArray(r)?{TAG:3,_0:r}:{TAG:2,_0:r}}function z(r,e){return r.TAG===0?{TAG:0,_0:e(r._0)}:{TAG:1,_0:r._0}}function xe(r,e){return r.TAG===0?e(r._0):{TAG:1,_0:r._0}}function K(r){return r!==void 0?r.h:0}function N(r,e,n,t){var u=K(r),i=K(t);return{k:e,v:n,h:u>=i?u+1|0:i+1|0,l:r,r:t}}function kr(r,e){return{k:r,v:e,h:1,l:void 0,r:void 0}}function Sr(r,e){return r.v===e?r:{k:r.k,v:e,h:r.h,l:r.l,r:r.r}}function mr(r,e,n,t){var u=r!==void 0?r.h:0,i=t!==void 0?t.h:0;if(u>(i+2|0)){var a=r.l,f=r.r;return K(a)>=K(f)?N(a,r.k,r.v,N(f,e,n,t)):N(N(a,r.k,r.v,f.l),f.k,f.v,N(f.r,e,n,t))}if(i<=(u+2|0))return{k:e,v:n,h:u>=i?u+1|0:i+1|0,l:r,r:t};var l=t.l,c=t.r;return K(c)>=K(l)?N(N(r,e,n,l),t.k,t.v,c):N(N(r,e,n,l.l),l.k,l.v,N(l.r,t.k,t.v,c))}function Qr(r,e){for(;;){var n=r;if(n===void 0)return;Qr(n.l,e),e(n.k,n.v),r=n.r}}function Ue(r,e){for(;;){var n=r;if(n===void 0)return!1;var t=n.k;if(e===t)return!0;r=e<t?n.l:n.r}}function hr(r,e,n){if(r===void 0)return kr(e,n);var t=r.k;if(e===t)return Sr(r,n);var u=r.v;return e<t?mr(hr(r.l,e,n),t,u,r.r):mr(r.l,t,u,hr(r.r,e,n))}var Ve=Ue;var Ne=Qr;function Dr(r,e){for(var n=y(void 0),t=0;;){var u=t,i=U(r,u);if(i===void 0)return{TAG:0,_0:n};var a=e(w(i));if(a.TAG!==0)return a;o(n,a._0),t=u+1|0}}function pr(r,e,n){var t=r.NAME;if(t==="Object")return z(Dr(r.VAL[1],function(f){var l=f[0];return z(pr(f[1],e,n),function(c){return[l,c]})}),function(f){var l={};return cr(f,function(c){l[c[0]]=c[1]}),l});if(t!=="Binding")return t==="False"?{TAG:0,_0:!1}:t==="Array"||t==="ArrayWithTailBinding"?z(ke(r,e,n),function(f){return f}):t==="Null"?{TAG:0,_0:null}:t==="True"?{TAG:0,_0:!0}:{TAG:0,_0:r.VAL[1]};var u=r.VAL,i=u[1],a=Q(e,i);return a!==void 0?{TAG:0,_0:w(a)}:{TAG:1,_0:Br(u[0],i,n)}}function ke(r,e,n){if(r.NAME==="Array")return z(Dr(r.VAL[1],function(c){return pr(c,e,n)}),A);var t=r.VAL,u=t[2].VAL,i=u[1],a=Q(e,i);if(a===void 0)return{TAG:1,_0:Br(u[0],i,n)};var f=nr(w(a));if(typeof f=="number")return{TAG:1,_0:br(f,r,i,n)};if(f.TAG!==3)return{TAG:1,_0:br(f,r,i,n)};var l=f._0;return z(Dr(t[1],function(c){return pr(c,e,n)}),function(c){return Kr(A(c),l)})}function Se(r,e,n,t){return e==="_"?{TAG:0,_0:r}:Ve(r,e)?{TAG:1,_0:{TAG:1,loc:t,binding:e}}:{TAG:0,_0:hr(r,e,n)}}function Ir(r,e,n){var t=nr(e),u=r.NAME;if(u==="Object"){var i=r.VAL[1];if(i.length!==0){if(typeof t=="number")return t===2?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}};if(t.TAG===2)for(var a=t._0,f=n,l=0;;){var c=l,s=f,d=U(i,c);if(d===void 0)return{TAG:0,_0:s};var _=Q(a,d[0]);if(_===void 0)return{TAG:1,_0:0};var L=Ir(d[1],w(_),s);if(L.TAG!==0)return L;l=c+1|0,f=L._0}else return{TAG:1,_0:{TAG:0,data:t,pattern:r}}}else return typeof t=="number"?t===2?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:t.TAG===2?Object.keys(t._0).length===0?{TAG:0,_0:n}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}}if(u==="Binding"){var m=r.VAL;return Se(n,m[1],e,m[0])}if(u==="Number")return typeof t=="number"?t===2?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:t.TAG===1?r.VAL[1]===t._0?{TAG:0,_0:n}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}};if(u==="False"){if(typeof t!="number")return{TAG:1,_0:{TAG:0,data:t,pattern:r}};switch(t){case 0:return{TAG:0,_0:n};case 1:case 2:return{TAG:1,_0:0}}}else if(u==="ArrayWithTailBinding"){var b=r.VAL,M=b[2].VAL,G=M[1],D=M[0],W=b[1];if(typeof t=="number")return t===2?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}};if(t.TAG!==3)return{TAG:1,_0:{TAG:0,data:t,pattern:r}};var P=t._0;return xe(Qe(W,P,n),function(tr){return Se(tr,G,Zr(P,W.length),D)})}else{if(u==="Null")return typeof t=="number"&&t>=2?{TAG:0,_0:n}:{TAG:1,_0:0};if(u==="True"){if(typeof t!="number")return{TAG:1,_0:{TAG:0,data:t,pattern:r}};switch(t){case 1:return{TAG:0,_0:n};case 0:case 2:return{TAG:1,_0:0}}}else{if(u!=="Array")return typeof t=="number"?t===2?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:t.TAG===0?r.VAL[1]===t._0?{TAG:0,_0:n}:{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}};var H=r.VAL[1];return H.length!==0?typeof t=="number"?t===2?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:t.TAG===3?Qe(H,t._0,n):{TAG:1,_0:{TAG:0,data:t,pattern:r}}:typeof t=="number"?t===2?{TAG:1,_0:0}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}:t.TAG===3?t._0.length!==0?{TAG:1,_0:0}:{TAG:0,_0:n}:{TAG:1,_0:{TAG:0,data:t,pattern:r}}}}}function Qe(r,e,n){for(var t=n,u=0;;){var i=u,a=t,f=U(r,i);if(f===void 0)return{TAG:0,_0:a};var l=U(e,i);if(l===void 0)return{TAG:1,_0:0};var c=Ir(f,w(l),a);if(c.TAG!==0)return c;u=i+1|0,t=c._0}}function Vn(r,e){for(var n=e._1,t=r._1,u=r._0,i=e._0,a,f=0;;){var l=f,c=a,s=i,d=u,_=Ir(d,s,c);if(_.TAG!==0)return _;var L=_._0,m=U(t,l),b=U(n,l);if(m!==void 0){if(b===void 0)return{TAG:1,_0:1};f=l+1|0,a=L,i=w(b),u=m;continue}if(b!==void 0)return{TAG:1,_0:1};var M={};return Ne(L,function(G){return function(D,W){G[D]=W}}(M)),{TAG:0,_0:M}}}function Nn(r,e){for(var n=r.f,t=r.patterns,u=t._1,i=t._0,a=0;;){var f=a,l=i,c=Vn(l,e);if(c.TAG===0)return{TAG:0,_0:n(c._0)};if(c._0!==0)return c;var s=U(u,f);if(s===void 0)return{TAG:1,_0:0};a=f+1|0,i=s}}function kn(r,e){for(var n=r._1,t=r._0,u=0;;){var i=u,a=t,f=Nn(a,e);if(f.TAG===0||f._0!==0)return f;var l=U(n,i);if(l===void 0)return{TAG:1,_0:0};u=i+1|0,t=l}}function Sn(r){switch(r){case'"':return"&quot;";case"&":return"&amp;";case"'":return"&apos;";case"/":return"&#x2F;";case"<":return"&lt;";case"=":return"&#x3D;";case">":return"&gt;";case"`":return"&#x60;";default:return r}}function Rr(r,e){if(r)for(var n=0,t="";;){var u=t,i=n,a=e.charAt(i);if(a==="")return u;t=u+Sn(a),n=i+1|0}else return e}function jr(r,e){var n=Q(r,e);return n!==void 0?w(n):null}function Qn(r,e){var n=nr(jr(r,e));if(typeof n=="number")return{TAG:1,_0:n};switch(n.TAG|0){case 0:return{TAG:0,_0:n._0};case 1:return{TAG:0,_0:String(n._0)};default:return{TAG:1,_0:n}}}function Dn(r){return function(e){return e._1.length!==0?e:{_0:e._0,_1:[{NAME:"Binding",VAL:[r,"_"]}]}}}function De(r,e,n,t){var u=kn(r,e);if(u.TAG===0)return u;var i=u._0;return typeof i=="number"?i===0?{TAG:1,_0:le(n,t)}:{TAG:1,_0:oe(n,t)}:i.TAG===0?{TAG:1,_0:ae(i.data,i.pattern,t)}:{TAG:1,_0:fe(i.loc,i.binding,t)}}function Ie(r){for(var e=0;;){var n=e,t=r.charAt(n);switch(t){case"	":case`
`:case"\r":case" ":e=n+1|0;continue;default:return r.slice(n)}}}function Re(r){for(var e=r.length;;){var n=e,t=r.charAt(n-1|0);switch(t){case"	":case`
`:case"\r":case" ":e=n-1|0;continue;default:return r.slice(0,n)}}}function In(r,e,n,t,u,i,a){for(var f=r,l=0;;){var c=l,s=f;switch(s.TAG|0){case 0:var d=s._1,_=Qn(n,d);if(_.TAG===0)return i.return(Rr(s._2,_._0));var L=_._0,m=U(e,c);if(typeof L=="number"&&L>=2&&m!==void 0){l=c+1|0,f=m;continue}return a([ce(s._0,d,L,t)]);case 1:var b=s._1,M=Q(u,b);if(M!==void 0)return w(M);var G=U(e,c);if(G===void 0)return a([wr(s._0,b,t)]);l=c+1|0,f=G;continue;case 2:return i.return(Rr(s._1,s._0));case 3:return i.return(Rr(s._1,String(s._0)))}}}function Z(r,e,n,t,u,i,a,f){var l=t.stack,c=t.components,s=u(t),d=y(void 0);return k(r,function(_){switch(_.TAG|0){case 0:var L=_._0,m;switch(_._1){case 0:m=Ie(L);break;case 1:m=Re(L);break;case 2:m=Ie(Re(L));break;case 3:m=L;break}return o(d,s.return(m));case 1:var b=_._1;return o(d,In(b._0,b._1,e,l,n,s,i));case 2:var M=rr.map(_._2,function(B){var x=B.ast;return{patterns:B.patterns,f:function(I){return Z(x,Object.assign({},e,I),n,{components:t.components,stack:{hd:0,tl:l}},u,i,a,f)}}}),G=rr.map(_._1,function(B){return jr(e,B[1])}),D=De(M,G,_._0,l);return D.TAG===0?xr(D._0,d):o(d,i([D._0]));case 3:var W=_._2,P=_._1,H=_._0,tr=P.NAME,X;if(tr==="Array"||tr==="ArrayWithTailBinding")X=ke(P,e,l);else{var $r=P.VAL,Wr=$r[1],Pe=$r[0],ur=nr(jr(e,Wr));X=typeof ur=="number"||ur.TAG!==3?{TAG:1,_0:ve(Pe,Wr,ur,l)}:{TAG:0,_0:ur._0}}return X.TAG===0?Hr(X._0,function(B,x){var I=rr.map(W,function(Y){var Fe=Y.ast;return{patterns:rr.map(Y.patterns,Dn(H)),f:function(Je){return Z(Fe,Object.assign({},e,Je),n,{components:t.components,stack:{hd:{TAG:2,_0:B},tl:{hd:1,tl:l}}},u,i,a,f)}}}),F=De(I,{_0:x,_1:[B]},H,l);return F.TAG===0?xr(F._0,d):o(d,i([F._0]))}):o(d,i([X._0]));case 4:var gr=_.name,Pr=_.loc,Fr=Q(c,gr);if(Fr===void 0)return o(d,i([ie(Pr,gr,l)]));var Jr={},yr={},ir=y(void 0);return k(_.children,function(B){var x=B[1],I=B[0];if(x.TAG===0){var F=x._0,Y=Q(n,F);if(Y!==void 0){yr[I]=w(Y);return}else return o(ir,wr(Pr,F,l))}yr[I]=f(Z(x._0,e,n,{components:t.components,stack:{hd:{TAG:1,component:gr,section:I},tl:l}},u,i,a,f))}),k(_.props,function(B){var x=pr(B[1],e,l);if(x.TAG!==0)return o(ir,x._0);Jr[B[0]]=x._0}),er(ir)?o(d,a(function(){return Fr(s,Jr,yr)},function(B){return i([_e(B,l)])})):o(d,i(A(ir)))}}),d}function Rn(r){return Promise.resolve({NAME:"data",VAL:r})}function jn(r){return Promise.resolve({NAME:"errors",VAL:r})}function On(r,e){return r().catch(function(n){return e(n)})}function $n(r,e){return r.then(function(n){return n.NAME==="errors"?Promise.resolve(n):Promise.resolve({NAME:"data",VAL:e(n.VAL)})})}function Wn(r,e){return r.then(function(n){return n.NAME==="errors"?Promise.resolve(n):e(n.VAL)})}function Pn(r){var e={contents:""},n=y(void 0);return k(r,function(t){if(t.NAME==="errors")return k(t.VAL,function(u){return o(n,u)});e.contents=e.contents+t.VAL}),er(n)?Promise.resolve({NAME:"data",VAL:e.contents}):Promise.resolve({NAME:"errors",VAL:A(n)})}function je(r){return Promise.all(A(r)).then(Pn)}function Oe(r){var e=r.stack,n=r.components;return{render:function(t,u,i){var a=R.validate(t);if(a===void 0)return Promise.resolve({NAME:"errors",VAL:[Mr(e)]});if(a.NAME==="errors")return Promise.resolve({NAME:"errors",VAL:[a.VAL]});var f=a.VAL;return je(Z(f.ast,u,i,{components:n,stack:{hd:{TAG:0,_0:f.name},tl:e}},Oe,jn,On,je))},return:Rn,error:function(t){return Promise.resolve({NAME:"errors",VAL:[Cr(t,e)]})},mapChild:$n,flatMapChild:Wn}}function Fn(r){return Oe({components:r,stack:0})}function Jn(r){return{NAME:"data",VAL:r}}function zn(r){return{NAME:"errors",VAL:r}}function Kn(r,e){try{return r()}catch(t){var n=dr(t);return e(n)}}function Zn(r,e){return r.NAME==="errors"?r:{NAME:"data",VAL:e(r.VAL)}}function Hn(r,e){return r.NAME==="errors"?r:e(r.VAL)}function $e(r){var e={contents:""},n=y(void 0);return cr(r,function(t){if(t.NAME==="errors")return k(t.VAL,function(u){return o(n,u)});e.contents=e.contents+t.VAL}),er(n)?{NAME:"data",VAL:e.contents}:{NAME:"errors",VAL:A(n)}}function We(r){var e=r.stack,n=r.components;return{render:function(t,u,i){var a=R.validate(t);if(a===void 0)return{NAME:"errors",VAL:[Mr(e)]};if(a.NAME==="errors")return{NAME:"errors",VAL:[a.VAL]};var f=a.VAL;return $e(Z(f.ast,u,i,{components:n,stack:{hd:{TAG:0,_0:f.name},tl:e}},We,zn,Kn,$e))},return:Jn,error:function(t){return{NAME:"errors",VAL:[Cr(t,e)]}},mapChild:Zn,flatMapChild:Hn}}function Xn(r){return We({components:r,stack:0})}var Yn={make:Fn};var qn=Nr.makeAst,rt=Nr.make,et={makeAst:qn,make:rt},nt=Or;export{et as Compile,nt as Environment};
//# sourceMappingURL=acutis.js.map
